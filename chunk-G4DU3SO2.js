import{a as ie}from"./chunk-ATINUOUM.js";import{a as te}from"./chunk-UJO3757W.js";import{b as Me,c as T,d as we,e as ke,i as ye,j as Pe,k as Se,l as Oe,o as Te,p as Ee,q as J,r as Z,s as Ie,t as Le,x as Fe,y as Be,z as Ve}from"./chunk-O3CTDYVO.js";import{a as Ae,b as ee,c as z}from"./chunk-ECECQ7NF.js";import{e as _e,f as xe}from"./chunk-5NENZ4M5.js";import{$ as _,$a as f,Ab as d,Bb as G,Ca as U,Fb as E,Ha as q,Ja as B,Jb as ve,P as me,Ra as b,Sa as S,Ta as O,U as I,Va as se,Vb as Q,Wa as V,Xa as A,Xb as X,Ya as h,Z as x,Za as r,_ as M,_a as a,aa as P,ab as F,ac as H,bb as u,ca as ue,cb as C,db as fe,eb as be,fb as he,ga as w,hb as ce,ib as D,jb as Ce,ka as ge,kb as s,lb as p,mb as g,nb as j,sa as n,tb as Y,wa as K,xb as W,yb as de,zb as c}from"./chunk-DMTVNCDT.js";function Ue(o,e){if(o&1&&(r(0,"div",16)(1,"span",17),s(2),c(3,"translate"),a(),r(4,"span",26),s(5),a()()),o&2){let i=C();n(2),g("",d(3,3,"cars.nextDue"),":"),n(2),h("ngClass",i.getDateColor(i.car.nextServiceDue)),n(),g(" ",i.formatDate(i.car.nextServiceDue)," ")}}var ne=class o{translationService=I(ee);car;customerName;carSelected=new B;scheduleService=new B;viewHistory=new B;onCardClick(){this.carSelected.emit(this.car)}onScheduleClick(e){e.stopPropagation(),this.scheduleService.emit(this.car)}onHistoryClick(e){e.stopPropagation(),this.viewHistory.emit(this.car)}getStatusBadgeClass(e){return{"up-to-date":"badge badge-up-to-date","due-soon":"badge badge-due-soon",overdue:"badge badge-overdue"}[e]||"badge badge-unknown"}getStatusLabel(e){return{"up-to-date":this.translationService.instant("cars.upToDate"),"due-soon":this.translationService.instant("cars.dueSoon"),overdue:this.translationService.instant("cars.overdue")}[e]||this.translationService.instant("cars.unknown")}getDateColor(e){if(!e)return"";let i=new Date,t=e.getTime()-i.getTime(),l=Math.ceil(t/(1e3*60*60*24));return l<0?"text-red-600 dark:text-red-400":l<=7?"text-amber-600 dark:text-amber-400":"text-green-600 dark:text-green-400"}formatMileage(e){return new Intl.NumberFormat("en-US").format(e)+" km"}formatDate(e){return e?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e):"N/A"}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=U({type:o,selectors:[["app-car-card"]],inputs:{car:"car",customerName:"customerName"},outputs:{carSelected:"carSelected",scheduleService:"scheduleService",viewHistory:"viewHistory"},decls:53,vars:31,consts:[[1,"car-card",3,"click"],[1,"car-header"],["role","img",1,"car-image"],["fill","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-400"],["d","M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.22.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"],[1,"car-info"],[1,"car-title"],[1,"car-year"],["role","status",1,"status-badge",3,"ngClass"],[1,"license-plate"],[1,"customer-section"],[1,"flex","items-center","gap-2","text-gray-600","dark:text-gray-400"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"font-medium"],[1,"service-stats"],[1,"stat-row"],[1,"stat-label"],[1,"stat-value"],[1,"card-actions"],["type","button",1,"action-btn","primary",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"action-text"],["type","button",1,"action-btn","secondary",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"stat-value",3,"ngClass"]],template:function(i,t){i&1&&(r(0,"div",0),u("click",function(){return t.onCardClick()}),r(1,"div",1)(2,"div",2),_(),r(3,"svg",3),f(4,"path",4),a()(),P(),r(5,"div",5)(6,"h3",6),s(7),a(),r(8,"p",7),s(9),a()(),r(10,"div",8),s(11),a()(),r(12,"div",9),s(13),a(),r(14,"div",10)(15,"div",11),_(),r(16,"svg",12),f(17,"path",13),a(),P(),r(18,"span",14),s(19),a()()(),r(20,"div",15)(21,"div",16)(22,"span",17),s(23),c(24,"translate"),a(),r(25,"span",18),s(26),a()(),r(27,"div",16)(28,"span",17),s(29),c(30,"translate"),a(),r(31,"span",18),s(32),a()(),r(33,"div",16)(34,"span",17),s(35),c(36,"translate"),a(),r(37,"span",18),s(38),a()(),S(39,Ue,6,5,"div",16),a(),r(40,"div",19)(41,"button",20),u("click",function(m){return t.onScheduleClick(m)}),_(),r(42,"svg",21),f(43,"path",22),a(),P(),r(44,"span",23),s(45),c(46,"translate"),a()(),r(47,"button",24),u("click",function(m){return t.onHistoryClick(m)}),_(),r(48,"svg",21),f(49,"path",25),a(),P(),r(50,"span",23),s(51),c(52,"translate"),a()()()()),i&2&&(n(2),b("aria-label","Vehicle image for "+t.car.make+" "+t.car.model),n(),b("alt",t.car.make+" "+t.car.model+" vehicle icon"),n(4),j("",t.car.make," ",t.car.model),n(2),p(t.car.year),n(),h("ngClass",t.getStatusBadgeClass(t.car.serviceStatus)),b("aria-label","Service status: "+t.getStatusLabel(t.car.serviceStatus)),n(),g(" ",t.getStatusLabel(t.car.serviceStatus)," "),n(2),g(" ",t.car.licensePlate," "),n(6),p(t.customerName),n(4),g("",d(24,21,"cars.mileage"),":"),n(3),p(t.formatMileage(t.car.currentMileage)),n(3),g("",d(30,23,"cars.totalServices"),":"),n(3),p(t.car.totalServices),n(3),g("",d(36,25,"cars.lastService"),":"),n(3),p(t.formatDate(t.car.lastServiceDate)),n(),O(t.car.nextServiceDue?39:-1),n(2),b("aria-label","Schedule service for "+t.car.make+" "+t.car.model),n(4),p(d(46,27,"cars.schedule")),n(2),b("aria-label","View service history for "+t.car.make+" "+t.car.model),n(4),p(d(52,29,"cars.history")))},dependencies:[H,Q,z],styles:['.car-card[_ngcontent-%COMP%]{background:#111827f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(75,85,99,.6);border-radius:20px;padding:1.5rem;box-shadow:0 8px 32px #000000b3;transition:all .3s cubic-bezier(.4,0,.2,1);cursor:pointer;margin-bottom:1rem}.car-card[_ngcontent-%COMP%]:hover{background:#1f2937fa;box-shadow:0 12px 40px #000c;border-color:#3b82f6b3;transform:translateY(-2px)}.car-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;margin-bottom:1rem}.car-image[_ngcontent-%COMP%]{flex-shrink:0;width:3rem;height:3rem;background:linear-gradient(135deg,#3b82f626,#1d4ed81a);border-radius:12px;display:flex;align-items:center;justify-content:center;border:1px solid rgba(59,130,246,.2);transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.car-image[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent 30%,rgba(255,255,255,.1) 50%,transparent 70%);transform:translate(-100%) translateY(-100%);transition:transform .6s ease}.car-card[_ngcontent-%COMP%]:hover   .car-image[_ngcontent-%COMP%]:before{transform:translate(0) translateY(0)}.car-image[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;color:#3b82f6;transition:all .3s ease;z-index:1}.car-card[_ngcontent-%COMP%]:hover   .car-image[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f640,#1d4ed826);border-color:#3b82f666;box-shadow:0 4px 12px #3b82f633}.car-card[_ngcontent-%COMP%]:hover   .car-image[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#60a5fa;transform:scale(1.1)}.car-info[_ngcontent-%COMP%]{flex:1;min-width:0}.car-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#fff;margin:0;line-height:1.2}.car-year[_ngcontent-%COMP%]{font-size:.875rem;color:#9ca3af;margin:0}.status-badge[_ngcontent-%COMP%]{padding:.375rem .875rem;border-radius:16px;font-size:.75rem;font-weight:700;border:2px solid;text-transform:uppercase;letter-spacing:.025em;display:flex;align-items:center;gap:.375rem;transition:all .3s cubic-bezier(.4,0,.2,1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);position:relative;overflow:hidden}.status-badge[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s ease}.car-card[_ngcontent-%COMP%]:hover   .status-badge[_ngcontent-%COMP%]:before{left:100%}.status-badge[_ngcontent-%COMP%]:after{content:"";width:6px;height:6px;border-radius:50%;background:currentColor;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.2)}}.license-plate[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1f2937,#374151);color:#fff;padding:.75rem;border-radius:8px;text-align:center;font-family:Courier New,monospace;font-size:1.125rem;font-weight:700;letter-spacing:2px;margin-bottom:1rem;border:2px solid #4b5563}.customer-section[_ngcontent-%COMP%]{margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid rgba(255,255,255,.1)}.customer-section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.service-stats[_ngcontent-%COMP%]{margin-bottom:1rem}.stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;font-size:.875rem}.stat-label[_ngcontent-%COMP%]{color:#9ca3af}.stat-value[_ngcontent-%COMP%]{font-weight:600;color:#fff}.card-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.action-btn[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:.5rem;min-height:44px;padding:.75rem 1rem;border-radius:12px;font-size:.875rem;font-weight:600;transition:all .3s cubic-bezier(.4,0,.2,1);border:1px solid;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);cursor:pointer;position:relative;outline:none}.action-btn[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}@media (prefers-contrast: high){.action-btn[_ngcontent-%COMP%]{border-width:2px;box-shadow:0 0 0 1px currentColor}.status-badge[_ngcontent-%COMP%]{border-width:2px;font-weight:700}}.action-text[_ngcontent-%COMP%]{transition:opacity .2s ease}@media (max-width: 375px){.action-text[_ngcontent-%COMP%]{display:none}.action-btn[_ngcontent-%COMP%]{min-width:44px;padding:.75rem}}@media (min-width: 376px){.action-text[_ngcontent-%COMP%]{display:inline}}.action-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#059669,#047857);border-color:#059669;color:#fff;box-shadow:0 4px 15px #0596694d}.action-btn.primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#047857,#065f46);box-shadow:0 6px 20px #05966966;transform:translateY(-1px)}.action-btn.secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);border-color:#f59e0b;color:#fff;box-shadow:0 4px 15px #f59e0b4d}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#d97706,#b45309);box-shadow:0 6px 20px #f59e0b66;transform:translateY(-1px)}@media (max-width: 375px){.car-image[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}.car-image[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem}.status-badge[_ngcontent-%COMP%]{font-size:.625rem;padding:.25rem .625rem}.status-badge[_ngcontent-%COMP%]:after{width:4px;height:4px}}@media (min-width: 768px){.car-image[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem}.car-image[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.75rem;height:1.75rem}.status-badge[_ngcontent-%COMP%]{font-size:.8125rem;padding:.5rem 1rem}}@media (min-width: 1280px){.car-image[_ngcontent-%COMP%]{width:4rem;height:4rem}.car-image[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:2rem;height:2rem}}[dir="rtl"][_nghost-%COMP%]   .car-header[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .car-header[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir="rtl"][_nghost-%COMP%]   .customer-section[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .customer-section[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir="rtl"][_nghost-%COMP%]   .stat-row[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .stat-row[_ngcontent-%COMP%]{flex-direction:row-reverse;text-align:right}[dir="rtl"][_nghost-%COMP%]   .card-actions[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .card-actions[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir="rtl"][_nghost-%COMP%]   .action-btn[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir="rtl"][_nghost-%COMP%]   .car-title[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .car-title[_ngcontent-%COMP%], [dir="rtl"][_nghost-%COMP%]   .car-year[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .car-year[_ngcontent-%COMP%], [dir="rtl"][_nghost-%COMP%]   .stat-label[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .stat-label[_ngcontent-%COMP%], [dir="rtl"][_nghost-%COMP%]   .stat-value[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .stat-value[_ngcontent-%COMP%], [dir="rtl"][_nghost-%COMP%]   .legend-text[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .legend-text[_ngcontent-%COMP%]{text-align:right}']})};var ze=(o,e)=>e.id;function je(o,e){if(o&1&&(r(0,"option",35),s(1),a()),o&2){let i=e.$implicit;h("value",i.id),n(),j("",i.name," - ",i.phone)}}function $e(o,e){if(o&1&&(r(0,"div",24)(1,"label",20),s(2),c(3,"translate"),a(),r(4,"select",33)(5,"option",34),s(6),a(),V(7,je,2,3,"option",35,ze),a()()),o&2){let i=C(2);n(2),p(d(3,2,"cars.selectCustomerRequired")),n(4),p(i.chooseCustomerLabel()),n(),A(i.customers())}}function qe(o,e){o&1&&(r(0,"div",18)(1,"div",19)(2,"label",20),s(3),c(4,"translate"),a(),f(5,"input",36),a(),r(6,"div",19)(7,"label",20),s(8),c(9,"translate"),a(),f(10,"input",37),a()(),r(11,"div",24)(12,"label",20),s(13),c(14,"translate"),a(),f(15,"input",38),a()),o&2&&(n(3),g("",d(4,3,"cars.customerName")," *"),n(5),g("",d(9,5,"cars.phoneNumber")," *"),n(5),g("",d(14,7,"cars.email")," (Optional)"))}function Ge(o,e){if(o&1&&(r(0,"form",9)(1,"div",16)(2,"h3",17),s(3),c(4,"translate"),a(),r(5,"div",18)(6,"div",19)(7,"label",20),s(8),c(9,"translate"),a(),f(10,"input",21),c(11,"translate"),a()(),r(12,"div",18)(13,"div",19)(14,"label",20),s(15),c(16,"translate"),a(),f(17,"input",22),c(18,"translate"),a(),r(19,"div",19)(20,"label",20),s(21),c(22,"translate"),a(),f(23,"input",23),c(24,"translate"),a()(),r(25,"div",18)(26,"div",24)(27,"label",20),s(28),c(29,"translate"),a(),f(30,"input",25),a(),r(31,"div",24)(32,"label",20),s(33),a(),f(34,"input",26),a()()(),r(35,"div",16)(36,"h3",17),s(37),c(38,"translate"),a(),r(39,"div",27)(40,"div",28)(41,"label",29),f(42,"input",30),r(43,"span",31),s(44),c(45,"translate"),a()(),r(46,"label",29),f(47,"input",32),r(48,"span",31),s(49),c(50,"translate"),a()()()(),S(51,$e,9,4,"div",24),S(52,qe,16,9),a()()),o&2){let i=C();h("formGroup",i.carForm),n(3),p(d(4,20,"cars.vehicleInformation")),n(5),p(d(9,22,"cars.licensePlateRequired")),n(2),h("placeholder",Y(d(11,24,"cars.licensePlatePlaceholder"))),n(5),p(d(16,26,"cars.makeRequired")),n(2),h("placeholder",Y(d(18,28,"cars.makePlaceholder"))),n(4),p(d(22,30,"cars.modelRequired")),n(2),h("placeholder",Y(d(24,32,"cars.modelPlaceholder"))),n(5),p(d(29,34,"cars.yearRequired")),n(2),h("min",1990)("max",i.currentYear+1),n(3),p(i.currentMileageLabel()),n(4),p(d(38,36,"cars.customerInformation")),n(7),p(d(45,38,"cars.existingCustomer")),n(5),p(d(50,40,"cars.newCustomer")),n(2),O((i.customerType==null?null:i.customerType.value)==="existing"?51:-1),n(),O((i.customerType==null?null:i.customerType.value)==="new"?52:-1)}}function Ke(o,e){o&1&&(r(0,"div",10)(1,"div",39),f(2,"div",40),r(3,"p",41),s(4,"Loading..."),a()()())}function Ye(o,e){o&1&&(r(0,"span"),s(1),c(2,"translate"),a()),o&2&&(n(),p(d(2,1,"cars.registerCar")))}function We(o,e){o&1&&(r(0,"span",42),f(1,"div",43),s(2),c(3,"translate"),a()),o&2&&(n(2),g(" ",d(3,1,"cars.registering")," "))}var ae=class o{formBuilder=I(Fe);carService=I(ie);translationService=I(ee);cdr=I(ve);close=new B;carRegistered=new B;customers=w([]);isSubmitting=w(!1);currentYear=new Date().getFullYear();currentMileageLabel=w("");chooseCustomerLabel=w("");addVehicleToGarageLabel=w("");translationsReady=w(!1);translationSubscription;carForm;constructor(){this.carForm=this.formBuilder.group({licensePlate:["",[T.required,T.minLength(3)]],make:["",[T.required]],model:["",[T.required]],year:[this.currentYear,[T.required,T.min(1990),T.max(this.currentYear+1)]],currentMileage:[0,[T.required,T.min(0)]],customerType:["existing",[T.required]],customerId:[""],customerName:[""],customerPhone:["",[T.pattern(/^\+?[0-9\-\s\(\)]+$/)]],customerEmail:["",[T.email]]}),this.loadCustomers(),this.setupValidationRules()}ngOnInit(){this.initializeTranslations()}ngOnDestroy(){this.translationSubscription&&this.translationSubscription.unsubscribe()}initializeTranslations(){let e=this.translationService.getCurrentTranslations();if(this.hasRequiredTranslations(e)){this.updateTranslationSignals(),this.translationsReady.set(!0);return}this.setFallbackTranslations(),this.translationsReady.set(!0),(!e||Object.keys(e).length===0)&&this.translationService.forceReloadTranslations(),this.translationSubscription=this.translationService.translations$.subscribe(i=>{this.hasRequiredTranslations(i)&&this.updateTranslationSignals()})}hasRequiredTranslations(e){return!e||typeof e!="object"?!1:e.cars&&typeof e.cars=="object"&&e.cars.currentMileageRequired&&e.cars.chooseCustomer&&e.cars.addVehicleToGarage}updateTranslationSignals(){let e=this.translationService.instant("cars.currentMileageRequired"),i=this.translationService.instant("cars.chooseCustomer"),t=this.translationService.instant("cars.addVehicleToGarage");e!=="cars.currentMileageRequired"&&this.currentMileageLabel.set(e),i!=="cars.chooseCustomer"&&this.chooseCustomerLabel.set(i),t!=="cars.addVehicleToGarage"&&this.addVehicleToGarageLabel.set(t)}setFallbackTranslations(){this.currentMileageLabel.set("Current Mileage Required *"),this.chooseCustomerLabel.set("Choose Customer"),this.addVehicleToGarageLabel.set("Add Vehicle to Garage and Create Customer Profile")}get licensePlate(){return this.carForm.get("licensePlate")}get make(){return this.carForm.get("make")}get model(){return this.carForm.get("model")}get year(){return this.carForm.get("year")}get currentMileage(){return this.carForm.get("currentMileage")}get customerType(){return this.carForm.get("customerType")}get customerId(){return this.carForm.get("customerId")}get customerName(){return this.carForm.get("customerName")}get customerPhone(){return this.carForm.get("customerPhone")}get customerEmail(){return this.carForm.get("customerEmail")}setupValidationRules(){this.customerType?.valueChanges.subscribe(e=>{e==="existing"?(this.customerId?.setValidators([T.required]),this.customerName?.clearValidators(),this.customerPhone?.clearValidators()):(this.customerId?.clearValidators(),this.customerName?.setValidators([T.required]),this.customerPhone?.setValidators([T.required,T.pattern(/^\+?[0-9\-\s\(\)]+$/)])),this.customerId?.updateValueAndValidity(),this.customerName?.updateValueAndValidity(),this.customerPhone?.updateValueAndValidity()})}loadCustomers(){let e=[{id:"customer1",name:"Ahmed Ben Ali",phone:"+216-20-123-456",email:"ahmed.benali@email.tn",registrationDate:new Date,totalCars:2,totalAppointments:5,totalInvoices:3,totalSpent:1200,averageSpending:400,status:"active",preferredContactMethod:"phone",loyaltyPoints:50,createdAt:new Date,updatedAt:new Date},{id:"customer2",name:"Fatma Trabelsi",phone:"+216-25-789-123",email:"fatma.trabelsi@email.tn",registrationDate:new Date,totalCars:1,totalAppointments:3,totalInvoices:2,totalSpent:800,averageSpending:400,status:"active",preferredContactMethod:"email",loyaltyPoints:30,createdAt:new Date,updatedAt:new Date},{id:"customer3",name:"Mohamed Khemir",phone:"+216-22-456-789",email:"mohamed.khemir@email.tn",registrationDate:new Date,totalCars:1,totalAppointments:2,totalInvoices:1,totalSpent:500,averageSpending:500,status:"vip",preferredContactMethod:"phone",loyaltyPoints:75,createdAt:new Date,updatedAt:new Date},{id:"customer4",name:"Leila Mansouri",phone:"+216-28-654-321",email:"leila.mansouri@email.tn",registrationDate:new Date,totalCars:3,totalAppointments:8,totalInvoices:6,totalSpent:2100,averageSpending:350,status:"vip",preferredContactMethod:"whatsapp",loyaltyPoints:120,createdAt:new Date,updatedAt:new Date}];this.customers.set(e)}onSubmit(){if(this.carForm.valid){this.isSubmitting.set(!0);let e=this.carForm.value,i=e.customerId;e.customerType==="new"&&(i="customer_"+Date.now());let t={licensePlate:e.licensePlate,make:e.make,model:e.model,year:e.year,customerId:i,currentMileage:e.currentMileage,totalServices:0,serviceStatus:"up-to-date"};this.carService.createCar(t).subscribe({next:l=>{this.isSubmitting.set(!1),this.carRegistered.emit(l),this.onClose()},error:l=>{console.error("Failed to register car:",l),this.isSubmitting.set(!1),l.error==="CAR_LIMIT_EXCEEDED"?alert(`Vehicle limit reached: ${l.message}`):alert("Failed to register vehicle. Please try again.")}})}}onClose(){this.close.emit()}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=U({type:o,selectors:[["app-car-registration-form"]],outputs:{close:"close",carRegistered:"carRegistered"},decls:22,vars:13,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-title-section"],[1,"modal-title"],[1,"modal-subtitle"],[1,"modal-close-btn",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"modal-form",3,"formGroup"],[1,"modal-form"],[1,"modal-footer"],["type","button",1,"modal-btn","secondary",3,"click"],["type","button",1,"modal-btn","primary",3,"click","disabled"],[4,"ngIf"],["class","flex items-center gap-2",4,"ngIf"],[1,"form-section"],[1,"section-title"],[1,"form-row"],[1,"form-group","flex-1"],[1,"form-label"],["type","text","formControlName","licensePlate",1,"form-input",3,"placeholder"],["type","text","formControlName","make",1,"form-input",3,"placeholder"],["type","text","formControlName","model",1,"form-input",3,"placeholder"],[1,"form-group"],["type","number","formControlName","year","placeholder","e.g., 2025",1,"form-input",3,"min","max"],["type","number","formControlName","currentMileage","placeholder","e.g., 45000","min","0",1,"form-input"],[1,"customer-toggle"],[1,"toggle-group"],[1,"toggle-option"],["type","radio","value","existing","formControlName","customerType",1,"toggle-input"],[1,"toggle-label"],["type","radio","value","new","formControlName","customerType",1,"toggle-input"],["formControlName","customerId",1,"form-select"],["value",""],[3,"value"],["type","text","formControlName","customerName","placeholder","e.g., Ahmed Ben Ali",1,"form-input"],["type","tel","formControlName","customerPhone","placeholder","e.g., +216-20-123-456",1,"form-input"],["type","email","formControlName","customerEmail","placeholder","e.g., ahmed.benali@email.tn",1,"form-input"],[1,"loading-container"],[1,"loading-spinner"],[1,"loading-text"],[1,"flex","items-center","gap-2"],[1,"submit-spinner"]],template:function(i,t){i&1&&(r(0,"div",0),u("click",function(){return t.onClose()}),r(1,"div",1),u("click",function(m){return m.stopPropagation()}),r(2,"header",2)(3,"div",3)(4,"h2",4),s(5),c(6,"translate"),a(),r(7,"p",5),s(8),c(9,"translate"),a()(),r(10,"button",6),u("click",function(){return t.onClose()}),_(),r(11,"svg",7),f(12,"path",8),a()()(),S(13,Ge,53,42,"form",9)(14,Ke,5,0,"div",10),P(),r(15,"footer",11)(16,"button",12),u("click",function(){return t.onClose()}),s(17),c(18,"translate"),a(),r(19,"button",13),u("click",function(){return t.onSubmit()}),q(20,Ye,3,3,"span",14)(21,We,4,3,"span",15),a()()()()),i&2&&(n(5),p(d(6,7,"cars.registerNewCar")),n(3),p(t.addVehicleToGarageLabel()||d(9,9,"cars.addVehicleToGarage")),n(5),O(t.translationsReady()?13:14),n(4),g(" ",d(18,11,"common.cancel")," "),n(2),h("disabled",!t.carForm.valid||t.isSubmitting()),n(),h("ngIf",!t.isSubmitting()),n(),h("ngIf",t.isSubmitting()))},dependencies:[H,X,Ve,ye,J,Z,Me,Pe,Ee,Se,we,ke,Le,Ie,Oe,Te,z],styles:[`.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:50;display:flex;align-items:center;justify-content:center;padding:1rem;animation:_ngcontent-%COMP%_overlayFadeIn .2s ease-out}@keyframes _ngcontent-%COMP%_overlayFadeIn{0%{opacity:0;-webkit-backdrop-filter:blur(0px);backdrop-filter:blur(0px)}to{opacity:1;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}}.modal-content[_ngcontent-%COMP%]{background:#111827f2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1);border-radius:24px;width:100%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 25px 80px #0009;animation:_ngcontent-%COMP%_modalSlideIn .3s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:2rem 2rem 1rem;border-bottom:1px solid rgba(255,255,255,.1)}.modal-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;margin:0 0 .25rem}.modal-subtitle[_ngcontent-%COMP%]{color:#d1d5db;font-size:.875rem;margin:0}.modal-close-btn[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border:none;background:#ffffff1a;border-radius:12px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#d1d5db;transition:all .3s cubic-bezier(.4,0,.2,1)}.modal-close-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.05);color:#fff}.modal-form[_ngcontent-%COMP%]{padding:2rem}.form-section[_ngcontent-%COMP%]{margin-bottom:2rem}.section-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#fff;margin:0 0 1rem;display:flex;align-items:center;gap:.5rem}.section-title[_ngcontent-%COMP%]:before{content:"";width:4px;height:1.5rem;background:linear-gradient(135deg,#3b82f6,#1d4ed8);border-radius:2px}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:flex-end}@media (max-width: 767px){.form-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#d1d5db}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{padding:.875rem 1rem;border:1px solid rgba(255,255,255,.2);border-radius:12px;background:#ffffff0d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);color:#fff;font-size:.875rem;transition:all .3s cubic-bezier(.4,0,.2,1)}.form-input[_ngcontent-%COMP%]::placeholder, .form-textarea[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#ffffff1a;box-shadow:0 0 0 3px #3b82f633;transform:translateY(-1px)}.form-input[_ngcontent-%COMP%]:hover:not(:focus), .form-select[_ngcontent-%COMP%]:hover:not(:focus), .form-textarea[_ngcontent-%COMP%]:hover:not(:focus){border-color:#ffffff4d;background-color:#ffffff14}.form-select[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right .75rem center;background-repeat:no-repeat;background-size:1.5em 1.5em;padding-right:2.5rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.customer-toggle[_ngcontent-%COMP%]{margin-bottom:1.5rem}.toggle-group[_ngcontent-%COMP%]{display:flex;background:#37415180;border-radius:12px;padding:.25rem;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.toggle-option[_ngcontent-%COMP%]{flex:1;display:block;cursor:pointer}.toggle-input[_ngcontent-%COMP%]{display:none}.toggle-label[_ngcontent-%COMP%]{display:block;padding:.75rem 1rem;text-align:center;border-radius:8px;font-weight:500;color:#9ca3af;transition:all .2s ease}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6cc,#2563ebcc);color:#fff;box-shadow:0 4px 12px #3b82f64d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.modal-footer[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1.5rem 2rem 2rem;border-top:1px solid rgba(255,255,255,.1)}@media (max-width: 767px){.modal-footer[_ngcontent-%COMP%]{flex-direction:column}}.modal-btn[_ngcontent-%COMP%]{flex:1;padding:1rem 1.5rem;border-radius:12px;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;justify-content:center;gap:.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.modal-btn.secondary[_ngcontent-%COMP%]{background:#ffffff1a;border:1px solid rgba(255,255,255,.2);color:#d1d5db}.modal-btn.secondary[_ngcontent-%COMP%]:hover{background:#ffffff26;border-color:#ffffff4d;transform:translateY(-1px);box-shadow:0 4px 12px #0000004d}.modal-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#059669,#047857);border:1px solid #059669;color:#fff;box-shadow:0 4px 15px #0596694d}.modal-btn.primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#047857,#065f46);transform:translateY(-1px);box-shadow:0 6px 20px #05966966}.modal-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none!important}.submit-spinner[_ngcontent-%COMP%]{width:1rem;height:1rem;border:2px solid rgba(255,255,255,.3);border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:3px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 2rem;min-height:200px}.loading-spinner[_ngcontent-%COMP%]{width:2rem;height:2rem;border:3px solid rgba(255,255,255,.2);border-top:3px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}.loading-text[_ngcontent-%COMP%]{color:#d1d5db;font-size:.875rem;margin:0}`]})};var oe=class o{document=I(ue);announce(e,i="polite"){let t=this.getOrCreateAnnouncer(i);t.textContent=e,setTimeout(()=>{t.textContent=""},1e3)}announceFeatureLock(e,i){let t=i?`${e} feature is locked. ${i} tier required to unlock.`:`${e} feature is locked. Upgrade required to unlock.`;this.announce(t,"assertive")}announceUpgrade(e,i){let t=i?`Successfully upgraded to ${e} tier. New features are now available.`:`Failed to upgrade to ${e} tier. Please try again.`;this.announce(t,"assertive")}setFocus(e,i){if(!e)return!1;try{return e.focus(i),this.document.activeElement===e}catch(t){return console.warn("Failed to set focus:",t),!1}}setFocusToFirst(e){let i=this.getFirstFocusableElement(e);return this.setFocus(i)}setFocusToLast(e){let i=this.getFocusableElements(e);if(i.length===0)return!1;let t=i[i.length-1];return this.setFocus(t)}getFocusableElements(e){let i=["button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","a[href]",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]'].join(", ");return Array.from(e.querySelectorAll(i)).filter(l=>this.isElementVisible(l)&&!this.isElementDisabled(l))}getFirstFocusableElement(e){let i=this.getFocusableElements(e);return i.length>0?i[0]:null}createFocusTrap(e){let i=this.getFocusableElements(e);if(i.length===0)return()=>{};let t=i[0],l=i[i.length-1],m=y=>{y.key==="Tab"&&(y.shiftKey?this.document.activeElement===t&&(y.preventDefault(),this.setFocus(l)):this.document.activeElement===l&&(y.preventDefault(),this.setFocus(t)))};return e.addEventListener("keydown",m),this.setFocus(t),()=>{e.removeEventListener("keydown",m)}}handleEscapeKey(e){let i=t=>{t.key==="Escape"&&(t.preventDefault(),e())};return this.document.addEventListener("keydown",i),()=>{this.document.removeEventListener("keydown",i)}}addArrowKeyNavigation(e,i,t={}){let{wrap:l=!0,orientation:m="vertical",onActivate:y}=t,$=k=>{let v=Array.from(e.querySelectorAll(i));if(v.length===0)return;let L=v.findIndex(Re=>Re===this.document.activeElement);if(L===-1)return;let N=L,R=!1;switch(k.key){case"ArrowDown":(m==="vertical"||m==="both")&&(N=l?(L+1)%v.length:Math.min(L+1,v.length-1),R=!0);break;case"ArrowUp":(m==="vertical"||m==="both")&&(N=l?(L-1+v.length)%v.length:Math.max(L-1,0),R=!0);break;case"ArrowRight":(m==="horizontal"||m==="both")&&(N=l?(L+1)%v.length:Math.min(L+1,v.length-1),R=!0);break;case"ArrowLeft":(m==="horizontal"||m==="both")&&(N=l?(L-1+v.length)%v.length:Math.max(L-1,0),R=!0);break;case"Home":N=0,R=!0;break;case"End":N=v.length-1,R=!0;break;case"Enter":case" ":y&&(y(v[L],L),R=!0);break}R&&(k.preventDefault(),N!==L&&this.setFocus(v[N]))};return e.addEventListener("keydown",$),()=>{e.removeEventListener("keydown",$)}}isElementVisible(e){let i=getComputedStyle(e);return i.display!=="none"&&i.visibility!=="hidden"&&i.opacity!=="0"}isElementDisabled(e){return e.hasAttribute("disabled")||e.getAttribute("aria-disabled")==="true"}getOrCreateAnnouncer(e){let i=`aria-announcer-${e}`,t=this.document.getElementById(i);return t||(t=this.document.createElement("div"),t.id=i,t.setAttribute("aria-live",e),t.setAttribute("aria-atomic","true"),t.style.position="absolute",t.style.left="-10000px",t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",this.document.body.appendChild(t)),t}prefersReducedMotion(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}isHighContrastMode(){return window.matchMedia("(prefers-contrast: high)").matches}addSkipLink(e,i="Skip to main content"){if(this.document.querySelector(".skip-link"))return;let l=this.document.createElement("a");l.href=`#${e}`,l.textContent=i,l.className="skip-link",l.style.cssText=`
      position: absolute;
      top: -40px;
      left: 6px;
      background: #000;
      color: #fff;
      padding: 8px;
      z-index: 1000;
      text-decoration: none;
      transition: top 0.2s;
    `,l.addEventListener("focus",()=>{l.style.top="6px"}),l.addEventListener("blur",()=>{l.style.top="-40px"}),this.document.body.insertBefore(l,this.document.body.firstChild)}static \u0275fac=function(i){return new(i||o)};static \u0275prov=me({token:o,factory:o.\u0275fac,providedIn:"root"})};var Xe=["modalContent"],Je=o=>({tier:o}),Ze=(o,e)=>e.id,et=(o,e)=>e.key;function tt(o,e){o&1&&(r(0,"div",18),s(1),c(2,"translate"),a()),o&2&&(n(),g(" ",d(2,1,"tiers.popular")," "))}function it(o,e){o&1&&(r(0,"div",19),s(1),c(2,"translate"),a()),o&2&&(n(),g(" ",d(2,1,"tiers.current")," "))}function nt(o,e){o&1&&(_(),r(0,"svg",31),f(1,"path",33),a())}function rt(o,e){o&1&&(_(),r(0,"svg",31),f(1,"path",34),a())}function at(o,e){if(o&1&&(r(0,"div",29)(1,"div",30),S(2,nt,2,0,":svg:svg",31)(3,rt,2,0,":svg:svg",31),a(),r(4,"span",32),s(5),c(6,"translate"),a()()),o&2){let i=e.$implicit;D("enabled",i.enabled)("disabled",!i.enabled),n(2),O(i.enabled?2:3),n(3),g(" ",d(6,6,"features."+i.key)," ")}}function ot(o,e){if(o&1&&(r(0,"div",26),V(1,at,7,8,"div",28,et),a()),o&2){let i=C().$implicit,t=C(2);n(),A(t.getVisibleFeatures(i))}}function lt(o,e){if(o&1){let i=F();r(0,"div",17),S(1,tt,3,3,"div",18),S(2,it,3,3,"div",19),r(3,"div",20)(4,"h5",21),s(5),a(),r(6,"div",22)(7,"span",23),s(8),a(),r(9,"span",24),s(10),a(),r(11,"span",25),s(12),c(13,"translate"),a()()(),S(14,ot,3,0,"div",26),r(15,"button",27),u("click",function(){let l=x(i).$implicit,m=C(2);return M(m.onUpgrade(l.id))}),s(16),c(17,"translate"),a()()}if(o&2){let i,t,l,m,y,$,k=e.$implicit,v=C(2);D("current",k.id===((i=v.tierComparison())==null?null:i.currentTierId))("recommended",k.id===((t=v.tierComparison())==null?null:t.recommendedTierId))("popular",k.popular),n(),O(k.popular?1:-1),n(),O(k.id===((l=v.tierComparison())==null?null:l.currentTierId)?2:-1),n(3),p(k.name),n(3),p(k.price),n(2),p(k.currency),n(2),g("/",d(13,22,"tiers.month")),n(2),O(v.config.showFeatureList?14:-1),n(),D("btn-primary",v.canUpgradeTo(k.id))("btn-secondary",k.id===((m=v.tierComparison())==null?null:m.currentTierId))("btn-tertiary",!v.canUpgradeTo(k.id)&&k.id!==((y=v.tierComparison())==null?null:y.currentTierId)),h("disabled",!v.canUpgradeTo(k.id)&&k.id!==(($=v.tierComparison())==null?null:$.currentTierId)),b("aria-label",v.getTierCtaAriaLabel(k)),n(),g(" ",d(17,24,v.getTierCtaText(k.id))," ")}}function st(o,e){if(o&1&&(r(0,"div",10)(1,"h4",14),s(2),c(3,"translate"),a(),r(4,"div",15),V(5,lt,18,26,"div",16,Ze),a()()),o&2){let i,t=C();n(2),g(" ",d(3,1,"tiers.choosePlan")," "),n(3),A((i=t.tierComparison())==null?null:i.tiers)}}function ct(o,e){if(o&1){let i=F();r(0,"div",11)(1,"div",35)(2,"h4",21),s(3),a(),r(4,"div",36)(5,"p"),s(6),c(7,"translate"),a()()(),r(8,"button",37),u("click",function(){x(i);let l=C();return M(l.onUpgrade(l.targetTier()))}),s(9),c(10,"translate"),a()()}if(o&2){let i=C();n(3),p(i.getTargetTierName()),n(3),p(G(7,4,"tiers.upgradeMessage",W(9,Je,i.getTargetTierName()))),n(2),b("aria-label",i.getSingleUpgradeAriaLabel()),n(),g(" ",d(10,7,i.config.ctaText||"tiers.upgradeNow")," ")}}var le=class o{constructor(e,i,t){this.subscriptionService=e;this.accessibilityService=i;this.elementRef=t}modalContent;config={showComparison:!0,showFeatureList:!0};isVisible=!1;upgrade=new B;close=new B;tierComparison=w(null);loading=w(!1);targetTier=E(()=>this.config.targetTier);focusTrapCleanup;escapeKeyHandler;previousActiveElement;ngOnInit(){this.config.showComparison&&this.loadTierComparison(),this.previousActiveElement=document.activeElement,this.escapeKeyHandler=this.accessibilityService.handleEscapeKey(()=>{this.onClose()}),this.accessibilityService.announce("Upgrade options dialog opened","assertive")}ngAfterViewInit(){this.modalContent&&(this.focusTrapCleanup=this.accessibilityService.createFocusTrap(this.modalContent.nativeElement))}ngOnDestroy(){this.focusTrapCleanup&&this.focusTrapCleanup(),this.escapeKeyHandler&&this.escapeKeyHandler(),this.previousActiveElement&&this.accessibilityService.setFocus(this.previousActiveElement)}loadTierComparison(){this.loading.set(!0),this.subscriptionService.getTierComparison().subscribe({next:e=>{this.tierComparison.set(e),this.loading.set(!1)},error:()=>{this.loading.set(!1)}})}getModalTitle(){return this.config.title?this.config.title:this.config.feature?"tiers.unlockFeature":"tiers.upgradeTitle"}getModalDescription(){return this.config.description?this.config.description:this.config.feature?"tiers.upgradeForFeatureMessage":"tiers.upgradeMessage"}getModalAriaLabel(){return`Upgrade prompt modal: ${this.getModalTitle()}`}getTargetTierName(){let e=this.targetTier();return e?this.tierComparison()?.tiers.find(l=>l.id===e)?.name||e:""}getVisibleFeatures(e){return e.features.slice(0,6)}canUpgradeTo(e){let i=this.tierComparison();if(!i)return!1;let t=["solo","starter","professional"],l=t.indexOf(i.currentTierId);return t.indexOf(e)>l}getTierCtaText(e){let i=this.tierComparison();return e===i?.currentTierId?"tiers.currentPlan":this.canUpgradeTo(e)?"tiers.upgrade":"tiers.downgrade"}getTierCtaAriaLabel(e){return`${this.getTierCtaText(e.id)} to ${e.name} plan`}getSingleUpgradeAriaLabel(){return`Upgrade to ${this.getTargetTierName()} plan`}onUpgrade(e){let i=this.tierComparison()?.tiers.find(t=>t.id===e)?.name||e;this.accessibilityService.announce(`Initiating upgrade to ${i} tier`,"assertive"),this.upgrade.emit({tier:e,feature:this.config.feature})}onClose(){this.accessibilityService.announce("Upgrade dialog closed","polite"),this.close.emit()}onKeyDown(e){if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)){let i=this.elementRef.nativeElement.querySelectorAll(".tier-cta-button"),t=Array.from(i).findIndex(l=>l===document.activeElement);if(t!==-1){e.preventDefault();let l=t;switch(e.key){case"ArrowRight":case"ArrowDown":l=(t+1)%i.length;break;case"ArrowLeft":case"ArrowUp":l=(t-1+i.length)%i.length;break}this.accessibilityService.setFocus(i[l])}}}onOverlayClick(e){e.target===e.currentTarget&&this.onClose()}static \u0275fac=function(i){return new(i||o)(K(te),K(oe),K(ge))};static \u0275cmp=U({type:o,selectors:[["app-upgrade-prompt"]],viewQuery:function(i,t){if(i&1&&fe(Xe,5),i&2){let l;be(l=he())&&(t.modalContent=l.first)}},hostBindings:function(i,t){i&1&&u("keydown",function(m){return t.onKeyDown(m)})},inputs:{config:"config",isVisible:"isVisible"},outputs:{upgrade:"upgrade",close:"close"},decls:21,vars:14,consts:[["modalContent",""],["role","dialog","aria-modal","true",1,"upgrade-modal-overlay",3,"click"],["tabindex","0",1,"upgrade-modal","glass-card",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-button",3,"click"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M18 6L6 18M6 6L18 18","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"modal-body"],[1,"upgrade-description"],[1,"tier-comparison"],[1,"single-tier-upgrade"],[1,"modal-footer"],["type","button",1,"btn-secondary",3,"click"],[1,"comparison-title"],[1,"tier-cards"],[1,"tier-card",3,"current","recommended","popular"],[1,"tier-card"],[1,"popular-badge","badge","badge-upgrade"],[1,"current-badge","badge","badge-tier-starter"],[1,"tier-header"],[1,"tier-name"],[1,"tier-price"],[1,"price"],[1,"currency"],[1,"period"],[1,"tier-features"],["type","button",1,"tier-cta-button",3,"click","disabled"],[1,"feature-item",3,"enabled","disabled"],[1,"feature-item"],[1,"feature-icon"],["viewBox","0 0 20 20","fill","currentColor"],[1,"feature-text"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"tier-highlight"],[1,"tier-benefits"],["type","button",1,"upgrade-cta-button","btn-primary",3,"click"]],template:function(i,t){if(i&1){let l=F();r(0,"div",1),u("click",function(y){return x(l),M(t.onOverlayClick(y))}),r(1,"div",2,0),u("click",function(y){return x(l),M(y.stopPropagation())}),r(3,"div",3)(4,"h3",4),s(5),c(6,"translate"),a(),r(7,"button",5),c(8,"translate"),u("click",function(){return x(l),M(t.onClose())}),_(),r(9,"svg",6),f(10,"path",7),a()()(),P(),r(11,"div",8)(12,"div",9),s(13),c(14,"translate"),a(),S(15,st,7,3,"div",10)(16,ct,11,11,"div",11),a(),r(17,"div",12)(18,"button",13),u("click",function(){return x(l),M(t.onClose())}),s(19),c(20,"translate"),a()()()()}i&2&&(b("aria-label",t.getModalAriaLabel()),n(5),g(" ",d(6,6,t.getModalTitle())," "),n(2),b("aria-label",d(8,8,"common.close")),n(6),g(" ",d(14,10,t.getModalDescription())," "),n(2),O(t.config.showComparison&&t.tierComparison()?15:t.targetTier()?16:-1),n(4),g(" ",d(20,12,"common.cancel")," "))},dependencies:[H,z],styles:[".upgrade-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}.upgrade-modal[_ngcontent-%COMP%]{max-width:800px;width:100%;max-height:90vh;overflow-y:auto;border-radius:16px;position:relative}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid rgba(75,85,99,.3)}.modal-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;margin:0}.close-button[_ngcontent-%COMP%]{background:none;border:none;color:#9ca3af;cursor:pointer;padding:.5rem;border-radius:8px;transition:all .2s ease}.close-button[_ngcontent-%COMP%]:hover{color:#fff;background:#4b55634d}.close-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.upgrade-description[_ngcontent-%COMP%]{font-size:1rem;color:#d1d5db;margin-bottom:2rem;line-height:1.6}.tier-comparison[_ngcontent-%COMP%]{margin-bottom:2rem}.comparison-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#fff;margin-bottom:1.5rem;text-align:center}.tier-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem}.tier-card[_ngcontent-%COMP%]{background:#1f2937cc;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(75,85,99,.4);border-radius:16px;padding:1.5rem;position:relative;transition:all .3s ease}.tier-card.popular[_ngcontent-%COMP%]{border-color:#a855f780;transform:scale(1.05)}.tier-card.current[_ngcontent-%COMP%]{border-color:#22c55e80}.popular-badge[_ngcontent-%COMP%]{position:absolute;top:-.5rem;left:50%;transform:translate(-50%)}.current-badge[_ngcontent-%COMP%]{position:absolute;top:-.5rem;right:1rem}.tier-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.tier-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;margin-bottom:.5rem}.tier-price[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:center;gap:.25rem}.price[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;color:#fff}.currency[_ngcontent-%COMP%], .period[_ngcontent-%COMP%]{font-size:1rem;color:#9ca3af}.tier-features[_ngcontent-%COMP%]{margin-bottom:2rem}.feature-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.5rem 0;border-bottom:1px solid rgba(75,85,99,.2)}.feature-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.feature-icon[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;flex-shrink:0}.feature-item.enabled[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]{color:#22c55e}.feature-item.disabled[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]{color:#9ca3af}.feature-text[_ngcontent-%COMP%]{font-size:.875rem;color:#d1d5db}.feature-item.disabled[_ngcontent-%COMP%]   .feature-text[_ngcontent-%COMP%]{color:#9ca3af;text-decoration:line-through}.tier-cta-button[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border-radius:12px;font-weight:600;transition:all .2s ease}.single-tier-upgrade[_ngcontent-%COMP%]{text-align:center;padding:2rem;background:#1f293799;border-radius:12px;margin-bottom:2rem}.tier-highlight[_ngcontent-%COMP%]   .tier-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#f59e0b;margin-bottom:1rem}.tier-benefits[_ngcontent-%COMP%]{color:#d1d5db;margin-bottom:2rem;line-height:1.6}.upgrade-cta-button[_ngcontent-%COMP%]{padding:1rem 2rem;font-size:1.125rem;border-radius:12px;font-weight:700}.modal-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid rgba(75,85,99,.3);display:flex;justify-content:flex-end;gap:1rem}@media (max-width: 640px){.upgrade-modal-overlay[_ngcontent-%COMP%]{padding:.5rem}.tier-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.tier-card.popular[_ngcontent-%COMP%]{transform:none}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:1rem}}"]})};var dt=o=>({remaining:o}),pt=(o,e)=>({limit:o,tier:e}),mt=(o,e)=>({title:"cars.limitReached",description:o,targetTier:e,showComparison:!1,showFeatureList:!1,ctaText:"tiers.upgradeNow"}),ut=(o,e)=>e.id;function gt(o,e){if(o&1&&(r(0,"div",12)(1,"div",63)(2,"span"),s(3),c(4,"translate"),a(),r(5,"span"),s(6),a()(),r(7,"div",64),f(8,"div",65),a()()),o&2){let i=C();n(3),p(d(4,14,"cars.vehicleUsage")),n(3),g("",i.getUsagePercentage(),"%"),n(2),ce("width",i.getUsagePercentage(),"%"),D("bg-green-500",!i.isNearLimit())("bg-amber-500",i.isNearLimit()&&!i.isAtCarLimit())("bg-red-500",i.isAtCarLimit()),b("aria-label","Vehicle usage: "+i.getUsagePercentage()+" percent")("aria-valuenow",i.currentCarCount())("aria-valuemin",0)("aria-valuemax",i.carLimit())}}function ft(o,e){o&1&&(r(0,"div",13),_(),r(1,"svg",66),f(2,"path",67),a(),s(3),c(4,"translate"),a()),o&2&&(n(3),g(" ",d(4,1,"cars.unlimitedVehicles")," "))}function bt(o,e){if(o&1){let i=F();r(0,"div",68)(1,"div",69),_(),r(2,"svg",70),f(3,"path",71),a(),P(),r(4,"div",3)(5,"p",72),s(6),c(7,"translate"),a(),r(8,"p",73),s(9),c(10,"translate"),a()(),r(11,"button",74),u("click",function(){x(i);let l=C();return M(l.onUpgradeRequested())}),s(12),c(13,"translate"),a()()()}if(o&2){let i=C();n(6),p(G(7,4,"cars.approachingLimit",W(11,dt,i.remainingCars()))),n(3),p(d(10,7,"cars.approachingLimitDescription")),n(2),b("aria-label","Consider upgrading your plan to add more vehicles"),n(),g(" ",d(13,9,"tiers.considerUpgrade")," ")}}function ht(o,e){if(o&1){let i=F();r(0,"div",75)(1,"div",69),_(),r(2,"svg",76),f(3,"path",77),a(),P(),r(4,"div",3)(5,"h4",78),s(6),c(7,"translate"),a(),r(8,"p",79),s(9),c(10,"translate"),a()(),r(11,"button",80),u("click",function(){x(i);let l=C();return M(l.onUpgradeRequested())}),s(12),c(13,"translate"),a()()()}if(o&2){let i=C();n(6),p(d(7,4,"cars.limitReached")),n(3),p(G(10,6,"cars.limitReachedDescription",de(11,pt,i.carLimit(),i.currentTier()))),n(2),b("aria-label","Upgrade your plan to add more vehicles"),n(),g(" ",d(13,9,"tiers.upgradeNow")," ")}}function Ct(o,e){if(o&1&&(r(0,"option",41),s(1),a()),o&2){let i=e.$implicit;h("value",i),n(),p(i)}}function vt(o,e){if(o&1&&(r(0,"option",41),s(1),a()),o&2){let i=e.$implicit;h("value",i),n(),p(i)}}function _t(o,e){if(o&1){let i=F();r(0,"div",56)(1,"span",81),s(2),c(3,"translate"),a(),r(4,"button",82),u("click",function(){x(i);let l=C();return M(l.clearFilters())}),s(5),c(6,"translate"),a()()}o&2&&(n(2),g(" ",d(3,3,"common.filtersActive")," "),n(2),b("aria-label","Clear all active filters"),n(),g(" ",d(6,5,"common.clear")," "))}function xt(o,e){o&1&&(r(0,"div",83)(1,"h3",84),s(2),c(3,"translate"),a(),r(4,"div",85)(5,"div",86)(6,"span",87),s(7),c(8,"translate"),a(),r(9,"span",88),s(10),c(11,"translate"),a()(),r(12,"div",86)(13,"span",89),s(14),c(15,"translate"),a(),r(16,"span",88),s(17),c(18,"translate"),a()(),r(19,"div",86)(20,"span",90),s(21),c(22,"translate"),a(),r(23,"span",88),s(24),c(25,"translate"),a()(),r(26,"div",86)(27,"span",91),s(28),c(29,"translate"),a(),r(30,"span",88),s(31),c(32,"translate"),a()()()()),o&2&&(n(2),p(d(3,9,"cars.statusLegend")),n(5),p(d(8,11,"cars.upToDate")),n(3),p(d(11,13,"cars.maintenanceIsCurrent")),n(4),p(d(15,15,"cars.dueSoon")),n(3),p(d(18,17,"cars.serviceNeededWithin7Days")),n(4),p(d(22,19,"cars.overdue")),n(3),p(d(25,21,"cars.serviceIsPastDue")),n(4),p(d(29,23,"cars.unknown")),n(3),p(d(32,25,"cars.statusInformationUnavailable")))}function Mt(o,e){o&1&&(r(0,"div",92),f(1,"div",93),r(2,"p",94),s(3),c(4,"translate"),a()()),o&2&&(n(3),p(d(4,1,"cars.loadingCars")))}function wt(o,e){if(o&1){let i=F();r(0,"div",95)(1,"div",96),_(),r(2,"svg",97),f(3,"path",98),a()(),P(),r(4,"h3",99),s(5),c(6,"translate"),a(),r(7,"p",100),s(8),c(9,"translate"),a(),r(10,"button",101),u("click",function(){x(i);let l=C();return M(l.clearFilters())}),_(),r(11,"svg",102),f(12,"path",103),a(),s(13),c(14,"translate"),a()()}o&2&&(n(5),p(d(6,3,"cars.noCarsFound")),n(3),p(d(9,5,"cars.noCarsMatchFilters")),n(5),g(" ",d(14,7,"common.clearFilters")," "))}function kt(o,e){if(o&1){let i=F();r(0,"div",106),u("keydown",function(l){let m=x(i).$implicit,y=C(2);return M(y.onCarKeyDown(l,m))}),r(1,"app-car-card",107),u("carSelected",function(l){x(i);let m=C(2);return M(m.onCarSelect(l))})("scheduleService",function(l){x(i);let m=C(2);return M(m.onScheduleService(l))})("viewHistory",function(l){x(i);let m=C(2);return M(m.onViewHistory(l))}),a()()}if(o&2){let i=e.$implicit,t=e.$index,l=C(2);b("aria-rowindex",t+1)("tabindex",0),n(),h("car",i)("customerName",l.getCustomerName(i.customerId))}}function yt(o,e){if(o&1&&(r(0,"div",104),V(1,kt,2,4,"div",105,ut),a()),o&2){let i=C();b("aria-label","Vehicle list containing "+i.filteredCars().length+" vehicles")("aria-rowcount",i.filteredCars().length),n(),A(i.filteredCars())}}function Pt(o,e){if(o&1){let i=F();r(0,"app-car-registration-form",108),u("close",function(){x(i);let l=C();return M(l.closeRegistrationForm())})("carRegistered",function(l){x(i);let m=C();return M(m.onCarRegistered(l))}),a()}}function St(o,e){if(o&1){let i=F();r(0,"app-upgrade-prompt",109),u("close",function(){x(i);let l=C();return M(l.closeUpgradePrompt())})("upgrade",function(){x(i);let l=C();return M(l.onUpgradeRequested())}),a()}if(o&2){let i=C();h("isVisible",i.showUpgradePrompt())("config",de(2,mt,i.getUpgradeMessage(),i.getNextTier()||void 0))}}var Ne=class o{carService=I(ie);subscriptionService=I(te);languageService=I(Ae);router=I(_e);cars=w([]);subscriptionStatus=w(null);isLoading=w(!1);showRegistrationForm=w(!1);showUpgradePrompt=w(!1);searchQuery=w("");selectedMake=w("all");selectedStatus=w("all");showMobileFilters=w(!1);availableMakes=E(()=>this.carService.getAvailableMakes());currentCarCount=E(()=>this.cars().length);carLimit=E(()=>this.subscriptionStatus()?.currentTier.limits.cars);currentTier=E(()=>this.subscriptionStatus()?.currentTier.name||"");isAtCarLimit=E(()=>{let e=this.carLimit(),i=this.currentCarCount();return typeof e=="number"&&i>=e});isNearLimit=E(()=>{let e=this.carLimit(),i=this.currentCarCount();return typeof e=="number"&&i>=e*.9});remainingCars=E(()=>{let e=this.carLimit(),i=this.currentCarCount();return e?Math.max(0,e-i):null});carLimitDisplay=E(()=>{let e=this.formatNumber(this.currentCarCount()),i=this.carLimit(),t=i?this.formatNumber(i):"\u221E";return`${e}/${t}`});getUsagePercentage=E(()=>{let e=this.currentCarCount(),i=this.carLimit();return i?Math.round(e/i*100):0});hasActiveFilters=E(()=>this.searchQuery()!==""||this.selectedMake()!=="all"||this.selectedStatus()!=="all");filteredCars=E(()=>{let e=[...this.cars()],i=this.searchQuery().toLowerCase();return i&&(e=e.filter(t=>t.licensePlate.toLowerCase().includes(i)||t.make.toLowerCase().includes(i)||t.model.toLowerCase().includes(i)||this.getCustomerName(t.customerId).toLowerCase().includes(i))),this.selectedMake()!=="all"&&(e=e.filter(t=>t.make===this.selectedMake())),this.selectedStatus()!=="all"&&(e=e.filter(t=>t.serviceStatus===this.selectedStatus())),e});statusCounts=E(()=>({total:this.cars().length,upToDate:this.cars().filter(e=>e.serviceStatus==="up-to-date").length,dueSoon:this.cars().filter(e=>e.serviceStatus==="due-soon").length,overdue:this.cars().filter(e=>e.serviceStatus==="overdue").length}));ngOnInit(){this.loadCars(),this.loadSubscriptionStatus()}loadCars(){this.isLoading.set(!0),this.carService.getCars().subscribe({next:e=>{this.cars.set(e),this.isLoading.set(!1)},error:e=>{console.error("Failed to load cars:",e),this.isLoading.set(!1)}})}loadSubscriptionStatus(){this.subscriptionService.getCurrentSubscriptionStatus().subscribe({next:e=>{this.subscriptionStatus.set(e)},error:e=>{console.error("Failed to load subscription status:",e)}})}getCustomerName(e){let i=this.carService.getCustomerById(e);return i?i.name:"Unknown Customer"}getStatusColor(e){return{"up-to-date":"text-green-600","due-soon":"text-amber-600",overdue:"text-red-600"}[e]||"text-gray-600"}getStatusBadgeClass(e){return{"up-to-date":"badge badge-up-to-date","due-soon":"badge badge-due-soon",overdue:"badge badge-overdue"}[e]||"badge badge-unknown"}onSearchChange(e){let i=e.target;this.searchQuery.set(i.value)}onMakeChange(e){let i=e.target;this.selectedMake.set(i.value)}onStatusChange(e){let i=e.target;this.selectedStatus.set(i.value)}setStatusFilter(e){this.selectedStatus.set(e)}onStatKeyDown(e,i){(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),this.setStatusFilter(i))}toggleMobileFilters(){let e=this.showMobileFilters();this.showMobileFilters.set(!e)}clearFilters(){this.searchQuery.set(""),this.selectedMake.set("all"),this.selectedStatus.set("all")}onCarSelect(e){console.log("Selected car:",e)}onScheduleService(e){this.router.navigate(["/appointments"],{queryParams:{carId:e.id,licensePlate:e.licensePlate,make:e.make,model:e.model,customerId:e.customerId}})}onViewHistory(e){this.router.navigate(["/maintenance"],{queryParams:{carId:e.id,filter:"history"}})}openRegistrationForm(){if(this.isAtCarLimit()){this.showUpgradePrompt.set(!0);return}this.showRegistrationForm.set(!0)}closeRegistrationForm(){this.showRegistrationForm.set(!1)}onCarRegistered(e){this.loadCars(),this.showRegistrationForm.set(!1)}closeUpgradePrompt(){this.showUpgradePrompt.set(!1)}onUpgradeRequested(e){this.router.navigate(["/subscription"]),this.showUpgradePrompt.set(!1)}getUpgradeMessage(){let e=this.subscriptionStatus()?.currentTier,i=this.currentCarCount(),t=this.carLimit();return!e||!t?"":e.id==="solo"?`Your Solo plan allows up to ${t} vehicles. You currently have ${i}. Upgrade to Starter to manage up to 200 vehicles.`:e.id==="starter"?`Your Starter plan allows up to ${t} vehicles. You currently have ${i}. Upgrade to Professional for unlimited vehicles.`:"Upgrade your plan to add more vehicles."}getNextTier(){let e=this.subscriptionStatus()?.currentTier.id;return e==="solo"?"starter":e==="starter"?"professional":null}getTierBadgeClass(){switch(this.subscriptionStatus()?.currentTier.id){case"solo":return"badge badge-tier-solo";case"starter":return"badge badge-tier-starter";case"professional":return"badge badge-tier-professional";default:return"badge badge-info"}}onCarKeyDown(e,i){switch(e.key){case"Enter":case" ":e.preventDefault(),this.onCarSelect(i);break;case"s":case"S":!e.ctrlKey&&!e.metaKey&&(e.preventDefault(),this.onScheduleService(i));break;case"h":case"H":!e.ctrlKey&&!e.metaKey&&(e.preventDefault(),this.onViewHistory(i));break;case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":this.handleArrowNavigation(e);break}}handleArrowNavigation(e){e.preventDefault();let i=document.querySelectorAll('.car-grid-item[tabindex="0"]'),t=Array.from(i).findIndex(y=>y===document.activeElement);if(t===-1)return;let l=t,m=this.getItemsPerRow();switch(e.key){case"ArrowRight":l=Math.min(t+1,i.length-1);break;case"ArrowLeft":l=Math.max(t-1,0);break;case"ArrowDown":l=Math.min(t+m,i.length-1);break;case"ArrowUp":l=Math.max(t-m,0);break}i[l].focus()}getItemsPerRow(){let e=window.innerWidth;return e<768?1:e<1024||e<1280?2:3}formatNumber(e){let i=this.languageService.getCurrentLanguage(),l={en:"en-US",fr:"fr-FR",ar:"en-US"}[i]||"en-US";try{return new Intl.NumberFormat(l).format(e)}catch{return e.toLocaleString()}}formatNumbersInStatusCounts(){let e=this.statusCounts();return{total:this.formatNumber(e.total),upToDate:this.formatNumber(e.upToDate),dueSoon:this.formatNumber(e.dueSoon),overdue:this.formatNumber(e.overdue)}}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=U({type:o,selectors:[["app-cars"]],decls:150,vars:151,consts:[[1,"cars-container","p-4","lg:p-8"],["role","banner",1,"glass-card","cars-header"],[1,"flex","flex-col","lg:flex-row","justify-between","items-start","lg:items-center","gap-4"],[1,"flex-1"],["id","page-title",1,"text-3xl","font-bold","text-white","mb-1"],["aria-describedby","page-title",1,"text-gray-300"],[1,"mt-3","space-y-3"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-2"],[1,"text-sm","text-white"],[1,"count-badge","text-sm","font-semibold","px-2","py-1","rounded-full","bg-gray-100"],[3,"ngClass"],[1,"w-full"],[1,"text-xs","text-gray-400","flex","items-center","gap-1"],[1,"flex","flex-col","lg:flex-row","lg:items-center","gap-3","items-start"],[1,"relative","w-full","lg:w-auto"],["for","car-search",1,"sr-only"],["id","car-search","type","text","role","searchbox",1,"search-input","w-full",3,"input","placeholder","value"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","button",1,"btn-primary",3,"click","disabled"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["id","limit-warning-notice","class","limit-warning glass-card bg-amber-900/20 border-l-4 border-amber-500","role","alert","aria-live","polite",4,"ngIf"],["id","limit-reached-notice","class","limit-reached-notice glass-card bg-red-900/20 border-l-4 border-red-500","role","alert","aria-live","assertive","aria-atomic","true",4,"ngIf"],["aria-labelledby","stats-heading",1,"glass-card","stats-nav"],["id","stats-heading",1,"sr-only"],["role","group","aria-label","Vehicle statistics summary",1,"grid","grid-cols-2","lg:grid-cols-4","gap-3"],["role","button","tabindex","0",1,"text-center",3,"click","keydown"],["aria-hidden","true",1,"text-2xl","font-bold","text-white"],[1,"text-xs","text-gray-400"],["aria-hidden","true",1,"text-2xl","font-bold","text-green-400"],["aria-hidden","true",1,"text-2xl","font-bold","text-amber-400"],["aria-hidden","true",1,"text-2xl","font-bold","text-red-400"],["type","button",1,"filter-toggle","lg:hidden",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"],["id","mobile-filters-panel"],[1,"p-4"],[1,"grid","grid-cols-1","gap-4"],[1,"filter-select",3,"change","value"],["value","all"],[3,"value"],["value","up-to-date"],["value","due-soon"],["value","overdue"],[1,"btn-clear-filters",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"desktop-filters-panel","glass-card","hidden","lg:block"],[1,"flex","items-center","gap-4","p-4"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"w-5","h-5","text-blue-400"],[1,"text-sm","font-medium","text-gray-300"],[1,"flex","items-center","gap-4","flex-1"],["for","make-filter-desktop",1,"text-sm","text-gray-400","whitespace-nowrap"],["id","make-filter-desktop",1,"filter-select-desktop",3,"change","value"],["for","status-filter-desktop",1,"text-sm","text-gray-400","whitespace-nowrap"],["id","status-filter-desktop",1,"filter-select-desktop",3,"change","value"],[1,"flex","items-center","gap-2","ml-4"],[1,"cars-main"],["class","glass-card status-legend",4,"ngIf"],["class","flex flex-col items-center justify-center py-12",4,"ngIf"],["class","glass-card empty-state",4,"ngIf"],["class","cars-grid","role","grid",4,"ngIf"],[3,"isVisible","config"],[1,"flex","items-center","justify-between","text-xs","text-white","mb-1"],[1,"w-full","bg-gray-700","rounded-full","h-2","overflow-hidden"],["role","progressbar",1,"progress-bar","h-full","rounded-full","transition-all","duration-300","ease-out"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","text-green-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["id","limit-warning-notice","role","alert","aria-live","polite",1,"limit-warning","glass-card","bg-amber-900/20","border-l-4","border-amber-500"],[1,"flex","items-center","gap-3","p-4"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"w-6","h-6","text-amber-500","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"],[1,"text-amber-200","font-medium"],[1,"text-amber-300","text-sm","mt-1"],["type","button",1,"btn-secondary","btn-sm",3,"click"],["id","limit-reached-notice","role","alert","aria-live","assertive","aria-atomic","true",1,"limit-reached-notice","glass-card","bg-red-900/20","border-l-4","border-red-500"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"w-6","h-6","text-red-500","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"],[1,"text-red-200","font-semibold"],[1,"text-red-300","text-sm","mt-1"],["type","button",1,"btn-primary",3,"click"],[1,"text-xs","px-2","py-1","bg-blue-600","text-blue-100","rounded-full","font-medium"],[1,"text-xs","text-blue-400","hover:text-blue-300","transition-colors",3,"click"],[1,"glass-card","status-legend"],[1,"legend-title"],[1,"legend-items"],[1,"legend-item"],[1,"legend-badge","badge","badge-up-to-date"],[1,"legend-text"],[1,"legend-badge","badge","badge-due-soon"],[1,"legend-badge","badge","badge-overdue"],[1,"legend-badge","badge","badge-unknown"],[1,"flex","flex-col","items-center","justify-center","py-12"],[1,"loading-spinner"],[1,"mt-4","text-gray-400"],[1,"glass-card","empty-state"],[1,"mb-4"],["fill","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto","text-gray-500"],["d","M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.22.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"],[1,"text-lg","font-semibold","text-white","mb-2"],[1,"text-gray-400","mb-6"],[1,"flex","items-center","gap-2","px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["role","grid",1,"cars-grid"],["role","gridcell",1,"car-grid-item"],["role","gridcell",1,"car-grid-item",3,"keydown"],[3,"carSelected","scheduleService","viewHistory","car","customerName"],[3,"close","carRegistered"],[3,"close","upgrade","isVisible","config"]],template:function(i,t){i&1&&(r(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"h1",4),s(5),c(6,"translate"),a(),r(7,"p",5),s(8),c(9,"translate"),a(),r(10,"div",6)(11,"div",7)(12,"div",8)(13,"span",9),s(14),c(15,"translate"),a(),r(16,"span",10),s(17),a()(),r(18,"div",8)(19,"span",9),s(20),c(21,"translate"),a(),r(22,"span",11),s(23),a()()(),S(24,gt,9,16,"div",12)(25,ft,5,3,"div",13),a()(),r(26,"div",14)(27,"div",15)(28,"label",16),s(29),c(30,"translate"),c(31,"translate"),a(),r(32,"input",17),c(33,"translate"),u("input",function(m){return t.onSearchChange(m)}),a(),_(),r(34,"svg",18),f(35,"path",19),a()(),P(),r(36,"button",20),u("click",function(){return t.openRegistrationForm()}),_(),r(37,"svg",21),f(38,"path",22),a(),P(),r(39,"span"),s(40),c(41,"translate"),a()()()()(),q(42,bt,14,13,"div",23)(43,ht,14,14,"div",24),r(44,"section",25)(45,"h2",26),s(46),c(47,"translate"),a(),r(48,"div",27)(49,"div",28),u("click",function(){return t.setStatusFilter("all")})("keydown",function(m){return t.onStatKeyDown(m,"all")}),r(50,"div",29),s(51),a(),r(52,"div",30),s(53),c(54,"translate"),a()(),r(55,"div",28),u("click",function(){return t.setStatusFilter("up-to-date")})("keydown",function(m){return t.onStatKeyDown(m,"up-to-date")}),r(56,"div",31),s(57),a(),r(58,"div",30),s(59),c(60,"translate"),a()(),r(61,"div",28),u("click",function(){return t.setStatusFilter("due-soon")})("keydown",function(m){return t.onStatKeyDown(m,"due-soon")}),r(62,"div",32),s(63),a(),r(64,"div",30),s(65),c(66,"translate"),a()(),r(67,"div",28),u("click",function(){return t.setStatusFilter("overdue")})("keydown",function(m){return t.onStatKeyDown(m,"overdue")}),r(68,"div",33),s(69),a(),r(70,"div",30),s(71),c(72,"translate"),a()()()(),r(73,"button",34),u("click",function(){return t.toggleMobileFilters()}),_(),r(74,"svg",21),f(75,"path",35),a(),P(),r(76,"span"),s(77),c(78,"translate"),a()(),r(79,"div",36)(80,"div",37)(81,"div",38)(82,"select",39),u("change",function(m){return t.onMakeChange(m)}),r(83,"option",40),s(84),c(85,"translate"),a(),V(86,Ct,2,2,"option",41,se),a(),r(88,"select",39),u("change",function(m){return t.onStatusChange(m)}),r(89,"option",40),s(90),c(91,"translate"),a(),r(92,"option",42),s(93),c(94,"translate"),a(),r(95,"option",43),s(96),c(97,"translate"),a(),r(98,"option",44),s(99),c(100,"translate"),a()(),r(101,"button",45),u("click",function(){return t.clearFilters()}),_(),r(102,"svg",21),f(103,"path",46),a(),s(104),c(105,"translate"),a()()()(),P(),r(106,"div",47)(107,"div",48)(108,"div",8),_(),r(109,"svg",49),f(110,"path",35),a(),P(),r(111,"span",50),s(112),c(113,"translate"),a()(),r(114,"div",51)(115,"div",8)(116,"label",52),s(117),c(118,"translate"),a(),r(119,"select",53),u("change",function(m){return t.onMakeChange(m)}),r(120,"option",40),s(121),c(122,"translate"),a(),V(123,vt,2,2,"option",41,se),a()(),r(125,"div",8)(126,"label",54),s(127),c(128,"translate"),a(),r(129,"select",55),u("change",function(m){return t.onStatusChange(m)}),r(130,"option",40),s(131),c(132,"translate"),a(),r(133,"option",42),s(134),c(135,"translate"),a(),r(136,"option",43),s(137),c(138,"translate"),a(),r(139,"option",44),s(140),c(141,"translate"),a()()(),S(142,_t,7,7,"div",56),a()()(),r(143,"main",57),q(144,xt,33,27,"div",58)(145,Mt,5,3,"div",59)(146,wt,15,9,"div",60)(147,yt,3,2,"div",61),a(),S(148,Pt,1,0,"app-car-registration-form"),S(149,St,1,5,"app-upgrade-prompt",62),a()),i&2&&(n(5),p(d(6,95,"cars.vehicleDatabase")),n(3),p(d(9,97,"cars.subtitle")),n(6),g("",d(15,99,"cars.vehicles"),":"),n(2),D("text-amber-600",t.isNearLimit()&&!t.isAtCarLimit())("text-red-600",t.isAtCarLimit())("text-gray-700",!t.isNearLimit()&&!t.isAtCarLimit())("text-amber-400",t.isNearLimit()&&!t.isAtCarLimit())("text-red-400",t.isAtCarLimit())("text-gray-300",!t.isNearLimit()&&!t.isAtCarLimit()),b("aria-label","Current vehicle count: "+t.carLimitDisplay()),n(),g(" ",t.carLimitDisplay()," "),n(3),p(d(21,101,"tiers.plan")),n(2),h("ngClass",t.getTierBadgeClass()),b("aria-label","Current subscription tier: "+t.currentTier()),n(),g(" ",t.currentTier()," "),n(),O(t.carLimit()?24:25),n(5),j("",d(30,103,"common.search")," ",d(31,105,"cars.vehicles")),n(3),h("placeholder",d(33,107,"common.search"))("value",t.searchQuery()),b("aria-label","Search vehicles by license plate, make, model, or customer name")("aria-describedby",t.hasActiveFilters()?"active-filters-notice":null),n(4),D("opacity-50",t.isAtCarLimit())("cursor-not-allowed",t.isAtCarLimit()),h("disabled",t.isAtCarLimit()),b("aria-label",t.isAtCarLimit()?"Cannot add vehicle - limit of "+t.carLimit()+" reached":"Add new vehicle to database")("aria-describedby",t.isAtCarLimit()?"limit-reached-notice":null),n(4),p(d(41,109,"cars.addVehicle")),n(2),h("ngIf",t.isNearLimit()&&!t.isAtCarLimit()),n(),h("ngIf",t.isAtCarLimit()),n(3),p(d(47,111,"cars.vehicleStatistics")),n(3),b("aria-label","Total vehicles: "+t.statusCounts().total+", click to view all")("aria-pressed",t.selectedStatus()==="all"),n(2),p(t.formatNumber(t.statusCounts().total)),n(2),p(d(54,113,"cars.totalCars")),n(2),b("aria-label","Up to date vehicles: "+t.statusCounts().upToDate+", click to filter")("aria-pressed",t.selectedStatus()==="up-to-date"),n(2),p(t.formatNumber(t.statusCounts().upToDate)),n(2),p(d(60,115,"cars.upToDate")),n(2),b("aria-label","Due soon vehicles: "+t.statusCounts().dueSoon+", click to filter")("aria-pressed",t.selectedStatus()==="due-soon"),n(2),p(t.formatNumber(t.statusCounts().dueSoon)),n(2),p(d(66,117,"cars.dueSoon")),n(2),b("aria-label","Overdue vehicles: "+t.statusCounts().overdue+", click to filter")("aria-pressed",t.selectedStatus()==="overdue"),n(2),p(t.formatNumber(t.statusCounts().overdue)),n(2),p(d(72,119,"cars.overdue")),n(2),D("active",t.showMobileFilters()),b("aria-expanded",t.showMobileFilters())("aria-controls","mobile-filters-panel"),n(4),p(d(78,121,"common.filters")),n(2),Ce("filters-panel lg:hidden"+(t.showMobileFilters()?" open":"")),ce("display",(t.showMobileFilters(),"block")),b("aria-hidden",!t.showMobileFilters()),n(3),h("value",t.selectedMake()),b("aria-label","Filter by vehicle make"),n(2),p(d(85,123,"cars.allMakes")),n(2),A(t.availableMakes()),n(2),h("value",t.selectedStatus()),b("aria-label","Filter by service status"),n(2),p(d(91,125,"cars.allStatus")),n(3),p(d(94,127,"cars.upToDate")),n(3),p(d(97,129,"cars.dueSoon")),n(3),p(d(100,131,"cars.overdue")),n(2),b("aria-label","Clear all active filters"),n(3),g(" ",d(105,133,"common.clearFilters")," "),n(8),g("",d(113,135,"common.filters"),":"),n(5),g("",d(118,137,"cars.make"),":"),n(2),h("value",t.selectedMake()),b("aria-label","Filter by vehicle make"),n(2),p(d(122,139,"cars.allMakes")),n(2),A(t.availableMakes()),n(4),p(d(128,141,"cars.status")),n(2),h("value",t.selectedStatus()),b("aria-label","Filter by service status"),n(2),p(d(132,143,"cars.allStatus")),n(3),p(d(135,145,"cars.upToDate")),n(3),p(d(138,147,"cars.dueSoon")),n(3),p(d(141,149,"cars.overdue")),n(2),O(t.hasActiveFilters()?142:-1),n(2),h("ngIf",!t.isLoading()&&t.filteredCars().length>0),n(),h("ngIf",t.isLoading()),n(),h("ngIf",!t.isLoading()&&t.filteredCars().length===0),n(),h("ngIf",!t.isLoading()&&t.filteredCars().length>0),n(),O(t.showRegistrationForm()?148:-1),n(),O(t.showUpgradePrompt()?149:-1))},dependencies:[H,Q,X,Be,J,Z,xe,ne,ae,z,le],styles:[`.cars-container[_ngcontent-%COMP%]{min-height:100vh;background:transparent}.glass-card[_ngcontent-%COMP%]{background:#111827f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(75,85,99,.6);border-radius:20px;padding:1.5rem;box-shadow:0 8px 32px #000000b3;transition:all .3s cubic-bezier(.4,0,.2,1);margin-bottom:1rem}.glass-card[_ngcontent-%COMP%]:hover{background:#1f2937fa;box-shadow:0 12px 40px #000c;border-color:#3b82f6b3;transform:translateY(-2px)}.cars-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff}.cars-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d1d5db}.search-input[_ngcontent-%COMP%]{width:100%;min-width:200px;padding:.75rem 1rem .75rem 2.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#1f2937b3;border:1px solid rgba(255,255,255,.1);border-radius:12px;font-size:.875rem;transition:all .2s ease;color:#fff}@media (max-width: 640px){.search-input[_ngcontent-%COMP%]{min-width:0;width:100%}}.search-input[_ngcontent-%COMP%]:focus{outline:none;background:#1f2937e6;border-color:#3b82f680;box-shadow:0 0 0 3px #3b82f61a}.search-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.add-btn[_ngcontent-%COMP%], .mobile-fab[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);background:linear-gradient(135deg,#3b82f6cc,#1d4ed8cc);border:1px solid rgba(59,130,246,.3);border-radius:12px;color:#fff;padding:.75rem 1rem;display:flex;align-items:center;gap:.5rem;transition:all .2s ease;font-weight:600}.add-btn[_ngcontent-%COMP%]:hover, .mobile-fab[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3b82f6e6,#1d4ed8e6);transform:translateY(-1px)}.stats-nav[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]:first-child   .text-2xl[_ngcontent-%COMP%]{color:#fff!important}.stats-nav[_ngcontent-%COMP%]   .text-xs[_ngcontent-%COMP%]{color:#d1d5db!important}.stats-nav[_ngcontent-%COMP%]   [role=button][_ngcontent-%COMP%]{cursor:pointer;border-radius:12px;padding:.75rem;transition:all .2s ease;outline:none}.stats-nav[_ngcontent-%COMP%]   [role=button][_ngcontent-%COMP%]:hover{background:#3b82f61a;transform:translateY(-1px)}.stats-nav[_ngcontent-%COMP%]   [role=button][_ngcontent-%COMP%]:focus{background:#3b82f626;outline:2px solid #3b82f6;outline-offset:2px;box-shadow:0 0 0 4px #3b82f61a}.stats-nav[_ngcontent-%COMP%]   [role=button][_ngcontent-%COMP%]:focus-visible{background:#3b82f626;outline:2px solid #3b82f6;outline-offset:2px;box-shadow:0 0 0 4px #3b82f61a}.stats-nav[_ngcontent-%COMP%]   [role=button][_ngcontent-%COMP%]:active{background:#3b82f633;transform:translateY(0)}.filter-toggle[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;font-size:.875rem;color:#d1d5db;background:#1f293799;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:12px;transition:all .2s ease;margin-bottom:.75rem}.filter-toggle[_ngcontent-%COMP%]:hover{background:#1f2937cc}.filter-toggle.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6cc,#1d4ed8cc)!important;border-color:#3b82f680!important;color:#fff!important;box-shadow:0 4px 15px #3b82f64d}.filter-toggle.active[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3b82f6e6,#1d4ed8e6)!important;transform:translateY(-1px);box-shadow:0 6px 20px #3b82f666}.filters-panel[_ngcontent-%COMP%]{background:#111827e6;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(75,85,99,.4);border-radius:20px;box-shadow:0 8px 32px #00000080;transition:all .3s cubic-bezier(.4,0,.2,1);margin-bottom:1rem;max-height:0!important;overflow:hidden;opacity:0;transform:translateY(-10px)}.filters-panel.open[_ngcontent-%COMP%]{max-height:400px!important;opacity:1!important;transform:translateY(0)!important}.filters-panel.open[_ngcontent-%COMP%]:hover{background:#1f2937f2;box-shadow:0 12px 40px #0009}.filter-select[_ngcontent-%COMP%]{width:100%;padding:.75rem 2.5rem .75rem .75rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#1f2937b3;border:1px solid rgba(255,255,255,.1);border-radius:12px;font-size:.875rem;transition:all .2s ease;color:#fff;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right .75rem center;background-size:1rem}.filter-select[_ngcontent-%COMP%]:focus{outline:none;background:#1f2937e6;border-color:#3b82f680;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right .75rem center;background-size:1rem}.filter-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background:#374151;color:#fff}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .text-gray-900[_ngcontent-%COMP%]{color:#fff!important}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .text-gray-600[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .text-gray-400[_ngcontent-%COMP%]{color:#d1d5db!important}.status-legend[_ngcontent-%COMP%]{background:#11182799!important;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:1rem;margin-bottom:1rem;box-shadow:0 4px 16px #0000004d;transition:all .3s cubic-bezier(.4,0,.2,1)}.status-legend[_ngcontent-%COMP%]:hover{background:#1f2937b3!important;transform:translateY(-1px);box-shadow:0 6px 20px #0006}.legend-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#fff;margin:0 0 .75rem;display:flex;align-items:center;gap:.5rem}.legend-title[_ngcontent-%COMP%]:before{content:"";width:4px;height:1rem;background:linear-gradient(135deg,#3b82f6,#1d4ed8);border-radius:2px}.legend-items[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:.75rem}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.legend-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:12px;font-size:.75rem;font-weight:600;border:1px solid;white-space:nowrap}.legend-text[_ngcontent-%COMP%]{font-size:.875rem;color:#d1d5db;flex:1}.loading-spinner[_ngcontent-%COMP%]{width:2rem;height:2rem;border:3px solid rgba(59,130,246,.3);border-top:3px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.cars-grid[_ngcontent-%COMP%]{display:grid;gap:1rem;margin:0;padding:0;grid-template-columns:1fr}@media (min-width: 375px){.cars-grid[_ngcontent-%COMP%]{gap:1rem;grid-template-columns:1fr}}@media (min-width: 390px){.cars-grid[_ngcontent-%COMP%]{gap:1.25rem}}@media (min-width: 768px){.cars-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:1.5rem}}@media (min-width: 1024px){.cars-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:1.5rem}}@media (min-width: 1280px){.cars-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:2rem}}@media (min-width: 1536px){.cars-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:2rem}}.car-grid-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;min-height:0;outline:none;border-radius:20px;transition:all .3s cubic-bezier(.4,0,.2,1)}.car-grid-item[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}.car-grid-item[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:2px;box-shadow:0 0 0 4px #3b82f61a}.desktop-filters-panel[_ngcontent-%COMP%]{background:#111827f2!important;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:1px solid rgba(75,85,99,.6);box-shadow:0 4px 20px #0000004d;transition:all .3s cubic-bezier(.4,0,.2,1)}.desktop-filters-panel[_ngcontent-%COMP%]:hover{background:#1f2937fa!important;transform:translateY(-1px);box-shadow:0 6px 25px #0006}.filter-select-desktop[_ngcontent-%COMP%]{min-width:140px;padding:.5rem 2rem .5rem .75rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#1f2937cc;border:1px solid rgba(255,255,255,.1);border-radius:8px;font-size:.875rem;transition:all .2s ease;color:#fff;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right .5rem center;background-size:.875rem}.filter-select-desktop[_ngcontent-%COMP%]:focus{outline:none;background:#1f2937f2;border-color:#3b82f680;box-shadow:0 0 0 2px #3b82f61a;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right .5rem center;background-size:.875rem}.filter-select-desktop[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background:#374151;color:#fff;padding:.5rem}[dir="rtl"][_nghost-%COMP%]   .search-input[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .search-input[_ngcontent-%COMP%]{padding-left:1rem;padding-right:2.5rem}[dir="rtl"][_nghost-%COMP%]   .search-input[_ngcontent-%COMP%] + svg[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .search-input[_ngcontent-%COMP%] + svg[_ngcontent-%COMP%]{left:auto;right:.75rem}[dir="rtl"][_nghost-%COMP%]   .cars-header[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .cars-header[_ngcontent-%COMP%]{direction:rtl}[dir="rtl"][_nghost-%COMP%]   .cars-header[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .cars-header[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir="rtl"][_nghost-%COMP%]   .stats-nav[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .stats-nav[_ngcontent-%COMP%]{direction:rtl}[dir="rtl"][_nghost-%COMP%]   .filter-select[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .filter-select[_ngcontent-%COMP%], [dir="rtl"][_nghost-%COMP%]   .filter-select-desktop[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .filter-select-desktop[_ngcontent-%COMP%]{background-position:left .75rem center;padding-left:2.5rem;padding-right:.75rem;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='18,9 12,15 6,9'%3e%3c/polyline%3e%3c/svg%3e")}[dir="rtl"][_nghost-%COMP%]   .desktop-filters-panel[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .desktop-filters-panel[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir="rtl"][_nghost-%COMP%]   .desktop-filters-panel[_ngcontent-%COMP%]   .flex-1[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .desktop-filters-panel[_ngcontent-%COMP%]   .flex-1[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir="rtl"][_nghost-%COMP%]   .limit-warning[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .limit-warning[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%], [dir="rtl"][_nghost-%COMP%]   .limit-reached-notice[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .limit-reached-notice[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir="rtl"][_nghost-%COMP%]   .cars-grid[_ngcontent-%COMP%], [dir="rtl"]   [_nghost-%COMP%]   .cars-grid[_ngcontent-%COMP%]{direction:rtl}`]})};export{Ne as CarsComponent};
