import{a as re}from"./chunk-PATQPLWI.js";import{b as z,c as C,d as H,e as $,h as U,k as W,n as J,o as K,p as Q,q as Y,u as Z,v as ee,w as te}from"./chunk-VYILSR5J.js";import{A as v,Aa as V,Ca as L,E as k,J as o,Ka as j,La as B,M as F,Ma as G,Pa as R,R as y,Ua as q,Wa as O,Xa as X,aa as m,ba as r,ca as e,da as b,ea as E,fa as _,ga as u,ka as M,na as D,oa as n,pa as c,qa as g,ra as P,sa as A,x as w,z as f,za as T}from"./chunk-JES5V5RQ.js";function ae(l,t){if(l&1&&(r(0,"div")(1,"h1",41),n(2),e(),r(3,"div",42)(4,"span",43),n(5),T(6,"titlecase"),e(),r(7,"span",44),n(8),e()()()),l&2){let i,a,s,d,h,p=u();o(2),g(" ",(i=p.customer())==null?null:i.name," "),o(2),D(p.getStatusBadgeClass(((a=p.customer())==null?null:a.status)||"active")),o(),g(" ",V(6,7,(s=p.customer())==null?null:s.status)," "),o(2),D(p.getLoyaltyTierClass(((d=p.customer())==null?null:d.loyaltyPoints)||0)),o(),g(" ",p.getLoyaltyTier(((h=p.customer())==null?null:h.loyaltyPoints)||0)," ")}}function oe(l,t){if(l&1){let i=E();r(0,"button",45),_("click",function(){f(i);let s=u();return v(s.onEdit())}),n(1," Edit "),e()}}function le(l,t){if(l&1){let i=E();r(0,"button",46),_("click",function(){f(i);let s=u();return v(s.onSave())}),n(1," Save "),e()}if(l&2){let i=u();m("disabled",!i.editForm.valid)}}function se(l,t){if(l&1){let i=E();r(0,"button",47),_("click",function(){f(i);let s=u();return v(s.onCancelEdit())}),n(1," Cancel "),e()}}function de(l,t){if(l&1){let i=E();r(0,"button",48),_("click",function(){f(i);let s=u();return v(s.onDelete())}),n(1," Delete "),e()}}function me(l,t){if(l&1&&(r(0,"div")(1,"label",50),n(2,"Address"),e(),r(3,"p",51),n(4),b(5,"br"),n(6),b(7,"br"),n(8),e()()),l&2){let i,a,s,d=u(2);o(4),g(" ",(i=d.customer())==null||i.address==null?null:i.address.street),o(2),P(" ",(a=d.customer())==null||a.address==null?null:a.address.city,", ",(a=d.customer())==null||a.address==null?null:a.address.postalCode),o(2),g(" ",(s=d.customer())==null||s.address==null?null:s.address.country," ")}}function ue(l,t){if(l&1&&(r(0,"div")(1,"label",50),n(2,"Notes"),e(),r(3,"p",51),n(4),e()()),l&2){let i,a=u(2);o(4),c((i=a.customer())==null?null:i.notes)}}function ce(l,t){if(l&1&&(r(0,"div",20)(1,"div",49)(2,"div")(3,"label",50),n(4,"Full Name"),e(),r(5,"p",51),n(6),e()(),r(7,"div")(8,"label",50),n(9,"Phone"),e(),r(10,"p",51),n(11),e()(),r(12,"div")(13,"label",50),n(14,"Email"),e(),r(15,"p",51),n(16),e()(),r(17,"div")(18,"label",50),n(19,"Preferred Contact"),e(),r(20,"div",52)(21,"span"),n(22),e(),r(23,"span",51),n(24),T(25,"titlecase"),e()()()(),y(26,me,9,4,"div",7)(27,ue,5,1,"div",7),e()),l&2){let i,a,s,d,h,p,S,x=u();o(6),c((i=x.customer())==null?null:i.name),o(5),c((a=x.customer())==null?null:a.phone),o(5),c(((s=x.customer())==null?null:s.email)||"Not provided"),o(6),c(x.getContactMethodIcon(((d=x.customer())==null?null:d.preferredContactMethod)||"phone")),o(2),c(V(25,7,(h=x.customer())==null?null:h.preferredContactMethod)),o(2),m("ngIf",(p=x.customer())==null?null:p.address),o(),m("ngIf",(S=x.customer())==null?null:S.notes)}}function pe(l,t){if(l&1&&(r(0,"form",53)(1,"div",49)(2,"div")(3,"label",54),n(4,"Full Name *"),e(),b(5,"input",55),e(),r(6,"div")(7,"label",54),n(8,"Phone *"),e(),b(9,"input",56),e(),r(10,"div")(11,"label",54),n(12,"Email"),e(),b(13,"input",57),e(),r(14,"div")(15,"label",54),n(16,"Preferred Contact *"),e(),r(17,"select",58)(18,"option",59),n(19,"Phone"),e(),r(20,"option",60),n(21,"Email"),e(),r(22,"option",61),n(23,"SMS"),e(),r(24,"option",62),n(25,"WhatsApp"),e()()()(),r(26,"div",20)(27,"h3",63),n(28,"Address"),e(),r(29,"div",49)(30,"div",64)(31,"label",54),n(32,"Street"),e(),b(33,"input",65),e(),r(34,"div")(35,"label",54),n(36,"City"),e(),b(37,"input",66),e(),r(38,"div")(39,"label",54),n(40,"Postal Code"),e(),b(41,"input",67),e()()(),r(42,"div",49)(43,"div")(44,"label",54),n(45,"Status *"),e(),r(46,"select",68)(47,"option",69),n(48,"Active"),e(),r(49,"option",70),n(50,"VIP"),e(),r(51,"option",71),n(52,"Inactive"),e(),r(53,"option",72),n(54,"Blocked"),e()()()(),r(55,"div")(56,"label",54),n(57,"Notes"),e(),b(58,"textarea",73),e()()),l&2){let i=u();m("formGroup",i.editForm)}}function ge(l,t){if(l&1&&(r(0,"div",74)(1,"div",75)(2,"span",6),n(3,"Customer for:"),e(),r(4,"span",51),n(5),e()(),r(6,"div",75)(7,"span",6),n(8,"Avg visits/month:"),e(),r(9,"span",51),n(10),e()(),r(11,"div",75)(12,"span",6),n(13,"Avg spend/month:"),e(),r(14,"span",51),n(15),e()()()),l&2){let i=u();o(5),g("",i.metrics().monthsSinceRegistration," months"),o(5),c(i.metrics().appointmentsPerMonth),o(5),c(i.formatCurrency(i.metrics().revenuePerMonth))}}function xe(l,t){if(l&1&&(r(0,"p",82),n(1),e()),l&2){let i=u().$implicit,a=u(2);o(),g(" Last: ",a.formatDate(i.lastServiceDate)," ")}}function be(l,t){if(l&1){let i=E();r(0,"div",77),_("click",function(){let s=f(i).$implicit,d=u(2);return v(d.onViewCar(s.id))}),r(1,"div",4)(2,"div",78)(3,"span",79),n(4,"\u{1F697}"),e()(),r(5,"div")(6,"p",80),n(7),e(),r(8,"p",81),n(9),e(),r(10,"p",82),n(11),e()()(),r(12,"div",83)(13,"p",84),n(14),e(),r(15,"p",81),n(16),e(),y(17,xe,2,1,"p",85),e()()}if(l&2){let i=t.$implicit,a=u(2);o(7),A("",i.make," ",i.model," (",i.year,")"),o(2),c(i.licensePlate),o(2),g("Registered ",a.formatDate(i.registrationDate)),o(3),c(a.formatCurrency(i.totalSpent)),o(2),g("",i.totalServices," services"),o(),m("ngIf",i.lastServiceDate)}}function ye(l,t){if(l&1&&(r(0,"div",20),y(1,be,18,8,"div",76),e()),l&2){let i,a=u();o(),m("ngForOf",(i=a.history())==null?null:i.cars)}}function fe(l,t){l&1&&(r(0,"div",86)(1,"div",87)(2,"span",88),n(3,"\u{1F697}"),e()(),r(4,"p",6),n(5,"No cars registered for this customer"),e()())}function ve(l,t){l&1&&(r(0,"div",89)(1,"div",90),b(2,"div",91),r(3,"span",51),n(4,"Loading customer details..."),e()()())}var ie=class l{route=w(q);router=w(O);customerService=w(re);fb=w(Z);customer=k(null);history=k(null);metrics=k(null);isLoading=k(!1);isEditing=k(!1);editForm;customerId=k("");constructor(){this.editForm=this.fb.group({name:["",[C.required,C.minLength(2)]],phone:["",[C.required,C.pattern(/^\+216-[0-9]{2}-[0-9]{3}-[0-9]{3}$/)]],email:["",[C.email]],street:[""],city:[""],postalCode:[""],country:["Tunisia"],status:["active",C.required],preferredContactMethod:["phone",C.required],notes:[""]})}ngOnInit(){this.route.params.subscribe(t=>{let i=t.id;i&&(this.customerId.set(i),this.loadCustomer(i),this.loadHistory(i),this.loadMetrics(i))})}loadCustomer(t){this.isLoading.set(!0),this.customerService.getCustomerById(t).subscribe({next:i=>{i&&(this.customer.set(i),this.populateForm(i)),this.isLoading.set(!1)},error:i=>{console.error("Error loading customer:",i),this.isLoading.set(!1)}})}loadHistory(t){this.customerService.getCustomerHistory(t).subscribe({next:i=>{this.history.set(i)},error:i=>{console.error("Error loading customer history:",i)}})}loadMetrics(t){this.customerService.getCustomerMetrics(t).subscribe({next:i=>{this.metrics.set(i)},error:i=>{console.error("Error loading customer metrics:",i)}})}populateForm(t){this.editForm.patchValue({name:t.name,phone:t.phone,email:t.email||"",street:t.address?.street||"",city:t.address?.city||"",postalCode:t.address?.postalCode||"",country:t.address?.country||"Tunisia",status:t.status,preferredContactMethod:t.preferredContactMethod,notes:t.notes||""})}onBack(){this.router.navigate(["/customers"])}onEdit(){this.isEditing.set(!0)}onCancelEdit(){this.isEditing.set(!1);let t=this.customer();t&&this.populateForm(t)}onSave(){if(this.editForm.valid){let t=this.editForm.value,i={name:t.name,phone:t.phone,email:t.email||void 0,address:t.street||t.city?{street:t.street,city:t.city,postalCode:t.postalCode,country:t.country}:void 0,status:t.status,preferredContactMethod:t.preferredContactMethod,notes:t.notes||void 0};this.customerService.updateCustomer(this.customerId(),i).subscribe({next:a=>{this.customer.set(a),this.isEditing.set(!1)},error:a=>{console.error("Error updating customer:",a)}})}}onDelete(){confirm("Are you sure you want to delete this customer? This action cannot be undone.")&&this.customerService.deleteCustomer(this.customerId()).subscribe({next:t=>{t&&this.router.navigate(["/customers"])},error:t=>{console.error("Error deleting customer:",t)}})}onCreateAppointment(){this.router.navigate(["/appointments/create"],{queryParams:{customerId:this.customerId()}})}onCreateInvoice(){this.router.navigate(["/invoices/create"],{queryParams:{customerId:this.customerId()}})}onViewCar(t){this.router.navigate(["/cars",t])}onViewAppointment(t){this.router.navigate(["/appointments",t])}onViewInvoice(t){this.router.navigate(["/invoices",t])}getStatusBadgeClass(t){switch(t){case"active":return"badge badge-active";case"vip":return"badge badge-vip";case"inactive":return"badge badge-inactive";case"blocked":return"badge badge-blocked";default:return"badge badge-inactive"}}getLoyaltyTier(t){return t>=500?"Platinum":t>=250?"Gold":t>=100?"Silver":"Bronze"}getLoyaltyTierClass(t){switch(this.getLoyaltyTier(t)){case"Platinum":return"badge badge-platinum";case"Gold":return"badge badge-gold";case"Silver":return"badge badge-silver";case"Bronze":return"badge badge-bronze";default:return"badge badge-silver"}}formatCurrency(t){return new Intl.NumberFormat("fr-TN",{style:"currency",currency:"TND",minimumFractionDigits:2}).format(t)}formatDate(t){return new Intl.DateTimeFormat("fr-TN",{year:"numeric",month:"short",day:"numeric"}).format(t)}formatDateTime(t){return new Intl.DateTimeFormat("fr-TN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}getContactMethodIcon(t){switch(t){case"phone":return"\u{1F4DE}";case"email":return"\u2709\uFE0F";case"sms":return"\u{1F4AC}";case"whatsapp":return"\u{1F4F1}";default:return"\u{1F4DE}"}}getServiceStatusClass(t){switch(t){case"completed":return"text-green-600 dark:text-green-400";case"in-progress":return"text-blue-600 dark:text-blue-400";case"cancelled":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}}getPaymentStatusClass(t){switch(t){case"paid":return"text-green-600 dark:text-green-400";case"pending":return"text-yellow-600 dark:text-yellow-400";case"overdue":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}}getCustomerInitials(t){return t.split(" ").map(i=>i[0]).join("")}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=F({type:l,selectors:[["app-customer-details"]],decls:65,vars:18,consts:[["noCars",""],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"p-4","lg:p-6","border-b","border-gray-200","dark:border-gray-700"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"h-10","w-10","bg-white","bg-opacity-80","dark:bg-gray-800","dark:bg-opacity-80","backdrop-blur-sm","border","border-gray-200","dark:border-gray-700","rounded-lg","flex","items-center","justify-center","hover:bg-white","dark:hover:bg-gray-800","transition-all",3,"click"],[1,"text-gray-600","dark:text-gray-400"],[4,"ngIf"],[1,"flex","gap-2"],["class","px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",3,"click",4,"ngIf"],["class","px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg transition-colors",3,"disabled","click",4,"ngIf"],["class","px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",3,"click",4,"ngIf"],["class","px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",3,"click",4,"ngIf"],[1,"p-4","lg:p-6","space-y-6"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","bg-white","bg-opacity-80","dark:bg-gray-800","dark:bg-opacity-80","backdrop-blur-sm","rounded-xl","border","border-gray-200","dark:border-gray-700","p-6"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4"],["class","space-y-4",4,"ngIf"],["class","space-y-4",3,"formGroup",4,"ngIf"],[1,"bg-white","bg-opacity-80","dark:bg-gray-800","dark:bg-opacity-80","backdrop-blur-sm","rounded-xl","border","border-gray-200","dark:border-gray-700","p-6"],[1,"space-y-4"],[1,"text-center","p-4","bg-blue-50","dark:bg-blue-900/20","rounded-lg"],[1,"text-2xl","font-bold","text-blue-600","dark:text-blue-400"],[1,"text-sm","text-blue-700","dark:text-blue-300"],[1,"grid","grid-cols-2","gap-4"],[1,"text-center"],[1,"text-xl","font-bold","text-gray-900","dark:text-white"],[1,"text-xs","text-gray-600","dark:text-gray-400"],[1,"text-lg","font-bold","text-gray-900","dark:text-white"],["class","space-y-3 pt-4 border-t border-gray-200 dark:border-gray-700",4,"ngIf"],[1,"pt-4","border-t","border-gray-200","dark:border-gray-700","space-y-2"],[1,"w-full","px-4","py-2","bg-blue-600","hover:bg-blue-700","text-white","rounded-lg","transition-colors","text-sm",3,"click"],[1,"w-full","px-4","py-2","bg-green-600","hover:bg-green-700","text-white","rounded-lg","transition-colors","text-sm",3,"click"],[1,"bg-white","bg-opacity-80","dark:bg-gray-800","dark:bg-opacity-80","backdrop-blur-sm","rounded-xl","border","border-gray-200","dark:border-gray-700"],[1,"border-b","border-gray-200","dark:border-gray-700"],["aria-label","Tabs",1,"flex","space-x-8","px-6"],[1,"border-b-2","border-blue-500","py-4","px-1","text-sm","font-medium","text-blue-600","dark:text-blue-400"],[1,"border-b-2","border-transparent","py-4","px-1","text-sm","font-medium","text-gray-500","dark:text-gray-400","hover:text-gray-700","dark:hover:text-gray-300","hover:border-gray-300","dark:hover:border-gray-600"],[1,"p-6"],["class","space-y-4",4,"ngIf","ngIfElse"],["class","fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50",4,"ngIf"],[1,"text-xl","lg:text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"flex","items-center","gap-3","mt-1"],[1,"px-3","py-1","rounded-full","text-sm","font-medium"],[1,"px-3","py-1","rounded-lg","text-sm","font-medium"],[1,"px-4","py-2","bg-blue-600","hover:bg-blue-700","text-white","rounded-lg","transition-colors",3,"click"],[1,"px-4","py-2","bg-green-600","hover:bg-green-700","disabled:bg-gray-400","text-white","rounded-lg","transition-colors",3,"click","disabled"],[1,"px-4","py-2","bg-gray-600","hover:bg-gray-700","text-white","rounded-lg","transition-colors",3,"click"],[1,"px-4","py-2","bg-red-600","hover:bg-red-700","text-white","rounded-lg","transition-colors",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"text-gray-900","dark:text-white"],[1,"flex","items-center","gap-2"],[1,"space-y-4",3,"formGroup"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","text","formControlName","name",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-lg","bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["type","tel","formControlName","phone","placeholder","+216-XX-XXX-XXX",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-lg","bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["type","email","formControlName","email",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-lg","bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["formControlName","preferredContactMethod",1,"form-select"],["value","phone"],["value","email"],["value","sms"],["value","whatsapp"],[1,"text-md","font-medium","text-gray-900","dark:text-white"],[1,"md:col-span-2"],["type","text","formControlName","street",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-lg","bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["type","text","formControlName","city",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-lg","bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["type","text","formControlName","postalCode",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-lg","bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["formControlName","status",1,"form-select"],["value","active"],["value","vip"],["value","inactive"],["value","blocked"],["formControlName","notes","rows","3",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-lg","bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],[1,"space-y-3","pt-4","border-t","border-gray-200","dark:border-gray-700"],[1,"flex","justify-between","text-sm"],["class","flex items-center justify-between p-4 bg-gray-50 bg-opacity-80 dark:bg-gray-700 dark:bg-opacity-50 rounded-lg hover:bg-gray-100 hover:bg-opacity-80 dark:hover:bg-gray-700 dark:hover:bg-opacity-70 transition-all cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-4","bg-gray-50","bg-opacity-80","dark:bg-gray-700","dark:bg-opacity-50","rounded-lg","hover:bg-gray-100","hover:bg-opacity-80","dark:hover:bg-gray-700","dark:hover:bg-opacity-70","transition-all","cursor-pointer",3,"click"],[1,"h-12","w-12","bg-gradient-to-r","from-gray-500","to-gray-600","rounded-lg","flex","items-center","justify-center"],[1,"text-white","text-xl"],[1,"font-medium","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"text-xs","text-gray-500","dark:text-gray-500"],[1,"text-right"],[1,"font-semibold","text-gray-900","dark:text-white"],["class","text-xs text-gray-500 dark:text-gray-500",4,"ngIf"],[1,"text-center","py-8"],[1,"mx-auto","h-16","w-16","bg-gray-100","dark:bg-gray-800","rounded-full","flex","items-center","justify-center","mb-4"],[1,"text-gray-400","dark:text-gray-500","text-2xl"],[1,"fixed","inset-0","bg-black/20","backdrop-blur-sm","flex","items-center","justify-center","z-50"],[1,"bg-white","dark:bg-gray-800","rounded-xl","p-6","flex","items-center","gap-3"],[1,"animate-spin","h-5","w-5","border-2","border-blue-600","border-t-transparent","rounded-full"]],template:function(i,a){if(i&1){let s=E();r(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"button",5),_("click",function(){return f(s),v(a.onBack())}),r(5,"span",6),n(6,"\u2190"),e()(),y(7,ae,9,9,"div",7),e(),r(8,"div",8),y(9,oe,2,0,"button",9)(10,le,2,1,"button",10)(11,se,2,0,"button",11)(12,de,2,0,"button",12),e()()(),r(13,"div",13)(14,"div",14)(15,"div",15)(16,"h2",16),n(17,"Customer Information"),e(),y(18,ce,28,9,"div",17)(19,pe,59,1,"form",18),e(),r(20,"div",19)(21,"h2",16),n(22,"Customer Metrics"),e(),r(23,"div",20)(24,"div",21)(25,"p",22),n(26),e(),r(27,"p",23),n(28,"Total Spent"),e()(),r(29,"div",24)(30,"div",25)(31,"p",26),n(32),e(),r(33,"p",27),n(34,"Cars"),e()(),r(35,"div",25)(36,"p",26),n(37),e(),r(38,"p",27),n(39,"Visits"),e()()(),r(40,"div",25)(41,"p",28),n(42),e(),r(43,"p",27),n(44,"Loyalty Points"),e()(),y(45,ge,16,3,"div",29),r(46,"div",30)(47,"button",31),_("click",function(){return f(s),v(a.onCreateAppointment())}),n(48," \u{1F4C5} New Appointment "),e(),r(49,"button",32),_("click",function(){return f(s),v(a.onCreateInvoice())}),n(50," \u{1F9FE} Create Invoice "),e()()()()(),r(51,"div",33)(52,"div",34)(53,"nav",35)(54,"button",36),n(55),e(),r(56,"button",37),n(57),e(),r(58,"button",37),n(59),e()()(),r(60,"div",38),y(61,ye,2,1,"div",39)(62,fe,6,0,"ng-template",null,0,L),e()()(),y(64,ve,5,0,"div",40),e()}if(i&2){let s,d,h,p,S,x,I,N,ne=M(63);o(7),m("ngIf",a.customer()),o(2),m("ngIf",!a.isEditing()),o(),m("ngIf",a.isEditing()),o(),m("ngIf",a.isEditing()),o(),m("ngIf",!a.isEditing()),o(6),m("ngIf",!a.isEditing()),o(),m("ngIf",a.isEditing()),o(7),c((s=a.customer())!=null&&s.totalSpent?a.formatCurrency(a.customer().totalSpent):"0"),o(6),c(((d=a.customer())==null?null:d.totalCars)||0),o(5),c(((h=a.customer())==null?null:h.totalAppointments)||0),o(5),c(((p=a.customer())==null?null:p.loyaltyPoints)||0),o(3),m("ngIf",a.metrics()),o(10),g(" Cars (",((S=a.history())==null||S.cars==null?null:S.cars.length)||0,") "),o(2),g(" Appointments (",((x=a.history())==null||x.appointments==null?null:x.appointments.length)||0,") "),o(2),g(" Invoices (",((I=a.history())==null||I.invoices==null?null:I.invoices.length)||0,") "),o(2),m("ngIf",((N=a.history())==null?null:N.cars)&&a.history().cars.length>0)("ngIfElse",ne),o(3),m("ngIf",a.isLoading())}},dependencies:[R,j,B,G,X,ee,U,Q,Y,z,K,H,$,te,W,J],encapsulation:2})};export{ie as CustomerDetailsComponent};
