import{a as oe}from"./chunk-RCJI5TLB.js";import{b as J,c as E,d as K,e as Q,h as W,k as X,n as Y,o as Z,p as ee,q as te,u as ie,v as ne,w as re}from"./chunk-7OTNPXYV.js";import{b as ae,c as le}from"./chunk-T7UWPKEK.js";import{$a as H,A as h,B as L,C as P,Da as s,Ea as p,F as w,Ga as G,K as e,N as j,Oa as R,Pa as z,S as b,Ta as O,Za as $,ab as U,ba as u,ca as r,da as i,ea as _,fa as D,ga as y,ha as x,la as q,oa as V,pa as a,qa as m,ra as v,sa as I,ta as A,x as B,ya as S,z as C}from"./chunk-4Y4AIMEU.js";function me(o,t){if(o&1&&(r(0,"div",42)(1,"span",43),a(2),i(),r(3,"span",44),a(4),i()()),o&2){let n,l,c,d,g=x();e(),V(g.getStatusBadgeClass(((n=g.customer())==null?null:n.status)||"active")),e(),v(" ",g.getStatusLabel(((l=g.customer())==null?null:l.status)||"active")," "),e(),V(g.getLoyaltyTierClass(((c=g.customer())==null?null:c.loyaltyPoints)||0)),e(),v(" ",g.getLoyaltyTierLabel(((d=g.customer())==null?null:d.loyaltyPoints)||0)," ")}}function de(o,t){if(o&1){let n=D();r(0,"button",45),y("click",function(){C(n);let c=x();return h(c.onEdit())}),a(1),s(2,"translate"),i()}o&2&&(e(),v(" ",p(2,1,"customers.edit")," "))}function ce(o,t){if(o&1){let n=D();r(0,"button",46),y("click",function(){C(n);let c=x();return h(c.onSave())}),a(1),s(2,"translate"),i()}if(o&2){let n=x();u("disabled",!n.editForm.valid),e(),v(" ",p(2,2,"customers.save")," ")}}function ue(o,t){if(o&1){let n=D();r(0,"button",47),y("click",function(){C(n);let c=x();return h(c.onCancelEdit())}),a(1),s(2,"translate"),i()}o&2&&(e(),v(" ",p(2,1,"common.cancel")," "))}function xe(o,t){if(o&1){let n=D();r(0,"button",48),y("click",function(){C(n);let c=x();return h(c.onDelete())}),a(1),s(2,"translate"),i()}o&2&&(e(),v(" ",p(2,1,"customers.delete")," "))}function ve(o,t){if(o&1&&(r(0,"div")(1,"label",50),a(2),s(3,"translate"),i(),r(4,"p",51),a(5),_(6,"br"),a(7),_(8,"br"),a(9),i()()),o&2){let n,l,c,d=x(2);e(2),m(p(3,5,"customers.address")),e(3),v(" ",(n=d.customer())==null||n.address==null?null:n.address.street),e(2),I(" ",(l=d.customer())==null||l.address==null?null:l.address.city,", ",(l=d.customer())==null||l.address==null?null:l.address.postalCode),e(2),v(" ",(c=d.customer())==null||c.address==null?null:c.address.country," ")}}function ge(o,t){if(o&1&&(r(0,"div")(1,"label",50),a(2),s(3,"translate"),i(),r(4,"p",51),a(5),i()()),o&2){let n,l=x(2);e(2),m(p(3,2,"customers.additionalNotes")),e(3),m((n=l.customer())==null?null:n.notes)}}function fe(o,t){if(o&1&&(r(0,"div",22)(1,"div",49)(2,"div")(3,"label",50),a(4),s(5,"translate"),i(),r(6,"p",51),a(7),i()(),r(8,"div")(9,"label",50),a(10),s(11,"translate"),i(),r(12,"p",51),a(13),i()(),r(14,"div")(15,"label",50),a(16),s(17,"translate"),i(),r(18,"p",51),a(19),s(20,"translate"),i()(),r(21,"div")(22,"label",50),a(23),s(24,"translate"),i(),r(25,"div",52)(26,"span"),a(27),i(),r(28,"span",51),a(29),i()()()(),b(30,ve,10,7,"div",53)(31,ge,6,4,"div",53),i()),o&2){let n,l,c,d,g,k,T,f=x();e(4),m(p(5,11,"customers.fullName")),e(3),m((n=f.customer())==null?null:n.name),e(3),m(p(11,13,"customers.phoneNumber")),e(3),m((l=f.customer())==null?null:l.phone),e(3),m(p(17,15,"customers.email")),e(3),m(((c=f.customer())==null?null:c.email)||p(20,17,"customers.notProvided")),e(4),m(p(24,19,"customers.preferredContact")),e(4),m(f.getContactMethodIcon(((d=f.customer())==null?null:d.preferredContactMethod)||"phone")),e(2),m(f.getContactMethodLabel(((g=f.customer())==null?null:g.preferredContactMethod)||"phone")),e(),u("ngIf",(k=f.customer())==null?null:k.address),e(),u("ngIf",(T=f.customer())==null?null:T.notes)}}function be(o,t){o&1&&(r(0,"div",79)(1,"p",80),a(2),s(3,"translate"),i()()),o&2&&(e(2),m(p(3,1,"customers.form.errors.nameRequired")))}function _e(o,t){o&1&&(r(0,"div",79)(1,"p",80),a(2),s(3,"translate"),i()()),o&2&&(e(2),m(p(3,1,"customers.form.errors.phoneRequired")))}function Ce(o,t){o&1&&(r(0,"div",79)(1,"p",80),a(2),s(3,"translate"),i()()),o&2&&(e(2),m(p(3,1,"customers.form.errors.emailInvalid")))}function he(o,t){if(o&1&&(r(0,"form",54)(1,"div",49)(2,"div")(3,"label",55),a(4),s(5,"translate"),i(),_(6,"input",56),s(7,"translate"),b(8,be,4,3,"div",57),i(),r(9,"div")(10,"label",55),a(11),s(12,"translate"),i(),_(13,"input",58),s(14,"translate"),b(15,_e,4,3,"div",57),i(),r(16,"div")(17,"label",55),a(18),s(19,"translate"),i(),_(20,"input",59),s(21,"translate"),b(22,Ce,4,3,"div",57),i(),r(23,"div")(24,"label",55),a(25),s(26,"translate"),i(),r(27,"select",60)(28,"option",61),a(29),i(),r(30,"option",62),a(31),i(),r(32,"option",63),a(33),i(),r(34,"option",64),a(35),i()()()(),r(36,"div",65)(37,"h3",66),a(38),s(39,"translate"),i(),r(40,"div",49)(41,"div",67)(42,"label",55),a(43),s(44,"translate"),i(),_(45,"input",68),s(46,"translate"),i(),r(47,"div")(48,"label",55),a(49),s(50,"translate"),i(),_(51,"input",69),s(52,"translate"),i(),r(53,"div")(54,"label",55),a(55),s(56,"translate"),i(),_(57,"input",70),s(58,"translate"),i()()(),r(59,"div",71)(60,"div")(61,"label",55),a(62),s(63,"translate"),i(),r(64,"select",72)(65,"option",73),a(66),i(),r(67,"option",74),a(68),i(),r(69,"option",75),a(70),i(),r(71,"option",76),a(72),i()()()(),r(73,"div",77)(74,"label",55),a(75),s(76,"translate"),i(),_(77,"textarea",78),s(78,"translate"),i()()),o&2){let n,l,c,d=x();u("formGroup",d.editForm),e(4),v("",p(5,36,"customers.fullName")," *"),e(2),u("placeholder",S(p(7,38,"customers.form.fullNamePlaceholder"))),e(2),u("ngIf",((n=d.editForm.get("name"))==null?null:n.errors)&&((n=d.editForm.get("name"))==null?null:n.touched)),e(3),v("",p(12,40,"customers.phoneNumber")," *"),e(2),u("placeholder",S(p(14,42,"customers.form.phonePlaceholder"))),e(2),u("ngIf",((l=d.editForm.get("phone"))==null?null:l.errors)&&((l=d.editForm.get("phone"))==null?null:l.touched)),e(3),m(p(19,44,"customers.email")),e(2),u("placeholder",S(p(21,46,"customers.form.emailPlaceholder"))),e(2),u("ngIf",((c=d.editForm.get("email"))==null?null:c.errors)&&((c=d.editForm.get("email"))==null?null:c.touched)),e(3),v("",p(26,48,"customers.preferredContact")," *"),e(4),m(d.getContactMethodLabel("phone")),e(2),m(d.getContactMethodLabel("email")),e(2),m(d.getContactMethodLabel("sms")),e(2),m(d.getContactMethodLabel("whatsapp")),e(3),m(p(39,50,"customers.addressInformation")),e(5),m(p(44,52,"customers.streetAddress")),e(2),u("placeholder",S(p(46,54,"customers.streetPlaceholder"))),e(4),m(p(50,56,"customers.city")),e(2),u("placeholder",S(p(52,58,"customers.cityPlaceholder"))),e(4),m(p(56,60,"customers.postalCode")),e(2),u("placeholder",S(p(58,62,"customers.postalCodePlaceholder"))),e(5),v("",p(63,64,"customers.form.status")," *"),e(4),m(d.getStatusLabel("active")),e(2),m(d.getStatusLabel("vip")),e(2),m(d.getStatusLabel("inactive")),e(2),m(d.getStatusLabel("blocked")),e(3),m(p(76,66,"customers.additionalNotes")),e(2),u("placeholder",S(p(78,68,"customers.notesPlaceholder")))}}function ye(o,t){if(o&1&&(r(0,"div",81)(1,"div",82)(2,"span",83),a(3),s(4,"translate"),i(),r(5,"span",51),a(6),s(7,"translate"),i()(),r(8,"div",82)(9,"span",83),a(10),s(11,"translate"),i(),r(12,"span",51),a(13),i()(),r(14,"div",82)(15,"span",83),a(16),s(17,"translate"),i(),r(18,"span",51),a(19),i()()()),o&2){let n=x();e(3),m(p(4,7,"customers.customerFor")),e(3),I("",n.metrics().monthsSinceRegistration," ",p(7,9,"customers.months")),e(4),m(p(11,11,"customers.avgVisitsMonth")),e(3),m(n.metrics().appointmentsPerMonth),e(3),m(p(17,13,"customers.avgSpendMonth")),e(3),m(n.formatCurrency(n.metrics().revenuePerMonth))}}function Ie(o,t){if(o&1&&(r(0,"p",90),a(1),s(2,"translate"),i()),o&2){let n=x().$implicit,l=x(2);e(),I(" ",p(2,2,"customers.last")," ",l.formatDate(n.lastServiceDate)," ")}}function Se(o,t){if(o&1){let n=D();r(0,"div",85),y("click",function(){let c=C(n).$implicit,d=x(2);return h(d.onViewCar(c.id))}),r(1,"div",4)(2,"div",86)(3,"span",87),a(4,"\u{1F697}"),i()(),r(5,"div")(6,"p",88),a(7),i(),r(8,"p",89),a(9),i(),r(10,"p",90),a(11),s(12,"translate"),i()()(),r(13,"div",91)(14,"p",92),a(15),i(),r(16,"p",89),a(17),s(18,"translate"),i(),b(19,Ie,3,4,"p",93),i()()}if(o&2){let n=t.$implicit,l=x(2);e(7),A("",n.make," ",n.model," (",n.year,")"),e(2),m(n.licensePlate),e(2),I("",p(12,10,"customers.registered")," ",l.formatDate(n.registrationDate)),e(4),m(l.formatCurrency(n.totalSpent)),e(2),I("",n.totalServices," ",p(18,12,"customers.services")),e(2),u("ngIf",n.lastServiceDate)}}function Ee(o,t){if(o&1&&(r(0,"div",22),b(1,Se,20,14,"div",84),i()),o&2){let n,l=x();e(),u("ngForOf",(n=l.history())==null?null:n.cars)}}function we(o,t){o&1&&(r(0,"div",94)(1,"div",95)(2,"span",96),a(3,"\u{1F697}"),i()(),r(4,"p",83),a(5),s(6,"translate"),i()()),o&2&&(e(5),m(p(6,1,"customers.noCars")))}function De(o,t){o&1&&(r(0,"div",97)(1,"div",98),_(2,"div",99),r(3,"span",51),a(4),s(5,"translate"),i()()()),o&2&&(e(4),m(p(5,1,"customers.loadingDetails")))}var se=class o{route=B($);router=B(H);customerService=B(oe);translationService=B(ae);fb=B(ie);customer=w(null);history=w(null);metrics=w(null);isLoading=w(!1);isEditing=w(!1);editForm;customerId=w("");constructor(){this.editForm=this.fb.group({name:["",[E.required,E.minLength(2)]],phone:["",[E.required,E.pattern(/^\+216-[0-9]{2}-[0-9]{3}-[0-9]{3}$/)]],email:["",[E.email]],street:[""],city:[""],postalCode:[""],country:["Tunisia"],status:["active",E.required],preferredContactMethod:["phone",E.required],notes:[""]})}ngOnInit(){this.route.params.subscribe(t=>{let n=t.id;n&&(this.customerId.set(n),this.loadCustomer(n),this.loadHistory(n),this.loadMetrics(n))})}loadCustomer(t){this.isLoading.set(!0),this.customerService.getCustomerById(t).subscribe({next:n=>{n&&(this.customer.set(n),this.populateForm(n)),this.isLoading.set(!1)},error:n=>{console.error("Error loading customer:",n),this.isLoading.set(!1)}})}loadHistory(t){this.customerService.getCustomerHistory(t).subscribe({next:n=>{this.history.set(n)},error:n=>{console.error("Error loading customer history:",n)}})}loadMetrics(t){this.customerService.getCustomerMetrics(t).subscribe({next:n=>{this.metrics.set(n)},error:n=>{console.error("Error loading customer metrics:",n)}})}populateForm(t){this.editForm.patchValue({name:t.name,phone:t.phone,email:t.email||"",street:t.address?.street||"",city:t.address?.city||"",postalCode:t.address?.postalCode||"",country:t.address?.country||"Tunisia",status:t.status,preferredContactMethod:t.preferredContactMethod,notes:t.notes||""})}onBack(){this.router.navigate(["/customers"])}onEdit(){this.isEditing.set(!0)}onCancelEdit(){this.isEditing.set(!1);let t=this.customer();t&&this.populateForm(t)}onSave(){if(this.editForm.valid){let t=this.editForm.value,n={name:t.name,phone:t.phone,email:t.email||void 0,address:t.street||t.city?{street:t.street,city:t.city,postalCode:t.postalCode,country:t.country}:void 0,status:t.status,preferredContactMethod:t.preferredContactMethod,notes:t.notes||void 0};this.customerService.updateCustomer(this.customerId(),n).subscribe({next:l=>{this.customer.set(l),this.isEditing.set(!1)},error:l=>{console.error("Error updating customer:",l)}})}}onDelete(){confirm("Are you sure you want to delete this customer? This action cannot be undone.")&&this.customerService.deleteCustomer(this.customerId()).subscribe({next:t=>{t&&this.router.navigate(["/customers"])},error:t=>{console.error("Error deleting customer:",t)}})}onCreateAppointment(){this.router.navigate(["/appointments/create"],{queryParams:{customerId:this.customerId()}})}onCreateInvoice(){this.router.navigate(["/invoices/create"],{queryParams:{customerId:this.customerId()}})}onViewCar(t){this.router.navigate(["/cars",t])}onViewAppointment(t){this.router.navigate(["/appointments",t])}onViewInvoice(t){this.router.navigate(["/invoices",t])}getStatusBadgeClass(t){switch(t){case"active":return"badge badge-active";case"vip":return"badge badge-vip";case"inactive":return"badge badge-inactive";case"blocked":return"badge badge-blocked";default:return"badge badge-inactive"}}getLoyaltyTier(t){return t>=500?"Platinum":t>=250?"Gold":t>=100?"Silver":"Bronze"}getLoyaltyTierClass(t){switch(this.getLoyaltyTier(t)){case"Platinum":return"badge badge-platinum";case"Gold":return"badge badge-gold";case"Silver":return"badge badge-silver";case"Bronze":return"badge badge-bronze";default:return"badge badge-silver"}}formatCurrency(t){return new Intl.NumberFormat("fr-TN",{style:"currency",currency:"TND",minimumFractionDigits:2}).format(t)}formatDate(t){return new Intl.DateTimeFormat("fr-TN",{year:"numeric",month:"short",day:"numeric"}).format(t)}formatDateTime(t){return new Intl.DateTimeFormat("fr-TN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}getContactMethodIcon(t){switch(t){case"phone":return"\u{1F4DE}";case"email":return"\u2709\uFE0F";case"sms":return"\u{1F4AC}";case"whatsapp":return"\u{1F4F1}";default:return"\u{1F4DE}"}}getServiceStatusClass(t){switch(t){case"completed":return"text-green-600 dark:text-green-400";case"in-progress":return"text-blue-600 dark:text-blue-400";case"cancelled":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}}getPaymentStatusClass(t){switch(t){case"paid":return"text-green-600 dark:text-green-400";case"pending":return"text-yellow-600 dark:text-yellow-400";case"overdue":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}}getCustomerInitials(t){return t.split(" ").map(n=>n[0]).join("")}getStatusLabel(t){return this.translationService.instant(`customers.status.${t}`)}getLoyaltyTierLabel(t){let n=this.getLoyaltyTier(t).toLowerCase(),l={platinum:"platinum",gold:"gold",silver:"silver",bronze:"bronze"};return this.translationService.instant(`customers.loyaltyTiers.${l[n]}`)}getContactMethodLabel(t){return this.translationService.instant(`customers.form.contactMethods.${t}`)}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=j({type:o,selectors:[["app-customer-details"]],decls:80,vars:54,consts:[["noCars",""],[1,"min-h-screen","customer-details-container","p-4","lg:p-6",2,"background","var(--color-bg-primary)"],[1,"glass-card","mb-6"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"btn-tertiary","btn-icon",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-2xl","lg:text-3xl","font-bold","text-white"],["class","flex items-center gap-3 mt-1",4,"ngIf"],[1,"flex","gap-2"],["class","btn-tertiary",3,"click",4,"ngIf"],["class","btn-primary",3,"disabled","click",4,"ngIf"],["class","btn-secondary",3,"click",4,"ngIf"],["class","btn-danger",3,"click",4,"ngIf"],[1,"p-4","lg:p-6","space-y-6"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","glass-card"],[1,"text-lg","font-semibold","text-white","mb-4"],["class","space-y-4",4,"ngIf"],["class","space-y-4",3,"formGroup",4,"ngIf"],[1,"glass-card"],[1,"space-y-4"],[1,"text-center","p-4","bg-blue-500/20","rounded-lg","border","border-blue-400/30"],[1,"text-2xl","font-bold","text-blue-400"],[1,"text-sm","text-blue-300"],[1,"grid","grid-cols-2","gap-4"],[1,"text-center"],[1,"text-xl","font-bold","text-white"],[1,"text-xs","text-gray-400"],[1,"text-lg","font-bold","text-white"],["class","space-y-3 pt-4 border-t border-gray-600",4,"ngIf"],[1,"pt-4","border-t","border-gray-600","space-y-2"],[1,"btn-primary","w-full","text-sm",3,"click"],[1,"btn-success","w-full","text-sm",3,"click"],[1,"border-b","border-gray-600"],["aria-label","Tabs",1,"flex","space-x-8","px-6"],[1,"border-b-2","border-blue-400","py-4","px-1","text-sm","font-medium","text-blue-400"],[1,"border-b-2","border-transparent","py-4","px-1","text-sm","font-medium","text-gray-400","hover:text-gray-300","hover:border-gray-500"],[1,"p-6"],["class","space-y-4",4,"ngIf","ngIfElse"],["class","fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50",4,"ngIf"],[1,"flex","items-center","gap-3","mt-1"],[1,"badge"],[1,"badge","badge-sm"],[1,"btn-tertiary",3,"click"],[1,"btn-primary",3,"click","disabled"],[1,"btn-secondary",3,"click"],[1,"btn-danger",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-gray-300","mb-1"],[1,"text-white"],[1,"flex","items-center","gap-2"],[4,"ngIf"],[1,"space-y-4",3,"formGroup"],[1,"block","text-sm","font-medium","text-gray-300","mb-2"],["type","text","formControlName","name",1,"form-input",3,"placeholder"],["class","mt-1",4,"ngIf"],["type","tel","formControlName","phone",1,"form-input",3,"placeholder"],["type","email","formControlName","email",1,"form-input",3,"placeholder"],["formControlName","preferredContactMethod",1,"form-select"],["value","phone"],["value","email"],["value","sms"],["value","whatsapp"],[1,"space-y-4","border-t","border-gray-600","pt-4"],[1,"text-md","font-medium","text-white"],[1,"md:col-span-2"],["type","text","formControlName","street",1,"form-input",3,"placeholder"],["type","text","formControlName","city",1,"form-input",3,"placeholder"],["type","text","formControlName","postalCode",1,"form-input",3,"placeholder"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","border-t","border-gray-600","pt-4"],["formControlName","status",1,"form-select"],["value","active"],["value","vip"],["value","inactive"],["value","blocked"],[1,"border-t","border-gray-600","pt-4"],["formControlName","notes","rows","3",1,"form-input","resize-none",3,"placeholder"],[1,"mt-1"],[1,"text-sm","text-red-400"],[1,"space-y-3","pt-4","border-t","border-gray-600"],[1,"flex","justify-between","text-sm"],[1,"text-gray-400"],["class","flex items-center justify-between p-4 bg-gray-800/40 rounded-lg hover:bg-gray-700/50 transition-all cursor-pointer border border-gray-600/30",3,"click",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-4","bg-gray-800/40","rounded-lg","hover:bg-gray-700/50","transition-all","cursor-pointer","border","border-gray-600/30",3,"click"],[1,"h-12","w-12","bg-gradient-to-r","from-blue-500","to-blue-600","rounded-lg","flex","items-center","justify-center"],[1,"text-white","text-xl"],[1,"font-medium","text-white"],[1,"text-sm","text-gray-400"],[1,"text-xs","text-gray-500"],[1,"text-right"],[1,"font-semibold","text-white"],["class","text-xs text-gray-500",4,"ngIf"],[1,"text-center","py-8"],[1,"mx-auto","h-16","w-16","bg-gray-800/40","rounded-full","flex","items-center","justify-center","mb-4"],[1,"text-gray-500","text-2xl"],[1,"fixed","inset-0","bg-black/20","backdrop-blur-sm","flex","items-center","justify-center","z-50"],[1,"glass-card","flex","items-center","gap-3"],[1,"animate-spin","h-5","w-5","border-2","border-blue-400","border-t-transparent","rounded-full"]],template:function(n,l){if(n&1){let c=D();r(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4)(4,"button",5),y("click",function(){return C(c),h(l.onBack())}),L(),r(5,"svg",6),_(6,"path",7),i()(),P(),r(7,"div")(8,"h1",8),a(9),s(10,"translate"),i(),b(11,me,5,6,"div",9),i()(),r(12,"div",10),b(13,de,3,3,"button",11)(14,ce,3,4,"button",12)(15,ue,3,3,"button",13)(16,xe,3,3,"button",14),i()()(),r(17,"div",15)(18,"div",16)(19,"div",17)(20,"h2",18),a(21),s(22,"translate"),i(),b(23,fe,32,21,"div",19)(24,he,79,70,"form",20),i(),r(25,"div",21)(26,"h2",18),a(27),s(28,"translate"),i(),r(29,"div",22)(30,"div",23)(31,"p",24),a(32),i(),r(33,"p",25),a(34),s(35,"translate"),i()(),r(36,"div",26)(37,"div",27)(38,"p",28),a(39),i(),r(40,"p",29),a(41),s(42,"translate"),i()(),r(43,"div",27)(44,"p",28),a(45),i(),r(46,"p",29),a(47),s(48,"translate"),i()()(),r(49,"div",27)(50,"p",30),a(51),i(),r(52,"p",29),a(53),s(54,"translate"),i()(),b(55,ye,20,15,"div",31),r(56,"div",32)(57,"button",33),y("click",function(){return C(c),h(l.onCreateAppointment())}),a(58),s(59,"translate"),i(),r(60,"button",34),y("click",function(){return C(c),h(l.onCreateInvoice())}),a(61),s(62,"translate"),i()()()()(),r(63,"div",21)(64,"div",35)(65,"nav",36)(66,"button",37),a(67),s(68,"translate"),i(),r(69,"button",38),a(70),s(71,"translate"),i(),r(72,"button",38),a(73),s(74,"translate"),i()()(),r(75,"div",39),b(76,Ee,2,1,"div",40)(77,we,7,3,"ng-template",null,0,G),i()()(),b(79,De,6,3,"div",41),i()}if(n&2){let c,d,g,k,T,f,M,F,N,pe=q(78);e(9),v(" ",((c=l.customer())==null?null:c.name)||p(10,30,"customers.form.newCustomer")," "),e(2),u("ngIf",l.customer()),e(2),u("ngIf",!l.isEditing()),e(),u("ngIf",l.isEditing()),e(),u("ngIf",l.isEditing()),e(),u("ngIf",!l.isEditing()),e(5),m(p(22,32,"customers.customerInformation")),e(2),u("ngIf",!l.isEditing()),e(),u("ngIf",l.isEditing()),e(3),m(p(28,34,"customers.customerMetrics")),e(5),m((d=l.customer())!=null&&d.totalSpent?l.formatCurrency(l.customer().totalSpent):"0"),e(2),m(p(35,36,"customers.totalSpent")),e(5),m(((g=l.customer())==null?null:g.totalCars)||0),e(2),m(p(42,38,"customers.cars")),e(4),m(((k=l.customer())==null?null:k.totalAppointments)||0),e(2),m(p(48,40,"customers.visits")),e(4),m(((T=l.customer())==null?null:T.loyaltyPoints)||0),e(2),m(p(54,42,"customers.loyaltyPoints")),e(2),u("ngIf",l.metrics()),e(3),v(" \u{1F4C5} ",p(59,44,"customers.newAppointment")," "),e(3),v(" \u{1F9FE} ",p(62,46,"customers.createInvoice")," "),e(6),I(" ",p(68,48,"customers.cars")," (",((f=l.history())==null||f.cars==null?null:f.cars.length)||0,") "),e(3),I(" ",p(71,50,"appointments.title")," (",((M=l.history())==null||M.appointments==null?null:M.appointments.length)||0,") "),e(3),I(" ",p(74,52,"invoicing.title")," (",((F=l.history())==null||F.invoices==null?null:F.invoices.length)||0,") "),e(3),u("ngIf",((N=l.history())==null?null:N.cars)&&l.history().cars.length>0)("ngIfElse",pe),e(3),u("ngIf",l.isLoading())}},dependencies:[O,R,z,U,ne,W,ee,te,J,Z,K,Q,re,X,Y,le],encapsulation:2})};export{se as CustomerDetailsComponent};
