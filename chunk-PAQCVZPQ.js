import{a as me}from"./chunk-SDK3LLSF.js";import{b as N,c as T}from"./chunk-T7UWPKEK.js";import{b as le,d as ae,g as oe,o as re,p as se,q as pe,v as O}from"./chunk-7OTNPXYV.js";import{$ as C,$a as ie,A as k,B as f,Ba as Y,C as b,Da as s,Ea as p,F as B,Fa as P,Ia as Z,K as l,N as I,Pa as ee,Ra as te,S as K,T as D,Ta as F,X as x,Y as _,_ as Q,a as G,aa as E,ab as ne,ba as S,ca as i,da as a,ea as v,fa as A,ga as g,ha as y,ma as W,na as X,oa as h,pa as r,qa as d,ra as u,sa as $,va as V,wa as L,x as w,xa as j,z as M}from"./chunk-4Y4AIMEU.js";function ue(o,t){if(o&1&&(i(0,"div",25)(1,"span",26),r(2),s(3,"translate"),a(),i(4,"span",27),r(5),a()(),i(6,"div",28),v(7,"div",29),a()),o&2){let e=y();l(2),d(p(3,5,"employees.cardLabels.currentWorkload")),l(3),$("",e.employee.availability.currentWorkload,"/",e.employee.availability.maxWorkload),l(2),W("width",e.getWorkloadPercentage(e.employee),"%")}}function ye(o,t){if(o&1&&(i(0,"p",31),r(1),s(2,"date"),a()),o&2){let e=y(2);l(),u("Until: ",P(2,1,e.employee.availability.unavailableUntil,"short"))}}function ve(o,t){if(o&1&&(i(0,"p",30),r(1),a(),x(2,ye,3,4,"p",31)),o&2){let e=y();l(),d(e.employee.availability.unavailableReason),l(),_(e.employee.availability.unavailableUntil?2:-1)}}function ge(o,t){if(o&1&&(i(0,"span",18),r(1),a()),o&2){let e=t.$implicit;l(),u(" ",e," ")}}function fe(o,t){if(o&1&&(i(0,"span",19),r(1),a()),o&2){let e=y();l(),u(" +",e.employee.skills.specialties.length-3," more ")}}function xe(o,t){if(o&1&&(i(0,"div",20)(1,"div")(2,"p",26),r(3),s(4,"translate"),a(),i(5,"p",32),r(6),a()()()),o&2){let e=y();l(3),d(p(4,2,"employees.cardLabels.completedJobs")),l(3),d(e.employee.performance.completedJobs)}}function _e(o,t){o&1&&(f(),i(0,"svg",34),v(1,"path",35),a(),r(2),s(3,"translate")),o&2&&(l(2),u(" ",p(3,1,"employees.actions.markUnavailable")," "))}function be(o,t){o&1&&(f(),i(0,"svg",34),v(1,"path",36),a(),r(2),s(3,"translate")),o&2&&(l(2),u(" ",p(3,1,"employees.actions.markAvailable")," "))}function Ce(o,t){if(o&1){let e=A();i(0,"button",33),g("click",function(){M(e);let c=y();return k(c.toggleAvailability.emit({employeeId:c.employee.id,isAvailable:!c.employee.availability.isAvailable}))}),x(1,_e,4,3)(2,be,4,3),a()}if(o&2){let e=y();h(e.employee.availability.isAvailable?"btn-warning":"btn-success"),l(),_(e.employee.availability.isAvailable?1:2)}}var R=class o{employee;view="grid";edit=new D;viewDetails=new D;toggleAvailability=new D;getInitials(t){return t.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2)}getRoleLabel(t){return{admin:"Administrator","senior-mechanic":"Senior Mechanic","junior-mechanic":"Junior Mechanic",apprentice:"Apprentice","service-advisor":"Service Advisor"}[t]||t}getDepartmentLabel(t){return{management:"Management",mechanical:"Mechanical",bodywork:"Bodywork",electrical:"Electrical",service:"Service"}[t]||t}getStatusLabel(t){return{active:"Active",inactive:"Inactive","on-leave":"On Leave",terminated:"Terminated"}[t]||t}getStatusClasses(t){let e={active:"badge-active",inactive:"badge-inactive","on-leave":"badge-pending",terminated:"badge-cancelled"};return e[t]||e.inactive}getAvailabilityColor(t){return t?"bg-green-500":"bg-red-500"}getAvailabilityTextColor(t){return t?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}getWorkloadPercentage(t){return t.availability.maxWorkload===0?0:Math.round(t.availability.currentWorkload/t.availability.maxWorkload*100)}getStarArray(t){return Array(Math.floor(t)).fill(0)}formatCurrency(t){return new Intl.NumberFormat("fr-TN",{style:"currency",currency:"TND",minimumFractionDigits:0}).format(t)}translationService=w(N);getStatusTranslation(t){let e=t==="on-leave"?"onLeave":t;return this.translationService.instant(`employees.status.${e}`)}getAvailabilityTranslation(t){let e=t?"available":"unavailable";return this.translationService.instant(`employees.status.${e}`)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=I({type:o,selectors:[["app-employee-card"]],inputs:{employee:"employee",view:"view"},outputs:{edit:"edit",viewDetails:"viewDetails",toggleAvailability:"toggleAvailability"},decls:56,vars:42,consts:[[1,"glass-card"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-center","space-x-3"],[1,"w-12","h-12","bg-gradient-to-br","from-blue-500","to-purple-600","rounded-full","flex","items-center","justify-center","text-white","font-semibold","text-lg"],[1,"flex-1","min-w-0"],[1,"text-lg","font-semibold","text-white","truncate"],[1,"text-sm","text-gray-400"],[1,"badge"],[1,"grid","grid-cols-2","gap-4","mb-4"],[1,"text-xs","text-gray-400","uppercase","tracking-wide"],[1,"text-sm","font-medium","text-white"],[1,"mb-4"],[1,"flex","items-center","justify-between","mb-2"],[1,"flex","items-center"],[1,"w-2","h-2","rounded-full","mr-2"],[1,"text-sm","font-medium"],[1,"text-xs","text-gray-400","uppercase","tracking-wide","mb-2"],[1,"flex","flex-wrap","gap-1"],[1,"badge","badge-active"],[1,"badge","badge-inactive"],[1,"mb-4","text-sm"],[1,"flex","space-x-2"],[1,"flex-1","btn-tertiary","text-sm","justify-center",3,"click"],[1,"flex-1","btn-primary","text-sm","justify-center",3,"click"],[1,"btn-sm","text-xs","justify-center",3,"class"],[1,"flex","justify-between","text-sm","mb-1"],[1,"text-gray-400"],[1,"text-white"],[1,"w-full","bg-gray-700","rounded-full","h-2"],[1,"bg-gradient-to-r","from-blue-500","to-green-500","h-2","rounded-full","transition-all"],[1,"text-sm","text-gray-300"],[1,"text-xs","text-gray-400"],[1,"font-medium","text-white"],[1,"btn-sm","text-xs","justify-center",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-3","h-3","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),r(4),a(),i(5,"div",4)(6,"h3",5),r(7),a(),i(8,"p",6),r(9),a()()(),i(10,"span",7),r(11),s(12,"translate"),a()(),i(13,"div",8)(14,"div")(15,"p",9),r(16),s(17,"translate"),a(),i(18,"p",10),r(19),s(20,"translate"),a()(),i(21,"div")(22,"p",9),r(23),s(24,"translate"),a(),i(25,"p",10),r(26),a()()(),i(27,"div",11)(28,"div",12)(29,"span",9),r(30),s(31,"translate"),a(),i(32,"div",13),v(33,"div",14),i(34,"span",15),r(35),s(36,"translate"),a()()(),x(37,ue,8,7)(38,ve,3,2),a(),i(39,"div",11)(40,"p",16),r(41),s(42,"translate"),a(),i(43,"div",17),C(44,ge,2,1,"span",18,Q),x(46,fe,2,1,"span",19),a()(),x(47,xe,7,4,"div",20),i(48,"div",21)(49,"button",22),g("click",function(){return n.viewDetails.emit(n.employee.id)}),r(50),s(51,"translate"),a(),i(52,"button",23),g("click",function(){return n.edit.emit(n.employee.id)}),r(53),s(54,"translate"),a(),x(55,Ce,3,3,"button",24),a()()),e&2&&(l(4),u(" ",n.getInitials(n.employee.personalInfo.fullName)," "),l(3),u(" ",n.employee.personalInfo.fullName," "),l(2),$(" ",n.employee.employeeNumber," \u2022 ",n.getRoleLabel(n.employee.employment.role)," "),l(),h(n.getStatusClasses(n.employee.employment.status)),l(),u(" ",p(12,24,n.employee.employment.status==="on-leave"?"employees.status.onLeave":"employees.status."+n.employee.employment.status)," "),l(5),d(p(17,26,"employees.cardLabels.department")),l(3),d(p(20,28,"employees.departments."+n.employee.employment.department)),l(4),d(p(24,30,"employees.cardLabels.phone")),l(3),d(n.employee.personalInfo.phone),l(4),u(" ",p(31,32,"employees.cardLabels.availability")," "),l(3),h(n.getAvailabilityColor(n.employee.availability.isAvailable)),l(),h(n.getAvailabilityTextColor(n.employee.availability.isAvailable)),l(),u(" ",p(36,34,n.employee.availability.isAvailable?"employees.status.available":"employees.status.unavailable")," "),l(2),_(n.employee.availability.isAvailable?37:n.employee.availability.unavailableReason?38:-1),l(4),d(p(42,36,"employees.cardLabels.specialties")),l(3),E(n.employee.skills.specialties.slice(0,3)),l(2),_(n.employee.skills.specialties.length>3?46:-1),l(),_(n.view==="grid"?47:-1),l(3),u(" ",p(51,38,"employees.actions.viewDetails")," "),l(3),u(" ",p(54,40,"employees.actions.edit")," "),l(2),_(n.employee.employment.status==="active"?55:-1))},dependencies:[F,te,T],encapsulation:2})};var Ee=(o,t)=>t.department;function he(o,t){if(o&1&&(i(0,"div",19)(1,"div",2),v(2,"div",20),i(3,"span",21),r(4),s(5,"translate"),a()(),i(6,"div",22)(7,"span",23),r(8),a(),i(9,"div",24),v(10,"div",25),a()()()),o&2){let e=y().$implicit,n=y(2);l(2),h(n.getDepartmentColor(e.department)),l(2),d(p(5,8,"employees.departments."+e.department)),l(4),d(e.count),l(2),h(n.getDepartmentColor(e.department)),W("width",e.percentage,"%")}}function Se(o,t){if(o&1&&x(0,he,11,10,"div",19),o&2){let e=t.$implicit;_(e.count>0?0:-1)}}function we(o,t){if(o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),f(),i(5,"svg",5),v(6,"path",6),a()()(),b(),i(7,"div",7)(8,"p",8),r(9),s(10,"translate"),a(),i(11,"p",9),r(12),a()()()(),i(13,"div",1)(14,"div",2)(15,"div",3)(16,"div",10),f(),i(17,"svg",5),v(18,"path",11),a()()(),b(),i(19,"div",7)(20,"p",8),r(21),s(22,"translate"),a(),i(23,"p",9),r(24),a()()()(),i(25,"div",1)(26,"div",2)(27,"div",3)(28,"div",12),f(),i(29,"svg",5),v(30,"path",13),a()()(),b(),i(31,"div",7)(32,"p",8),r(33),s(34,"translate"),a(),i(35,"p",9),r(36),a()()()(),i(37,"div",1)(38,"div",2)(39,"div",3)(40,"div",14),f(),i(41,"svg",5),v(42,"path",15),a()()(),b(),i(43,"div",7)(44,"p",8),r(45),s(46,"translate"),a(),i(47,"p",9),r(48),a()()()()(),i(49,"div",16)(50,"h3",17),r(51),s(52,"translate"),a(),i(53,"div",18),C(54,Se,1,1,null,null,Ee),a()()),o&2){let e=y();l(9),d(p(10,9,"employees.stats.totalEmployees")),l(3),d(e.stats.totalEmployees),l(9),d(p(22,11,"employees.stats.active")),l(3),d(e.stats.activeEmployees),l(9),d(p(34,13,"employees.stats.availableNow")),l(3),d(e.stats.availableEmployees),l(9),d(p(46,15,"employees.stats.monthlyPayroll")),l(3),d(e.formatCurrency(e.stats.totalSalaryExpense)),l(3),d(p(52,17,"employees.stats.departmentDistribution")),l(3),E(e.getDepartmentEntries(e.stats))}}var H=class o{stats=null;formatCurrency(t){return new Intl.NumberFormat("fr-TN",{style:"currency",currency:"TND",minimumFractionDigits:0}).format(t)}getDepartmentEntries(t){let e=t.totalEmployees;return Object.entries(t.departmentDistribution).map(([n,c])=>({department:n,count:c,percentage:e>0?Math.round(c/e*100):0}))}getDepartmentLabel(t){return{management:"Management",mechanical:"Mechanical",bodywork:"Bodywork",electrical:"Electrical",service:"Service"}[t]||t}getDepartmentColor(t){return{management:"bg-purple-500",mechanical:"bg-blue-500",bodywork:"bg-green-500",electrical:"bg-yellow-500",service:"bg-orange-500"}[t]||"bg-gray-500"}translationService=w(N);getDepartmentTranslation(t){return this.translationService.instant(`employees.departments.${t}`)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=I({type:o,selectors:[["app-employee-stats"]],inputs:{stats:"stats"},decls:1,vars:1,consts:[[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"glass-card"],[1,"flex","items-center"],[1,"flex-shrink-0"],[1,"w-8","h-8","bg-blue-500","rounded-lg","flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-400"],[1,"text-2xl","font-semibold","text-white"],[1,"w-8","h-8","bg-green-500","rounded-lg","flex","items-center","justify-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-8","h-8","bg-purple-500","rounded-lg","flex","items-center","justify-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-8","h-8","bg-orange-500","rounded-lg","flex","items-center","justify-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"mt-6","glass-card"],[1,"text-lg","font-semibold","text-white","mb-4"],[1,"space-y-3"],[1,"flex","items-center","justify-between"],[1,"w-3","h-3","rounded-full","mr-3"],[1,"text-sm","font-medium","text-white"],[1,"flex","items-center","space-x-2"],[1,"text-sm","text-gray-400"],[1,"w-20","bg-gray-700","rounded-full","h-2"],[1,"h-2","rounded-full"]],template:function(e,n){e&1&&x(0,we,56,19),e&2&&_(n.stats?0:-1)},dependencies:[F,T],encapsulation:2})};var q=(o,t)=>t.value;function Me(o,t){if(o&1&&(i(0,"option",12),r(1),s(2,"translate"),a()),o&2){let e=t.$implicit;S("value",e.value),l(),d(p(2,2,"employees.roles."+e.value))}}function ke(o,t){if(o&1&&(i(0,"option",12),r(1),s(2,"translate"),a()),o&2){let e=t.$implicit;S("value",e.value),l(),d(p(2,2,"employees.departments."+e.value))}}function Ie(o,t){if(o&1&&(i(0,"option",12),r(1),s(2,"translate"),a()),o&2){let e=t.$implicit;S("value",e.value),l(),d(p(2,2,e.value==="on-leave"?"employees.status.onLeave":"employees.status."+e.value))}}var z=class o{filters={};filtersChange=new D;localFilters={};selectedRole="";selectedDepartment="";selectedStatus="";selectedAvailability="";roleOptions=[{value:"admin",label:"Administrator"},{value:"senior-mechanic",label:"Senior Mechanic"},{value:"junior-mechanic",label:"Junior Mechanic"},{value:"apprentice",label:"Apprentice"},{value:"service-advisor",label:"Service Advisor"}];departmentOptions=[{value:"management",label:"Management"},{value:"mechanical",label:"Mechanical"},{value:"bodywork",label:"Bodywork"},{value:"electrical",label:"Electrical"},{value:"service",label:"Service"}];statusOptions=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"on-leave",label:"On Leave"},{value:"terminated",label:"Terminated"}];ngOnInit(){this.localFilters=G({},this.filters),this.initializeSelectValues()}initializeSelectValues(){this.selectedRole=this.localFilters.role?.[0]||"",this.selectedDepartment=this.localFilters.department?.[0]||"",this.selectedStatus=this.localFilters.status?.[0]||"",this.selectedAvailability=this.localFilters.isAvailable!==void 0?String(this.localFilters.isAvailable):""}onFilterChange(){this.emitFilters()}onRoleChange(t){this.localFilters.role=t?[t]:void 0,this.emitFilters()}onDepartmentChange(t){this.localFilters.department=t?[t]:void 0,this.emitFilters()}onStatusChange(t){this.localFilters.status=t?[t]:void 0,this.emitFilters()}onAvailabilityChange(t){this.localFilters.isAvailable=t===""?void 0:t==="true",this.emitFilters()}clearFilters(){this.localFilters={},this.selectedRole="",this.selectedDepartment="",this.selectedStatus="",this.selectedAvailability="",this.emitFilters()}emitFilters(){this.filtersChange.emit(G({},this.localFilters))}translationService=w(N);getStatusTranslation(t){let e=t==="on-leave"?"onLeave":t;return this.translationService.instant(`employees.status.${e}`)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=I({type:o,selectors:[["app-employee-filters"]],inputs:{filters:"filters"},outputs:{filtersChange:"filtersChange"},decls:61,vars:47,consts:[[1,"glass-card"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-white"],[1,"btn-clear-filters",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-6","gap-4"],[1,"lg:col-span-2"],[1,"form-label"],["type","text",1,"form-input",3,"ngModelChange","placeholder","ngModel"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["value","true"],["value","false"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"h3",2),r(3),s(4,"translate"),a(),i(5,"button",3),g("click",function(){return n.clearFilters()}),f(),i(6,"svg",4),v(7,"path",5),a(),r(8),s(9,"translate"),a()(),b(),i(10,"div",6)(11,"div",7)(12,"label",8),r(13),s(14,"translate"),a(),i(15,"input",9),s(16,"translate"),j("ngModelChange",function(m){return L(n.localFilters.searchTerm,m)||(n.localFilters.searchTerm=m),m}),g("ngModelChange",function(){return n.onFilterChange()}),a()(),i(17,"div")(18,"label",8),r(19),s(20,"translate"),a(),i(21,"select",10),j("ngModelChange",function(m){return L(n.selectedRole,m)||(n.selectedRole=m),m}),g("ngModelChange",function(m){return n.onRoleChange(m)}),i(22,"option",11),r(23),s(24,"translate"),a(),C(25,Me,3,4,"option",12,q),a()(),i(27,"div")(28,"label",8),r(29),s(30,"translate"),a(),i(31,"select",10),j("ngModelChange",function(m){return L(n.selectedDepartment,m)||(n.selectedDepartment=m),m}),g("ngModelChange",function(m){return n.onDepartmentChange(m)}),i(32,"option",11),r(33),s(34,"translate"),a(),C(35,ke,3,4,"option",12,q),a()(),i(37,"div")(38,"label",8),r(39),s(40,"translate"),a(),i(41,"select",10),j("ngModelChange",function(m){return L(n.selectedStatus,m)||(n.selectedStatus=m),m}),g("ngModelChange",function(m){return n.onStatusChange(m)}),i(42,"option",11),r(43),s(44,"translate"),a(),C(45,Ie,3,4,"option",12,q),a()(),i(47,"div")(48,"label",8),r(49),s(50,"translate"),a(),i(51,"select",10),j("ngModelChange",function(m){return L(n.selectedAvailability,m)||(n.selectedAvailability=m),m}),g("ngModelChange",function(m){return n.onAvailabilityChange(m)}),i(52,"option",11),r(53),s(54,"translate"),a(),i(55,"option",13),r(56),s(57,"translate"),a(),i(58,"option",14),r(59),s(60,"translate"),a()()()()()),e&2&&(l(3),d(p(4,19,"employees.filters.title")),l(5),u(" ",p(9,21,"employees.filters.clearAll")," "),l(5),u(" ",p(14,23,"employees.filters.search")," "),l(2),S("placeholder",p(16,25,"employees.filters.searchPlaceholder")),V("ngModel",n.localFilters.searchTerm),l(4),u(" ",p(20,27,"employees.filters.role")," "),l(2),V("ngModel",n.selectedRole),l(2),d(p(24,29,"employees.filters.allRoles")),l(2),E(n.roleOptions),l(4),u(" ",p(30,31,"employees.filters.department")," "),l(2),V("ngModel",n.selectedDepartment),l(2),d(p(34,33,"employees.filters.allDepartments")),l(2),E(n.departmentOptions),l(4),u(" ",p(40,35,"employees.filters.status")," "),l(2),V("ngModel",n.selectedStatus),l(2),d(p(44,37,"employees.filters.allStatus")),l(2),E(n.statusOptions),l(4),u(" ",p(50,39,"employees.filters.availability")," "),l(2),V("ngModel",n.selectedAvailability),l(2),d(p(54,41,"employees.filters.all")),l(3),d(p(57,43,"employees.filters.available")),l(3),d(p(60,45,"employees.filters.unavailable")))},dependencies:[F,O,se,pe,le,re,ae,oe,T],encapsulation:2})};var Fe=o=>({count:o}),Te=(o,t)=>t.value,Be=(o,t)=>t.id;function Ae(o,t){if(o&1){let e=A();i(0,"app-employee-filters",20),g("filtersChange",function(c){M(e);let m=y();return k(m.onFiltersChange(c))}),a()}if(o&2){let e=y();S("filters",e.filters())}}function De(o,t){if(o&1){let e=A();i(0,"button",21),g("click",function(){let c=M(e).$implicit,m=y();return k(m.setView(c.value))}),r(1),s(2,"translate"),a()}if(o&2){let e=t.$implicit,n=y();h(n.currentView()===e.value?"bg-blue-600 text-white shadow-sm":"text-gray-400 hover:text-gray-200"),l(),u(" ",p(2,3,"employees."+e.value)," ")}}function Ve(o,t){if(o&1){let e=A();i(0,"div",18),f(),i(1,"svg",22),v(2,"path",23),a(),b(),i(3,"h3",24),r(4),s(5,"translate"),a(),i(6,"p",25),r(7),s(8,"translate"),a(),i(9,"div",26)(10,"button",9),g("click",function(){M(e);let c=y();return k(c.createNewEmployee())}),f(),i(11,"svg",6),v(12,"path",10),a(),r(13),s(14,"translate"),a()()()}o&2&&(l(4),d(p(5,3,"employees.noEmployeesFound")),l(3),d(p(8,5,"employees.noEmployeesDescription")),l(6),u(" ",p(14,7,"employees.addEmployee")," "))}function Le(o,t){if(o&1){let e=A();i(0,"app-employee-card",29),g("edit",function(c){M(e);let m=y(2);return k(m.editEmployee(c))})("viewDetails",function(c){M(e);let m=y(2);return k(m.viewEmployee(c))})("toggleAvailability",function(c){M(e);let m=y(2);return k(m.toggleEmployeeAvailability(c))}),a()}if(o&2){let e=t.$implicit,n=y(2);S("employee",e)("view",n.currentView())}}function je(o,t){if(o&1&&(i(0,"div",27),C(1,Le,1,2,"app-employee-card",28,Be),a()),o&2){let e=y();h(e.currentView()==="grid"?"grid-cols-1 lg:grid-cols-2 xl:grid-cols-3":"grid-cols-1"),l(),E(e.filteredEmployees())}}var de=class o{employeeService=w(me);router=w(ie);employees=B([]);stats=B(null);filters=B({});showFilters=B(!1);currentView=B("grid");loading=B(!1);viewOptions=[{value:"grid",label:"Grid"},{value:"list",label:"List"}];filteredEmployees=Z(()=>{let t=this.employees(),e=this.filters();return this.applyFilters(t,e)});ngOnInit(){this.loadEmployees(),this.loadStats()}loadEmployees(){this.loading.set(!0),this.employeeService.getEmployees(this.filters()).subscribe({next:t=>{this.employees.set(t),this.loading.set(!1)},error:t=>{console.error("Error loading employees:",t),this.loading.set(!1)}})}loadStats(){this.employeeService.getEmployeeStats().subscribe({next:t=>this.stats.set(t),error:t=>console.error("Error loading stats:",t)})}applyFilters(t,e){return t.filter(n=>{if(e.searchTerm){let c=e.searchTerm.toLowerCase();if(![n.personalInfo.fullName,n.personalInfo.email,n.employeeNumber,n.employment.role,n.employment.department,...n.skills.specialties].join(" ").toLowerCase().includes(c))return!1}return!(e.role&&e.role.length>0&&!e.role.includes(n.employment.role)||e.department&&e.department.length>0&&!e.department.includes(n.employment.department)||e.status&&e.status.length>0&&!e.status.includes(n.employment.status)||e.experienceLevel&&e.experienceLevel.length>0&&!e.experienceLevel.includes(n.skills.experienceLevel)||e.isAvailable!==void 0&&n.availability.isAvailable!==e.isAvailable)})}setView(t){this.currentView.set(t)}onFiltersChange(t){this.filters.set(t),this.loadEmployees()}createNewEmployee(){this.router.navigate(["/employees/new"])}editEmployee(t){this.router.navigate(["/employees/edit",t])}viewEmployee(t){this.router.navigate(["/employees/details",t])}toggleEmployeeAvailability(t){this.employeeService.updateEmployeeAvailability(t.employeeId,t.isAvailable,t.reason).subscribe({next:()=>this.loadEmployees(),error:e=>console.error("Error updating availability:",e)})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=I({type:o,selectors:[["app-employees"]],decls:34,vars:23,consts:[[1,"p-6","space-y-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between"],[1,"text-2xl","font-bold","text-white"],[1,"mt-1","text-sm","text-gray-300"],[1,"mt-4","sm:mt-0","flex","space-x-3"],[1,"btn-filter-toggle",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"],[1,"hidden","sm:inline"],[1,"btn-primary",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[3,"stats"],[3,"filters","filtersChange",4,"ngIf"],[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-white"],[1,"flex","bg-gray-800/30","rounded-lg","p-1"],[1,"px-3","py-1","text-sm","font-medium","rounded-md","transition-colors",3,"class"],[1,"text-center","py-12"],[1,"grid","gap-4",3,"class"],[3,"filtersChange","filters"],[1,"px-3","py-1","text-sm","font-medium","rounded-md","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"mt-2","text-sm","font-medium","text-white"],[1,"mt-1","text-sm","text-gray-400"],[1,"mt-6"],[1,"grid","gap-4"],[3,"employee","view"],[3,"edit","viewDetails","toggleAvailability","employee","view"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),r(4),s(5,"translate"),a(),i(6,"p",3),r(7),s(8,"translate"),a()(),i(9,"div",4)(10,"button",5),g("click",function(){return n.showFilters.set(!n.showFilters())}),f(),i(11,"svg",6),v(12,"path",7),a(),b(),i(13,"span",8),r(14),s(15,"translate"),a()(),i(16,"button",9),g("click",function(){return n.createNewEmployee()}),f(),i(17,"svg",6),v(18,"path",10),a(),b(),i(19,"span",8),r(20),s(21,"translate"),a()()()(),v(22,"app-employee-stats",11),K(23,Ae,1,1,"app-employee-filters",12),i(24,"div",13)(25,"div",14)(26,"h2",15),r(27),s(28,"translate"),a(),i(29,"div",16),C(30,De,3,5,"button",17,Te),a()(),x(32,Ve,15,9,"div",18)(33,je,3,2,"div",19),a()()),e&2&&(l(4),u(" ",p(5,10,"employees.title")," "),l(3),u(" ",p(8,12,"employees.subtitle")," "),l(3),X("active",n.showFilters()),l(4),d(p(15,14,"employees.filters.title")),l(6),d(p(21,16,"employees.addEmployee")),l(2),S("stats",n.stats()),l(),S("ngIf",n.showFilters()),l(4),u(" ",P(28,18,"employees.employeesCount",Y(21,Fe,n.filteredEmployees().length))," "),l(3),E(n.viewOptions),l(2),_(n.filteredEmployees().length===0?32:33))},dependencies:[F,ee,ne,O,T,R,H,z],encapsulation:2})};export{de as EmployeesComponent};
