import{a as Q}from"./chunk-MCJAP36K.js";import{a as q,b as B,c as m,d as V,e as L,h as R,i as W,k as $,n as z,o as j,p as G,q as H,r as J,s as U,u as Y,w as K}from"./chunk-2V6QG4GK.js";import{$ as f,A as N,B as _,C as M,F as k,K as l,N as O,Qa as P,Va as D,X as s,Xa as A,Y as p,a as F,aa as v,b as I,ba as b,ca as i,da as t,ea as d,fa as T,ga as h,ha as C,na as c,pa as n,qa as y,ra as E,x,z as w}from"./chunk-6MGQ6QS3.js";var g=(a,e)=>e.value;function ee(a,e){a&1&&(i(0,"p",16),n(1,"First name is required"),t())}function te(a,e){a&1&&(i(0,"p",16),n(1,"Last name is required"),t())}function ie(a,e){a&1&&(i(0,"p",16),n(1,"Phone number is required"),t())}function ne(a,e){a&1&&(i(0,"p",16),n(1,"Valid email is required"),t())}function ae(a,e){if(a&1&&(i(0,"option",25),n(1),t()),a&2){let o=e.$implicit;b("value",o.value),l(),y(o.label)}}function oe(a,e){a&1&&(i(0,"p",16),n(1,"Role is required"),t())}function le(a,e){if(a&1&&(i(0,"option",25),n(1),t()),a&2){let o=e.$implicit;b("value",o.value),l(),y(o.label)}}function re(a,e){a&1&&(i(0,"p",16),n(1,"Department is required"),t())}function me(a,e){if(a&1&&(i(0,"option",25),n(1),t()),a&2){let o=e.$implicit;b("value",o.value),l(),y(o.label)}}function de(a,e){a&1&&(i(0,"p",16),n(1,"Contract type is required"),t())}function se(a,e){a&1&&(i(0,"p",16),n(1,"Salary is required"),t())}function pe(a,e){a&1&&(i(0,"p",16),n(1,"Hire date is required"),t())}function ce(a,e){if(a&1&&(i(0,"option",25),n(1),t()),a&2){let o=e.$implicit;b("value",o.value),l(),y(o.label)}}function ue(a,e){a&1&&(i(0,"p",16),n(1,"Status is required"),t())}function be(a,e){if(a&1&&(i(0,"option",25),n(1),t()),a&2){let o=e.$implicit;b("value",o.value),l(),y(o.label)}}function fe(a,e){a&1&&(i(0,"p",16),n(1,"Experience level is required"),t())}function ve(a,e){if(a&1){let o=T();i(0,"label",34)(1,"input",43),h("change",function(u){let S=w(o).$implicit,Z=C();return N(Z.onSpecialtyChange(S.value,u))}),t(),i(2,"span",44),n(3),t()()}if(a&2){let o=e.$implicit;l(),b("value",o.value),l(2),y(o.label)}}function ye(a,e){if(a&1&&(_(),i(0,"svg",45),d(1,"circle",46)(2,"path",47),t(),n(3)),a&2){let o=C();l(3),E(" ",o.isEditMode?"Updating...":"Creating..."," ")}}function ge(a,e){if(a&1&&n(0),a&2){let o=C();E(" ",o.isEditMode?"Update Employee":"Create Employee"," ")}}var X=class a{fb=x(Y);employeeService=x(Q);router=x(A);route=x(D);employeeForm;isSubmitting=k(!1);isEditMode=!1;employeeId=null;roleOptions=[{value:"admin",label:"Administrator"},{value:"senior-mechanic",label:"Senior Mechanic"},{value:"junior-mechanic",label:"Junior Mechanic"},{value:"apprentice",label:"Apprentice"},{value:"service-advisor",label:"Service Advisor"}];departmentOptions=[{value:"management",label:"Management"},{value:"mechanical",label:"Mechanical"},{value:"bodywork",label:"Bodywork"},{value:"electrical",label:"Electrical"},{value:"service",label:"Service"}];statusOptions=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"on-leave",label:"On Leave"}];contractOptions=[{value:"full-time",label:"Full Time"},{value:"part-time",label:"Part Time"},{value:"contract",label:"Contract"},{value:"apprentice",label:"Apprentice"}];experienceOptions=[{value:"entry",label:"Entry Level"},{value:"junior",label:"Junior"},{value:"mid",label:"Mid Level"},{value:"senior",label:"Senior"},{value:"expert",label:"Expert"}];specialtyOptions=[{value:"oil-change",label:"Oil Change"},{value:"inspection",label:"Vehicle Inspection"},{value:"engine",label:"Engine Repair"},{value:"transmission",label:"Transmission"},{value:"brake-repair",label:"Brake Repair"},{value:"electrical",label:"Electrical Systems"},{value:"bodywork",label:"Bodywork"},{value:"painting",label:"Painting"},{value:"tires",label:"Tire Service"},{value:"air-conditioning",label:"Air Conditioning"},{value:"suspension",label:"Suspension"},{value:"diagnostics",label:"Vehicle Diagnostics"}];selectedSpecialties=k([]);ngOnInit(){this.initializeForm(),this.checkEditMode()}initializeForm(){this.employeeForm=this.fb.group({firstName:["",[m.required,m.minLength(2)]],lastName:["",[m.required,m.minLength(2)]],phone:["",[m.required,m.pattern(/^\+?[0-9\s-()]+$/)]],email:["",[m.required,m.email]],address:[""],dateOfBirth:[""],role:["",m.required],department:["",m.required],contractType:["",m.required],salary:[0,[m.required,m.min(0)]],hireDate:["",m.required],status:["active",m.required],experienceLevel:["junior",m.required],skillRating:[3,[m.min(1),m.max(5)]],certifications:[""],maxWorkload:[3,[m.min(1),m.max(10)]],isAvailable:[!0]})}checkEditMode(){this.employeeId=this.route.snapshot.paramMap.get("id"),this.isEditMode=!!this.employeeId,this.isEditMode&&this.employeeId&&this.loadEmployee(this.employeeId)}loadEmployee(e){this.employeeService.getEmployeeById(e).subscribe({next:o=>{o&&this.populateForm(o)},error:o=>{console.error("Error loading employee:",o),this.router.navigate(["/employees"])}})}populateForm(e){this.employeeForm.patchValue({firstName:e.personalInfo.firstName,lastName:e.personalInfo.lastName,phone:e.personalInfo.phone,email:e.personalInfo.email,address:e.personalInfo.address,dateOfBirth:e.personalInfo.dateOfBirth?.toISOString().split("T")[0],role:e.employment.role,department:e.employment.department,contractType:e.employment.contractType,salary:e.employment.salary,hireDate:e.employment.hireDate.toISOString().split("T")[0],status:e.employment.status,experienceLevel:e.skills.experienceLevel,skillRating:e.skills.skillRating,certifications:e.skills.certifications.join(`
`),maxWorkload:e.availability.maxWorkload,isAvailable:e.availability.isAvailable}),this.selectedSpecialties.set([...e.skills.specialties])}onSpecialtyChange(e,o){let r=o.target.checked,u=this.selectedSpecialties();r?this.selectedSpecialties.set([...u,e]):this.selectedSpecialties.set(u.filter(S=>S!==e))}isFieldInvalid(e){let o=this.employeeForm.get(e);return!!(o&&o.invalid&&(o.dirty||o.touched))}onSubmit(){if(this.employeeForm.valid){this.isSubmitting.set(!0);let e=this.employeeForm.value,o={personalInfo:{firstName:e.firstName,lastName:e.lastName,fullName:`${e.firstName} ${e.lastName}`,phone:e.phone,email:e.email,address:e.address||"",dateOfBirth:e.dateOfBirth?new Date(e.dateOfBirth):new Date},employment:{hireDate:new Date(e.hireDate),role:e.role,department:e.department,status:e.status,salary:e.salary,contractType:e.contractType,workingHours:this.getDefaultWorkingHours()},skills:{specialties:this.selectedSpecialties(),certifications:e.certifications?e.certifications.split(`
`).filter(u=>u.trim()):[],experienceLevel:e.experienceLevel,skillRating:e.skillRating||3},availability:{isAvailable:e.isAvailable,currentWorkload:0,maxWorkload:e.maxWorkload},performance:{completedJobs:0,averageJobDuration:0,customerRating:0,totalRevenue:0,efficiencyScore:0}};(this.isEditMode?this.employeeService.updateEmployee(this.employeeId,o):this.employeeService.createEmployee(o)).subscribe({next:()=>{this.isSubmitting.set(!1),this.router.navigate(["/employees"])},error:u=>{console.error("Error saving employee:",u),this.isSubmitting.set(!1)}})}}getDefaultWorkingHours(){let e={isWorkingDay:!0,startTime:"08:00",endTime:"17:00",breakStart:"12:00",breakEnd:"13:00"},o={isWorkingDay:!1,startTime:"",endTime:""};return{monday:e,tuesday:e,wednesday:e,thursday:e,friday:e,saturday:I(F({},e),{endTime:"14:00"}),sunday:o}}goBack(){this.router.navigate(["/employees"])}static \u0275fac=function(o){return new(o||a)};static \u0275cmp=O({type:a,selectors:[["app-employee-form"]],decls:142,vars:38,consts:[[1,"min-h-screen","p-4","lg:p-6","employee-form-container"],[1,"max-w-4xl","mx-auto"],[1,"mb-6"],[1,"flex","items-center","space-x-2","mb-2"],[1,"p-2","text-gray-400","hover:text-white","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-2xl","lg:text-3xl","font-bold","text-white"],[1,"text-sm","text-gray-300","ml-9"],[1,"glass-card"],[3,"ngSubmit","formGroup"],[1,"p-6","border-b","border-gray-700/50"],[1,"text-lg","font-semibold","text-white","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"form-label"],["type","text","formControlName","firstName",1,"form-input"],[1,"mt-1","text-sm","text-red-600","dark:text-red-400"],["type","text","formControlName","lastName",1,"form-input"],["type","tel","formControlName","phone","placeholder","+216 20 123 456",1,"form-input"],["type","email","formControlName","email","placeholder","employee@opauto.tn",1,"form-input"],[1,"md:col-span-2"],["type","text","formControlName","address","placeholder","Street address, city",1,"form-input"],["type","date","formControlName","dateOfBirth",1,"form-input"],["formControlName","role",1,"form-select"],["value",""],[3,"value"],["formControlName","department",1,"form-select"],["formControlName","contractType",1,"form-select"],["type","number","formControlName","salary","min","0","step","50",1,"form-input"],["type","date","formControlName","hireDate",1,"form-input"],["formControlName","status",1,"form-select"],["formControlName","experienceLevel",1,"form-select"],["type","number","formControlName","skillRating","min","1","max","5","step","0.1",1,"form-input"],[1,"space-y-2"],[1,"flex","items-center"],["formControlName","certifications","rows","3","placeholder","Enter each certification on a new line",1,"form-textarea"],[1,"p-6"],["type","number","formControlName","maxWorkload","min","1","max","10",1,"form-input"],["type","checkbox","formControlName","isAvailable",1,"form-checkbox"],[1,"ml-2","text-sm","font-medium","text-gray-300"],[1,"px-6","py-4","bg-gray-900/30","backdrop-blur-sm","rounded-b-xl","flex","justify-end","space-x-3"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],["type","checkbox",1,"form-checkbox",3,"change","value"],[1,"ml-2","text-sm","text-gray-300"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(o,r){o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),h("click",function(){return r.goBack()}),_(),i(5,"svg",5),d(6,"path",6),t()(),M(),i(7,"h1",7),n(8),t()(),i(9,"p",8),n(10),t()(),i(11,"div",9)(12,"form",10),h("ngSubmit",function(){return r.onSubmit()}),i(13,"div",11)(14,"h2",12),n(15,"Personal Information"),t(),i(16,"div",13)(17,"div")(18,"label",14),n(19,"First Name *"),t(),d(20,"input",15),s(21,ee,2,0,"p",16),t(),i(22,"div")(23,"label",14),n(24,"Last Name *"),t(),d(25,"input",17),s(26,te,2,0,"p",16),t(),i(27,"div")(28,"label",14),n(29,"Phone *"),t(),d(30,"input",18),s(31,ie,2,0,"p",16),t(),i(32,"div")(33,"label",14),n(34,"Email *"),t(),d(35,"input",19),s(36,ne,2,0,"p",16),t(),i(37,"div",20)(38,"label",14),n(39,"Address"),t(),d(40,"input",21),t(),i(41,"div")(42,"label",14),n(43,"Date of Birth"),t(),d(44,"input",22),t()()(),i(45,"div",11)(46,"h2",12),n(47,"Employment Details"),t(),i(48,"div",13)(49,"div")(50,"label",14),n(51,"Role *"),t(),i(52,"select",23)(53,"option",24),n(54,"Select role"),t(),f(55,ae,2,2,"option",25,g),t(),s(57,oe,2,0,"p",16),t(),i(58,"div")(59,"label",14),n(60,"Department *"),t(),i(61,"select",26)(62,"option",24),n(63,"Select department"),t(),f(64,le,2,2,"option",25,g),t(),s(66,re,2,0,"p",16),t(),i(67,"div")(68,"label",14),n(69,"Contract Type *"),t(),i(70,"select",27)(71,"option",24),n(72,"Select type"),t(),f(73,me,2,2,"option",25,g),t(),s(75,de,2,0,"p",16),t(),i(76,"div")(77,"label",14),n(78,"Monthly Salary (TND) *"),t(),d(79,"input",28),s(80,se,2,0,"p",16),t(),i(81,"div")(82,"label",14),n(83,"Hire Date *"),t(),d(84,"input",29),s(85,pe,2,0,"p",16),t(),i(86,"div")(87,"label",14),n(88,"Status *"),t(),i(89,"select",30)(90,"option",24),n(91,"Select status"),t(),f(92,ce,2,2,"option",25,g),t(),s(94,ue,2,0,"p",16),t()()(),i(95,"div",11)(96,"h2",12),n(97,"Skills & Experience"),t(),i(98,"div",13)(99,"div")(100,"label",14),n(101,"Experience Level *"),t(),i(102,"select",31)(103,"option",24),n(104,"Select level"),t(),f(105,be,2,2,"option",25,g),t(),s(107,fe,2,0,"p",16),t(),i(108,"div")(109,"label",14),n(110,"Skill Rating (1-5)"),t(),d(111,"input",32),t(),i(112,"div",20)(113,"label",14),n(114,"Specialties"),t(),i(115,"div",33),f(116,ve,4,2,"label",34,g),t()(),i(118,"div",20)(119,"label",14),n(120,"Certifications (one per line)"),t(),i(121,"textarea",35),n(122,"                "),t()()()(),i(123,"div",36)(124,"h2",12),n(125,"Availability Settings"),t(),i(126,"div",13)(127,"div")(128,"label",14),n(129,"Maximum Workload"),t(),d(130,"input",37),t(),i(131,"div")(132,"label",34),d(133,"input",38),i(134,"span",39),n(135,"Currently Available"),t()()()()(),i(136,"div",40)(137,"button",41),h("click",function(){return r.goBack()}),n(138," Cancel "),t(),i(139,"button",42),s(140,ye,4,1)(141,ge,1,1),t()()()()()()),o&2&&(l(8),E(" ",r.isEditMode?"Edit Employee":"Add New Employee"," "),l(2),E(" ",r.isEditMode?"Update employee information and settings":"Enter employee details and work configuration"," "),l(2),b("formGroup",r.employeeForm),l(8),c("border-red-500",r.isFieldInvalid("firstName")),l(),p(r.isFieldInvalid("firstName")?21:-1),l(4),c("border-red-500",r.isFieldInvalid("lastName")),l(),p(r.isFieldInvalid("lastName")?26:-1),l(4),c("border-red-500",r.isFieldInvalid("phone")),l(),p(r.isFieldInvalid("phone")?31:-1),l(4),c("border-red-500",r.isFieldInvalid("email")),l(),p(r.isFieldInvalid("email")?36:-1),l(16),c("border-red-500",r.isFieldInvalid("role")),l(3),v(r.roleOptions),l(2),p(r.isFieldInvalid("role")?57:-1),l(4),c("border-red-500",r.isFieldInvalid("department")),l(3),v(r.departmentOptions),l(2),p(r.isFieldInvalid("department")?66:-1),l(4),c("border-red-500",r.isFieldInvalid("contractType")),l(3),v(r.contractOptions),l(2),p(r.isFieldInvalid("contractType")?75:-1),l(4),c("border-red-500",r.isFieldInvalid("salary")),l(),p(r.isFieldInvalid("salary")?80:-1),l(4),c("border-red-500",r.isFieldInvalid("hireDate")),l(),p(r.isFieldInvalid("hireDate")?85:-1),l(4),c("border-red-500",r.isFieldInvalid("status")),l(3),v(r.statusOptions),l(2),p(r.isFieldInvalid("status")?94:-1),l(8),c("border-red-500",r.isFieldInvalid("experienceLevel")),l(3),v(r.experienceOptions),l(2),p(r.isFieldInvalid("experienceLevel")?107:-1),l(9),v(r.specialtyOptions),l(23),b("disabled",r.employeeForm.invalid||r.isSubmitting()),l(),p(r.isSubmitting()?140:141))},dependencies:[P,K,R,G,H,B,W,q,j,V,L,U,J,$,z],styles:[`.employee-form-container[_ngcontent-%COMP%]{background:transparent;min-height:100vh}.glass-card[_ngcontent-%COMP%]{background:#111827f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(75,85,99,.6);border-radius:20px;box-shadow:0 8px 32px #000000b3;transition:all .3s cubic-bezier(.4,0,.2,1)}.glass-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 40px #000c;border-color:#3b82f6b3}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#d1d5db;margin-bottom:.25rem}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{display:block;width:100%;padding:.75rem 1rem;border:1px solid rgba(75,85,99,.6);border-radius:12px;background:#1f293799;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);color:#f9fafb;font-size:.875rem;transition:all .2s ease}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#1f2937cc;box-shadow:0 0 0 3px #3b82f633}.form-select[_ngcontent-%COMP%]{appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 1rem center;background-size:1em;padding-right:2.5rem}.form-checkbox[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;background:#1f293799;border:1px solid rgba(75,85,99,.6);border-radius:.375rem;cursor:pointer;transition:all .2s ease}.form-checkbox[_ngcontent-%COMP%]:checked{background:linear-gradient(135deg,#3b82f6,#1d4ed8);border-color:#3b82f6}.form-checkbox[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #3b82f633}.btn-primary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.625rem 1.25rem;border-radius:12px;font-size:.875rem;font-weight:600;transition:all .2s ease;background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;border:1px solid rgba(59,130,246,.3);box-shadow:0 4px 15px #3b82f64d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2563eb,#1d4ed8);transform:translateY(-1px);box-shadow:0 6px 20px #3b82f666}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.btn-secondary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.625rem 1.25rem;border-radius:12px;font-size:.875rem;font-weight:500;transition:all .2s ease;background:#1f293799;color:#d1d5db;border:1px solid rgba(75,85,99,.6);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.btn-secondary[_ngcontent-%COMP%]:hover{background:#374151cc;border-color:#6b7280cc;transform:translateY(-1px)}.form-input.border-red-500[_ngcontent-%COMP%], .form-select.border-red-500[_ngcontent-%COMP%]{border-color:#ef4444!important;background:#ef44441a}`]})};export{X as EmployeeFormComponent};
