import{a as de}from"./chunk-S3MQPWKE.js";import{a as me}from"./chunk-UJO3757W.js";import{b as le,d as ae,h as oe,p as re,q as se,r as pe,y as W}from"./chunk-O3CTDYVO.js";import{b as N,c as B}from"./chunk-ECECQ7NF.js";import{e as ie,f as ne}from"./chunk-5NENZ4M5.js";import{$ as f,$a as v,Ab as p,Bb as P,Ca as T,Fb as Z,Ha as K,Ja as D,Sa as _,Ta as b,U as S,Va as Q,Wa as E,Xa as h,Xb as ee,Ya as w,Z as M,Za as i,_ as k,_a as a,_b as te,a as H,aa as C,ab as A,ac as F,bb as g,cb as y,ga as I,hb as z,ib as X,jb as x,kb as r,lb as d,mb as u,nb as G,qb as V,rb as L,sa as n,sb as j,xb as Y,zb as s}from"./chunk-DMTVNCDT.js";function ye(o,e){if(o&1&&(i(0,"div",25)(1,"span",26),r(2),s(3,"translate"),a(),i(4,"span",27),r(5),a()(),i(6,"div",28),v(7,"div",29),a()),o&2){let t=y();n(2),d(p(3,5,"employees.cardLabels.currentWorkload")),n(3),G("",t.employee.availability.currentWorkload,"/",t.employee.availability.maxWorkload),n(2),z("width",t.getWorkloadPercentage(t.employee),"%")}}function ve(o,e){if(o&1&&(i(0,"p",31),r(1),s(2,"date"),a()),o&2){let t=y(2);n(),u("Until: ",P(2,1,t.employee.availability.unavailableUntil,"short"))}}function ge(o,e){if(o&1&&(i(0,"p",30),r(1),a(),_(2,ve,3,4,"p",31)),o&2){let t=y();n(),d(t.employee.availability.unavailableReason),n(),b(t.employee.availability.unavailableUntil?2:-1)}}function fe(o,e){if(o&1&&(i(0,"span",18),r(1),a()),o&2){let t=e.$implicit;n(),u(" ",t," ")}}function xe(o,e){if(o&1&&(i(0,"span",19),r(1),a()),o&2){let t=y();n(),u(" +",t.employee.skills.specialties.length-3," more ")}}function _e(o,e){if(o&1&&(i(0,"div",20)(1,"div")(2,"p",26),r(3),s(4,"translate"),a(),i(5,"p",32),r(6),a()()()),o&2){let t=y();n(3),d(p(4,2,"employees.cardLabels.completedJobs")),n(3),d(t.employee.performance.completedJobs)}}function be(o,e){o&1&&(f(),i(0,"svg",34),v(1,"path",35),a(),r(2),s(3,"translate")),o&2&&(n(2),u(" ",p(3,1,"employees.actions.markUnavailable")," "))}function Ce(o,e){o&1&&(f(),i(0,"svg",34),v(1,"path",36),a(),r(2),s(3,"translate")),o&2&&(n(2),u(" ",p(3,1,"employees.actions.markAvailable")," "))}function Ee(o,e){if(o&1){let t=A();i(0,"button",33),g("click",function(){M(t);let c=y();return k(c.toggleAvailability.emit({employeeId:c.employee.id,isAvailable:!c.employee.availability.isAvailable}))}),_(1,be,4,3)(2,Ce,4,3),a()}if(o&2){let t=y();x(t.employee.availability.isAvailable?"btn-warning":"btn-success"),n(),b(t.employee.availability.isAvailable?1:2)}}var O=class o{employee;view="grid";edit=new D;viewDetails=new D;toggleAvailability=new D;getInitials(e){return e.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2)}getRoleLabel(e){return{admin:"Administrator","senior-mechanic":"Senior Mechanic","junior-mechanic":"Junior Mechanic",apprentice:"Apprentice","service-advisor":"Service Advisor"}[e]||e}getDepartmentLabel(e){return{management:"Management",mechanical:"Mechanical",bodywork:"Bodywork",electrical:"Electrical",service:"Service"}[e]||e}getStatusLabel(e){return{active:"Active",inactive:"Inactive","on-leave":"On Leave",terminated:"Terminated"}[e]||e}getStatusClasses(e){let t={active:"badge-active",inactive:"badge-inactive","on-leave":"badge-pending",terminated:"badge-cancelled"};return t[e]||t.inactive}getAvailabilityColor(e){return e?"bg-green-500":"bg-red-500"}getAvailabilityTextColor(e){return e?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}getWorkloadPercentage(e){return e.availability.maxWorkload===0?0:Math.round(e.availability.currentWorkload/e.availability.maxWorkload*100)}getStarArray(e){return Array(Math.floor(e)).fill(0)}formatCurrency(e){return new Intl.NumberFormat("fr-TN",{style:"currency",currency:"TND",minimumFractionDigits:0}).format(e)}translationService=S(N);getStatusTranslation(e){let t=e==="on-leave"?"onLeave":e;return this.translationService.instant(`employees.status.${t}`)}getAvailabilityTranslation(e){let t=e?"available":"unavailable";return this.translationService.instant(`employees.status.${t}`)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=T({type:o,selectors:[["app-employee-card"]],inputs:{employee:"employee",view:"view"},outputs:{edit:"edit",viewDetails:"viewDetails",toggleAvailability:"toggleAvailability"},decls:56,vars:42,consts:[[1,"glass-card"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-center","space-x-3"],[1,"w-12","h-12","bg-gradient-to-br","from-blue-500","to-purple-600","rounded-full","flex","items-center","justify-center","text-white","font-semibold","text-lg"],[1,"flex-1","min-w-0"],[1,"text-lg","font-semibold","text-white","truncate"],[1,"text-sm","text-gray-400"],[1,"badge"],[1,"grid","grid-cols-2","gap-4","mb-4"],[1,"text-xs","text-gray-400","uppercase","tracking-wide"],[1,"text-sm","font-medium","text-white"],[1,"mb-4"],[1,"flex","items-center","justify-between","mb-2"],[1,"flex","items-center"],[1,"w-2","h-2","rounded-full","mr-2"],[1,"text-sm","font-medium"],[1,"text-xs","text-gray-400","uppercase","tracking-wide","mb-2"],[1,"flex","flex-wrap","gap-1"],[1,"badge","badge-active"],[1,"badge","badge-inactive"],[1,"mb-4","text-sm"],[1,"flex","space-x-2"],[1,"flex-1","btn-tertiary","text-sm","justify-center",3,"click"],[1,"flex-1","btn-primary","text-sm","justify-center",3,"click"],[1,"btn-sm","text-xs","justify-center",3,"class"],[1,"flex","justify-between","text-sm","mb-1"],[1,"text-gray-400"],[1,"text-white"],[1,"w-full","bg-gray-700","rounded-full","h-2"],[1,"bg-gradient-to-r","from-blue-500","to-green-500","h-2","rounded-full","transition-all"],[1,"text-sm","text-gray-300"],[1,"text-xs","text-gray-400"],[1,"font-medium","text-white"],[1,"btn-sm","text-xs","justify-center",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-3","h-3","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(t,l){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),r(4),a(),i(5,"div",4)(6,"h3",5),r(7),a(),i(8,"p",6),r(9),a()()(),i(10,"span",7),r(11),s(12,"translate"),a()(),i(13,"div",8)(14,"div")(15,"p",9),r(16),s(17,"translate"),a(),i(18,"p",10),r(19),s(20,"translate"),a()(),i(21,"div")(22,"p",9),r(23),s(24,"translate"),a(),i(25,"p",10),r(26),a()()(),i(27,"div",11)(28,"div",12)(29,"span",9),r(30),s(31,"translate"),a(),i(32,"div",13),v(33,"div",14),i(34,"span",15),r(35),s(36,"translate"),a()()(),_(37,ye,8,7)(38,ge,3,2),a(),i(39,"div",11)(40,"p",16),r(41),s(42,"translate"),a(),i(43,"div",17),E(44,fe,2,1,"span",18,Q),_(46,xe,2,1,"span",19),a()(),_(47,_e,7,4,"div",20),i(48,"div",21)(49,"button",22),g("click",function(){return l.viewDetails.emit(l.employee.id)}),r(50),s(51,"translate"),a(),i(52,"button",23),g("click",function(){return l.edit.emit(l.employee.id)}),r(53),s(54,"translate"),a(),_(55,Ee,3,3,"button",24),a()()),t&2&&(n(4),u(" ",l.getInitials(l.employee.personalInfo.fullName)," "),n(3),u(" ",l.employee.personalInfo.fullName," "),n(2),G(" ",l.employee.employeeNumber," \u2022 ",l.getRoleLabel(l.employee.employment.role)," "),n(),x(l.getStatusClasses(l.employee.employment.status)),n(),u(" ",p(12,24,l.employee.employment.status==="on-leave"?"employees.status.onLeave":"employees.status."+l.employee.employment.status)," "),n(5),d(p(17,26,"employees.cardLabels.department")),n(3),d(p(20,28,"employees.departments."+l.employee.employment.department)),n(4),d(p(24,30,"employees.cardLabels.phone")),n(3),d(l.employee.personalInfo.phone),n(4),u(" ",p(31,32,"employees.cardLabels.availability")," "),n(3),x(l.getAvailabilityColor(l.employee.availability.isAvailable)),n(),x(l.getAvailabilityTextColor(l.employee.availability.isAvailable)),n(),u(" ",p(36,34,l.employee.availability.isAvailable?"employees.status.available":"employees.status.unavailable")," "),n(2),b(l.employee.availability.isAvailable?37:l.employee.availability.unavailableReason?38:-1),n(4),d(p(42,36,"employees.cardLabels.specialties")),n(3),h(l.employee.skills.specialties.slice(0,3)),n(2),b(l.employee.skills.specialties.length>3?46:-1),n(),b(l.view==="grid"?47:-1),n(3),u(" ",p(51,38,"employees.actions.viewDetails")," "),n(3),u(" ",p(54,40,"employees.actions.edit")," "),n(2),b(l.employee.employment.status==="active"?55:-1))},dependencies:[F,te,B],encapsulation:2})};var he=(o,e)=>e.department;function Se(o,e){if(o&1&&(i(0,"span",22),r(1),a()),o&2){let t=y(2);x(t.getUtilizationLimitColor()),n(),u("/ ",t.maxEmployees())}}function we(o,e){o&1&&(i(0,"span",11),r(1,"/ \u221E"),a())}function Me(o,e){if(o&1&&(i(0,"div",23)(1,"div",2),v(2,"div",24),i(3,"span",25),r(4),s(5,"translate"),a()(),i(6,"div",26)(7,"span",27),r(8),a(),i(9,"div",28),v(10,"div",29),a()()()),o&2){let t=y().$implicit,l=y(2);n(2),x(l.getDepartmentColor(t.department)),n(2),d(p(5,8,"employees.departments."+t.department)),n(4),d(t.count),n(2),x(l.getDepartmentColor(t.department)),z("width",t.percentage,"%")}}function ke(o,e){if(o&1&&_(0,Me,11,10,"div",23),o&2){let t=e.$implicit;b(t.count>0?0:-1)}}function Ie(o,e){if(o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),f(),i(5,"svg",5),v(6,"path",6),a()()(),C(),i(7,"div",7)(8,"p",8),r(9),s(10,"translate"),a(),i(11,"p",9),r(12),_(13,Se,2,3,"span",10)(14,we,2,0,"span",11),a()()()(),i(15,"div",1)(16,"div",2)(17,"div",3)(18,"div",12),f(),i(19,"svg",5),v(20,"path",13),a()()(),C(),i(21,"div",7)(22,"p",8),r(23),s(24,"translate"),a(),i(25,"p",14),r(26),a()()()(),i(27,"div",1)(28,"div",2)(29,"div",3)(30,"div",15),f(),i(31,"svg",5),v(32,"path",16),a()()(),C(),i(33,"div",7)(34,"p",8),r(35),s(36,"translate"),a(),i(37,"p",14),r(38),a()()()(),i(39,"div",1)(40,"div",2)(41,"div",3)(42,"div",17),f(),i(43,"svg",5),v(44,"path",18),a()()(),C(),i(45,"div",7)(46,"p",8),r(47),s(48,"translate"),a(),i(49,"p",14),r(50),a()()()()(),i(51,"div",19)(52,"h3",20),r(53),s(54,"translate"),a(),i(55,"div",21),E(56,ke,1,1,null,null,he),a()()),o&2){let t=y();n(4),x(t.getUtilizationIconColor()),n(5),d(p(10,14,"employees.stats.totalEmployees")),n(2),x(t.getUtilizationTextColor()),n(),u(" ",t.stats.totalEmployees," "),n(),b(t.maxEmployees()!==null?13:14),n(10),d(p(24,16,"employees.stats.active")),n(3),d(t.stats.activeEmployees),n(9),d(p(36,18,"employees.stats.availableNow")),n(3),d(t.stats.availableEmployees),n(9),d(p(48,20,"employees.stats.monthlyPayroll")),n(3),d(t.formatCurrency(t.stats.totalSalaryExpense)),n(3),d(p(54,22,"employees.stats.departmentDistribution")),n(3),h(t.getDepartmentEntries(t.stats))}}var R=class o{stats=null;subscriptionService=S(me);maxEmployees=I(null);ngOnInit(){this.subscriptionService.getCurrentSubscriptionStatus().subscribe(e=>{this.maxEmployees.set(e.currentTier.limits.users)})}formatCurrency(e){return new Intl.NumberFormat("fr-TN",{style:"currency",currency:"TND",minimumFractionDigits:0}).format(e)}getDepartmentEntries(e){let t=e.totalEmployees;return Object.entries(e.departmentDistribution).map(([l,c])=>({department:l,count:c,percentage:t>0?Math.round(c/t*100):0}))}getDepartmentLabel(e){return{management:"Management",mechanical:"Mechanical",bodywork:"Bodywork",electrical:"Electrical",service:"Service"}[e]||e}getDepartmentColor(e){return{management:"bg-purple-500",mechanical:"bg-blue-500",bodywork:"bg-green-500",electrical:"bg-yellow-500",service:"bg-orange-500"}[e]||"bg-gray-500"}translationService=S(N);getDepartmentTranslation(e){return this.translationService.instant(`employees.departments.${e}`)}getUtilizationPercentage(){if(!this.stats||this.maxEmployees()===null)return 0;let e=this.maxEmployees();return this.stats.totalEmployees/e*100}getUtilizationIconColor(){let e=this.getUtilizationPercentage();return this.maxEmployees()===null?"bg-blue-500":e>=100?"bg-red-500":e>=80?"bg-orange-500":e>=60?"bg-yellow-500":"bg-green-500"}getUtilizationTextColor(){let e=this.getUtilizationPercentage();return this.maxEmployees()===null?"text-white":e>=100?"text-red-400":e>=80?"text-orange-400":e>=60?"text-yellow-400":"text-white"}getUtilizationLimitColor(){let e=this.getUtilizationPercentage();return e>=100?"text-red-500":e>=80?"text-orange-500":e>=60?"text-yellow-500":"text-gray-400"}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=T({type:o,selectors:[["app-employee-stats"]],inputs:{stats:"stats"},decls:1,vars:1,consts:[[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"glass-card"],[1,"flex","items-center"],[1,"flex-shrink-0"],[1,"w-8","h-8","rounded-lg","flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-400"],[1,"text-2xl","font-semibold"],[1,"text-lg",3,"class"],[1,"text-gray-400","text-lg"],[1,"w-8","h-8","bg-green-500","rounded-lg","flex","items-center","justify-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-2xl","font-semibold","text-white"],[1,"w-8","h-8","bg-purple-500","rounded-lg","flex","items-center","justify-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-8","h-8","bg-orange-500","rounded-lg","flex","items-center","justify-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"mt-6","glass-card"],[1,"text-lg","font-semibold","text-white","mb-4"],[1,"space-y-3"],[1,"text-lg"],[1,"flex","items-center","justify-between"],[1,"w-3","h-3","rounded-full","mr-3"],[1,"text-sm","font-medium","text-white"],[1,"flex","items-center","space-x-2"],[1,"text-sm","text-gray-400"],[1,"w-20","bg-gray-700","rounded-full","h-2"],[1,"h-2","rounded-full"]],template:function(t,l){t&1&&_(0,Ie,58,24),t&2&&b(l.stats?0:-1)},dependencies:[F,B],encapsulation:2})};var q=(o,e)=>e.value;function Te(o,e){if(o&1&&(i(0,"option",12),r(1),s(2,"translate"),a()),o&2){let t=e.$implicit;w("value",t.value),n(),d(p(2,2,"employees.roles."+t.value))}}function Fe(o,e){if(o&1&&(i(0,"option",12),r(1),s(2,"translate"),a()),o&2){let t=e.$implicit;w("value",t.value),n(),d(p(2,2,"employees.departments."+t.value))}}function Be(o,e){if(o&1&&(i(0,"option",12),r(1),s(2,"translate"),a()),o&2){let t=e.$implicit;w("value",t.value),n(),d(p(2,2,t.value==="on-leave"?"employees.status.onLeave":"employees.status."+t.value))}}var U=class o{filters={};filtersChange=new D;localFilters={};selectedRole="";selectedDepartment="";selectedStatus="";selectedAvailability="";roleOptions=[{value:"admin",label:"Administrator"},{value:"senior-mechanic",label:"Senior Mechanic"},{value:"junior-mechanic",label:"Junior Mechanic"},{value:"apprentice",label:"Apprentice"},{value:"service-advisor",label:"Service Advisor"}];departmentOptions=[{value:"management",label:"Management"},{value:"mechanical",label:"Mechanical"},{value:"bodywork",label:"Bodywork"},{value:"electrical",label:"Electrical"},{value:"service",label:"Service"}];statusOptions=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"on-leave",label:"On Leave"},{value:"terminated",label:"Terminated"}];ngOnInit(){this.localFilters=H({},this.filters),this.initializeSelectValues()}initializeSelectValues(){this.selectedRole=this.localFilters.role?.[0]||"",this.selectedDepartment=this.localFilters.department?.[0]||"",this.selectedStatus=this.localFilters.status?.[0]||"",this.selectedAvailability=this.localFilters.isAvailable!==void 0?String(this.localFilters.isAvailable):""}onFilterChange(){this.emitFilters()}onRoleChange(e){this.localFilters.role=e?[e]:void 0,this.emitFilters()}onDepartmentChange(e){this.localFilters.department=e?[e]:void 0,this.emitFilters()}onStatusChange(e){this.localFilters.status=e?[e]:void 0,this.emitFilters()}onAvailabilityChange(e){this.localFilters.isAvailable=e===""?void 0:e==="true",this.emitFilters()}clearFilters(){this.localFilters={},this.selectedRole="",this.selectedDepartment="",this.selectedStatus="",this.selectedAvailability="",this.emitFilters()}emitFilters(){this.filtersChange.emit(H({},this.localFilters))}translationService=S(N);getStatusTranslation(e){let t=e==="on-leave"?"onLeave":e;return this.translationService.instant(`employees.status.${t}`)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=T({type:o,selectors:[["app-employee-filters"]],inputs:{filters:"filters"},outputs:{filtersChange:"filtersChange"},decls:61,vars:47,consts:[[1,"glass-card"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-white"],[1,"btn-clear-filters",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-6","gap-4"],[1,"lg:col-span-2"],[1,"form-label"],["type","text",1,"form-input",3,"ngModelChange","placeholder","ngModel"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["value","true"],["value","false"]],template:function(t,l){t&1&&(i(0,"div",0)(1,"div",1)(2,"h3",2),r(3),s(4,"translate"),a(),i(5,"button",3),g("click",function(){return l.clearFilters()}),f(),i(6,"svg",4),v(7,"path",5),a(),r(8),s(9,"translate"),a()(),C(),i(10,"div",6)(11,"div",7)(12,"label",8),r(13),s(14,"translate"),a(),i(15,"input",9),s(16,"translate"),j("ngModelChange",function(m){return L(l.localFilters.searchTerm,m)||(l.localFilters.searchTerm=m),m}),g("ngModelChange",function(){return l.onFilterChange()}),a()(),i(17,"div")(18,"label",8),r(19),s(20,"translate"),a(),i(21,"select",10),j("ngModelChange",function(m){return L(l.selectedRole,m)||(l.selectedRole=m),m}),g("ngModelChange",function(m){return l.onRoleChange(m)}),i(22,"option",11),r(23),s(24,"translate"),a(),E(25,Te,3,4,"option",12,q),a()(),i(27,"div")(28,"label",8),r(29),s(30,"translate"),a(),i(31,"select",10),j("ngModelChange",function(m){return L(l.selectedDepartment,m)||(l.selectedDepartment=m),m}),g("ngModelChange",function(m){return l.onDepartmentChange(m)}),i(32,"option",11),r(33),s(34,"translate"),a(),E(35,Fe,3,4,"option",12,q),a()(),i(37,"div")(38,"label",8),r(39),s(40,"translate"),a(),i(41,"select",10),j("ngModelChange",function(m){return L(l.selectedStatus,m)||(l.selectedStatus=m),m}),g("ngModelChange",function(m){return l.onStatusChange(m)}),i(42,"option",11),r(43),s(44,"translate"),a(),E(45,Be,3,4,"option",12,q),a()(),i(47,"div")(48,"label",8),r(49),s(50,"translate"),a(),i(51,"select",10),j("ngModelChange",function(m){return L(l.selectedAvailability,m)||(l.selectedAvailability=m),m}),g("ngModelChange",function(m){return l.onAvailabilityChange(m)}),i(52,"option",11),r(53),s(54,"translate"),a(),i(55,"option",13),r(56),s(57,"translate"),a(),i(58,"option",14),r(59),s(60,"translate"),a()()()()()),t&2&&(n(3),d(p(4,19,"employees.filters.title")),n(5),u(" ",p(9,21,"employees.filters.clearAll")," "),n(5),u(" ",p(14,23,"employees.filters.search")," "),n(2),w("placeholder",p(16,25,"employees.filters.searchPlaceholder")),V("ngModel",l.localFilters.searchTerm),n(4),u(" ",p(20,27,"employees.filters.role")," "),n(2),V("ngModel",l.selectedRole),n(2),d(p(24,29,"employees.filters.allRoles")),n(2),h(l.roleOptions),n(4),u(" ",p(30,31,"employees.filters.department")," "),n(2),V("ngModel",l.selectedDepartment),n(2),d(p(34,33,"employees.filters.allDepartments")),n(2),h(l.departmentOptions),n(4),u(" ",p(40,35,"employees.filters.status")," "),n(2),V("ngModel",l.selectedStatus),n(2),d(p(44,37,"employees.filters.allStatus")),n(2),h(l.statusOptions),n(4),u(" ",p(50,39,"employees.filters.availability")," "),n(2),V("ngModel",l.selectedAvailability),n(2),d(p(54,41,"employees.filters.all")),n(3),d(p(57,43,"employees.filters.available")),n(3),d(p(60,45,"employees.filters.unavailable")))},dependencies:[F,W,se,pe,le,re,ae,oe,B],encapsulation:2})};var Ae=o=>({count:o}),De=(o,e)=>e.value,Ve=(o,e)=>e.id;function Le(o,e){if(o&1){let t=A();i(0,"app-employee-filters",20),g("filtersChange",function(c){M(t);let m=y();return k(m.onFiltersChange(c))}),a()}if(o&2){let t=y();w("filters",t.filters())}}function je(o,e){if(o&1){let t=A();i(0,"button",21),g("click",function(){let c=M(t).$implicit,m=y();return k(m.setView(c.value))}),r(1),s(2,"translate"),a()}if(o&2){let t=e.$implicit,l=y();x(l.currentView()===t.value?"bg-blue-600 text-white shadow-sm":"text-gray-400 hover:text-gray-200"),n(),u(" ",p(2,3,"employees."+t.value)," ")}}function Ne(o,e){if(o&1){let t=A();i(0,"div",18),f(),i(1,"svg",22),v(2,"path",23),a(),C(),i(3,"h3",24),r(4),s(5,"translate"),a(),i(6,"p",25),r(7),s(8,"translate"),a(),i(9,"div",26)(10,"button",9),g("click",function(){M(t);let c=y();return k(c.createNewEmployee())}),f(),i(11,"svg",6),v(12,"path",10),a(),r(13),s(14,"translate"),a()()()}o&2&&(n(4),d(p(5,3,"employees.noEmployeesFound")),n(3),d(p(8,5,"employees.noEmployeesDescription")),n(6),u(" ",p(14,7,"employees.addEmployee")," "))}function ze(o,e){if(o&1){let t=A();i(0,"app-employee-card",29),g("edit",function(c){M(t);let m=y(2);return k(m.editEmployee(c))})("viewDetails",function(c){M(t);let m=y(2);return k(m.viewEmployee(c))})("toggleAvailability",function(c){M(t);let m=y(2);return k(m.toggleEmployeeAvailability(c))}),a()}if(o&2){let t=e.$implicit,l=y(2);w("employee",t)("view",l.currentView())}}function Pe(o,e){if(o&1&&(i(0,"div",27),E(1,ze,1,2,"app-employee-card",28,Ve),a()),o&2){let t=y();x(t.currentView()==="grid"?"grid-cols-1 lg:grid-cols-2 xl:grid-cols-3":"grid-cols-1"),n(),h(t.filteredEmployees())}}var ce=class o{employeeService=S(de);router=S(ie);employees=I([]);stats=I(null);filters=I({});showFilters=I(!1);currentView=I("grid");loading=I(!1);viewOptions=[{value:"grid",label:"Grid"},{value:"list",label:"List"}];filteredEmployees=Z(()=>{let e=this.employees(),t=this.filters();return this.applyFilters(e,t)});ngOnInit(){this.loadEmployees(),this.loadStats()}loadEmployees(){this.loading.set(!0),this.employeeService.getEmployees(this.filters()).subscribe({next:e=>{this.employees.set(e),this.loading.set(!1)},error:e=>{console.error("Error loading employees:",e),this.loading.set(!1)}})}loadStats(){this.employeeService.getEmployeeStats().subscribe({next:e=>this.stats.set(e),error:e=>console.error("Error loading stats:",e)})}applyFilters(e,t){return e.filter(l=>{if(t.searchTerm){let c=t.searchTerm.toLowerCase();if(![l.personalInfo.fullName,l.personalInfo.email,l.employeeNumber,l.employment.role,l.employment.department,...l.skills.specialties].join(" ").toLowerCase().includes(c))return!1}return!(t.role&&t.role.length>0&&!t.role.includes(l.employment.role)||t.department&&t.department.length>0&&!t.department.includes(l.employment.department)||t.status&&t.status.length>0&&!t.status.includes(l.employment.status)||t.experienceLevel&&t.experienceLevel.length>0&&!t.experienceLevel.includes(l.skills.experienceLevel)||t.isAvailable!==void 0&&l.availability.isAvailable!==t.isAvailable)})}setView(e){this.currentView.set(e)}onFiltersChange(e){this.filters.set(e),this.loadEmployees()}createNewEmployee(){this.router.navigate(["/employees/new"])}editEmployee(e){this.router.navigate(["/employees/edit",e])}viewEmployee(e){this.router.navigate(["/employees/details",e])}toggleEmployeeAvailability(e){this.employeeService.updateEmployeeAvailability(e.employeeId,e.isAvailable,e.reason).subscribe({next:()=>this.loadEmployees(),error:t=>console.error("Error updating availability:",t)})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=T({type:o,selectors:[["app-employees"]],decls:34,vars:23,consts:[[1,"p-6","space-y-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between"],[1,"text-2xl","font-bold","text-white"],[1,"mt-1","text-sm","text-gray-300"],[1,"mt-4","sm:mt-0","flex","space-x-3"],[1,"btn-filter-toggle",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"],[1,"hidden","sm:inline"],[1,"btn-primary",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[3,"stats"],[3,"filters","filtersChange",4,"ngIf"],[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-white"],[1,"flex","bg-gray-800/30","rounded-lg","p-1"],[1,"px-3","py-1","text-sm","font-medium","rounded-md","transition-colors",3,"class"],[1,"text-center","py-12"],[1,"grid","gap-4",3,"class"],[3,"filtersChange","filters"],[1,"px-3","py-1","text-sm","font-medium","rounded-md","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"mt-2","text-sm","font-medium","text-white"],[1,"mt-1","text-sm","text-gray-400"],[1,"mt-6"],[1,"grid","gap-4"],[3,"employee","view"],[3,"edit","viewDetails","toggleAvailability","employee","view"]],template:function(t,l){t&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),r(4),s(5,"translate"),a(),i(6,"p",3),r(7),s(8,"translate"),a()(),i(9,"div",4)(10,"button",5),g("click",function(){return l.showFilters.set(!l.showFilters())}),f(),i(11,"svg",6),v(12,"path",7),a(),C(),i(13,"span",8),r(14),s(15,"translate"),a()(),i(16,"button",9),g("click",function(){return l.createNewEmployee()}),f(),i(17,"svg",6),v(18,"path",10),a(),C(),i(19,"span",8),r(20),s(21,"translate"),a()()()(),v(22,"app-employee-stats",11),K(23,Le,1,1,"app-employee-filters",12),i(24,"div",13)(25,"div",14)(26,"h2",15),r(27),s(28,"translate"),a(),i(29,"div",16),E(30,je,3,5,"button",17,De),a()(),_(32,Ne,15,9,"div",18)(33,Pe,3,2,"div",19),a()()),t&2&&(n(4),u(" ",p(5,10,"employees.title")," "),n(3),u(" ",p(8,12,"employees.subtitle")," "),n(3),X("active",l.showFilters()),n(4),d(p(15,14,"employees.filters.title")),n(6),d(p(21,16,"employees.addEmployee")),n(2),w("stats",l.stats()),n(),w("ngIf",l.showFilters()),n(4),u(" ",P(28,18,"employees.employeesCount",Y(21,Ae,l.filteredEmployees().length))," "),n(3),h(l.viewOptions),n(2),b(l.filteredEmployees().length===0?32:33))},dependencies:[F,ee,ne,W,B,O,R,U],encapsulation:2})};export{ce as EmployeesComponent};
