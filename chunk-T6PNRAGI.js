import{C as n,P as b,a as s,b as m,j as d,m as u,n as p,q as o}from"./chunk-BYA6T2VX.js";var E=class c{mockEmployees=[{id:"emp-001",employeeNumber:"EMP001",personalInfo:{firstName:"Karim",lastName:"Mechanic",fullName:"Karim Mechanic",phone:"+216 20 123 456",email:"karim.mechanic@opauto.tn",address:"123 Rue de la Mecanique, Tunis",dateOfBirth:new Date("1985-03-15")},employment:{hireDate:new Date("2020-01-15"),role:"senior-mechanic",department:"mechanical",status:"active",salary:1200,contractType:"full-time",workingHours:{monday:{isWorkingDay:!0,startTime:"08:00",endTime:"17:00",breakStart:"12:00",breakEnd:"13:00"},tuesday:{isWorkingDay:!0,startTime:"08:00",endTime:"17:00",breakStart:"12:00",breakEnd:"13:00"},wednesday:{isWorkingDay:!0,startTime:"08:00",endTime:"17:00",breakStart:"12:00",breakEnd:"13:00"},thursday:{isWorkingDay:!0,startTime:"08:00",endTime:"17:00",breakStart:"12:00",breakEnd:"13:00"},friday:{isWorkingDay:!0,startTime:"08:00",endTime:"17:00",breakStart:"12:00",breakEnd:"13:00"},saturday:{isWorkingDay:!0,startTime:"08:00",endTime:"14:00"},sunday:{isWorkingDay:!1,startTime:"",endTime:""}}},skills:{specialties:["oil-change","inspection","engine","transmission"],certifications:["ASE Master Technician","Automotive Diagnostics"],experienceLevel:"senior",skillRating:4.5},availability:{isAvailable:!0,currentWorkload:2,maxWorkload:4},performance:{completedJobs:245,averageJobDuration:120,customerRating:4.7,totalRevenue:18500,efficiencyScore:92},createdAt:new Date("2020-01-15"),updatedAt:new Date},{id:"emp-002",employeeNumber:"EMP002",personalInfo:{firstName:"Slim",lastName:"Technician",fullName:"Slim Technician",phone:"+216 25 789 012",email:"slim.tech@opauto.tn",address:"456 Avenue Habib Bourguiba, Sfax",dateOfBirth:new Date("1990-07-22")},employment:{hireDate:new Date("2021-06-01"),role:"junior-mechanic",department:"mechanical",status:"active",salary:900,contractType:"full-time",workingHours:{monday:{isWorkingDay:!0,startTime:"08:00",endTime:"17:00",breakStart:"12:00",breakEnd:"13:00"},tuesday:{isWorkingDay:!0,startTime:"08:00",endTime:"17:00",breakStart:"12:00",breakEnd:"13:00"},wednesday:{isWorkingDay:!0,startTime:"08:00",endTime:"17:00",breakStart:"12:00",breakEnd:"13:00"},thursday:{isWorkingDay:!0,startTime:"08:00",endTime:"17:00",breakStart:"12:00",breakEnd:"13:00"},friday:{isWorkingDay:!0,startTime:"08:00",endTime:"17:00",breakStart:"12:00",breakEnd:"13:00"},saturday:{isWorkingDay:!1,startTime:"",endTime:""},sunday:{isWorkingDay:!1,startTime:"",endTime:""}}},skills:{specialties:["brake-repair","transmission","electrical"],certifications:["Brake Systems Certification"],experienceLevel:"mid",skillRating:3.8},availability:{isAvailable:!0,currentWorkload:1,maxWorkload:3},performance:{completedJobs:156,averageJobDuration:95,customerRating:4.3,totalRevenue:12400,efficiencyScore:85},createdAt:new Date("2021-06-01"),updatedAt:new Date},{id:"emp-003",employeeNumber:"EMP003",personalInfo:{firstName:"Hedi",lastName:"Expert",fullName:"Hedi Expert",phone:"+216 28 345 678",email:"hedi.expert@opauto.tn",address:"789 Rue Ibn Khaldoun, Sousse",dateOfBirth:new Date("1978-11-10")},employment:{hireDate:new Date("2018-03-01"),role:"senior-mechanic",department:"bodywork",status:"on-leave",salary:1400,contractType:"full-time",workingHours:{monday:{isWorkingDay:!0,startTime:"07:00",endTime:"16:00",breakStart:"12:00",breakEnd:"13:00"},tuesday:{isWorkingDay:!0,startTime:"07:00",endTime:"16:00",breakStart:"12:00",breakEnd:"13:00"},wednesday:{isWorkingDay:!0,startTime:"07:00",endTime:"16:00",breakStart:"12:00",breakEnd:"13:00"},thursday:{isWorkingDay:!0,startTime:"07:00",endTime:"16:00",breakStart:"12:00",breakEnd:"13:00"},friday:{isWorkingDay:!0,startTime:"07:00",endTime:"16:00",breakStart:"12:00",breakEnd:"13:00"},saturday:{isWorkingDay:!0,startTime:"08:00",endTime:"12:00"},sunday:{isWorkingDay:!1,startTime:"",endTime:""}}},skills:{specialties:["bodywork","painting","tires","dent-repair"],certifications:["Master Body Technician","Paint Certification","Frame Alignment"],experienceLevel:"expert",skillRating:4.9},availability:{isAvailable:!1,currentWorkload:0,maxWorkload:5,unavailableUntil:new Date("2024-02-15"),unavailableReason:"Medical Leave"},performance:{completedJobs:420,averageJobDuration:180,customerRating:4.8,totalRevenue:35200,efficiencyScore:96},createdAt:new Date("2018-03-01"),updatedAt:new Date},{id:"emp-004",employeeNumber:"EMP004",personalInfo:{firstName:"Fatma",lastName:"Admin",fullName:"Fatma Admin",phone:"+216 22 567 890",email:"fatma.admin@opauto.tn",address:"321 Avenue de la Liberte, Tunis",dateOfBirth:new Date("1982-05-08")},employment:{hireDate:new Date("2019-09-01"),role:"admin",department:"management",status:"active",salary:1600,contractType:"full-time",workingHours:{monday:{isWorkingDay:!0,startTime:"08:30",endTime:"17:30",breakStart:"12:30",breakEnd:"13:30"},tuesday:{isWorkingDay:!0,startTime:"08:30",endTime:"17:30",breakStart:"12:30",breakEnd:"13:30"},wednesday:{isWorkingDay:!0,startTime:"08:30",endTime:"17:30",breakStart:"12:30",breakEnd:"13:30"},thursday:{isWorkingDay:!0,startTime:"08:30",endTime:"17:30",breakStart:"12:30",breakEnd:"13:30"},friday:{isWorkingDay:!0,startTime:"08:30",endTime:"17:30",breakStart:"12:30",breakEnd:"13:30"},saturday:{isWorkingDay:!1,startTime:"",endTime:""},sunday:{isWorkingDay:!1,startTime:"",endTime:""}}},skills:{specialties:["administration","customer-service","scheduling"],certifications:["Management Certification","Customer Service Excellence"],experienceLevel:"senior",skillRating:4.6},availability:{isAvailable:!0,currentWorkload:1,maxWorkload:2},performance:{completedJobs:0,averageJobDuration:0,customerRating:4.9,totalRevenue:0,efficiencyScore:95},createdAt:new Date("2019-09-01"),updatedAt:new Date}];employeesSubject=new d(this.mockEmployees);employees$=this.employeesSubject.asObservable();getEmployees(a){return this.employees$.pipe(o(e=>this.applyFilters(e,a)),n(200))}getEmployeeById(a){return this.employees$.pipe(o(e=>e.find(t=>t.id===a)||null),n(100))}createEmployee(a){let e=m(s({id:`emp-${Date.now()}`,employeeNumber:`EMP${String(this.employeesSubject.value.length+1).padStart(3,"0")}`},a),{createdAt:new Date,updatedAt:new Date}),t=this.employeesSubject.value;return this.employeesSubject.next([...t,e]),u(e).pipe(n(300))}updateEmployee(a,e){let t=this.employeesSubject.value,r=t.findIndex(y=>y.id===a);if(r===-1)return p(()=>new Error("Employee not found"));let i=m(s(s({},t[r]),e),{updatedAt:new Date}),l=[...t];return l[r]=i,this.employeesSubject.next(l),u(i).pipe(n(300))}deleteEmployee(a){let e=this.employeesSubject.value,t=e.filter(r=>r.id!==a);return t.length===e.length?p(()=>new Error("Employee not found")):(this.employeesSubject.next(t),u(!0).pipe(n(200)))}getEmployeeStats(){return this.employees$.pipe(o(a=>({totalEmployees:a.length,activeEmployees:a.filter(t=>t.employment.status==="active").length,availableEmployees:a.filter(t=>t.availability.isAvailable&&t.employment.status==="active").length,onLeaveEmployees:a.filter(t=>t.employment.status==="on-leave").length,averageExperience:this.calculateAverageExperience(a),totalSalaryExpense:a.filter(t=>t.employment.status==="active").reduce((t,r)=>t+r.employment.salary,0),departmentDistribution:this.getDepartmentDistribution(a),roleDistribution:this.getRoleDistribution(a)})),n(150))}getEmployeePerformance(a,e="month"){return this.employees$.pipe(o(t=>{let r=t.find(i=>i.id===a);return r?{employeeId:r.id,employeeName:r.personalInfo.fullName,period:e,jobsCompleted:r.performance.completedJobs,averageJobTime:r.performance.averageJobDuration,customerSatisfaction:r.performance.customerRating,revenue:r.performance.totalRevenue,utilizationRate:r.availability.currentWorkload/r.availability.maxWorkload*100,qualityScore:r.performance.efficiencyScore}:null}),n(200))}updateEmployeeAvailability(a,e,t,r){let l=this.employeesSubject.value.find(y=>y.id===a);return l?this.updateEmployee(a,{availability:m(s({},l.availability),{isAvailable:e,unavailableReason:t,unavailableUntil:r})}):p(()=>new Error("Employee not found"))}updateEmployeeWorkload(a,e){let r=this.employeesSubject.value.find(l=>l.id===a);if(!r)return p(()=>new Error("Employee not found"));let i=Math.max(0,Math.min(r.availability.maxWorkload,r.availability.currentWorkload+e));return this.updateEmployee(a,{availability:m(s({},r.availability),{currentWorkload:i})})}getAvailableEmployeesBySpecialty(a){return this.employees$.pipe(o(e=>e.filter(t=>t.availability.isAvailable&&t.employment.status==="active"&&t.skills.specialties.includes(a)&&t.availability.currentWorkload<t.availability.maxWorkload)),n(100))}getMechanics(){return this.employees$.pipe(o(a=>a.filter(e=>e.employment.department==="mechanical"&&e.employment.status==="active").map(e=>({id:e.id,name:e.personalInfo.fullName,specialties:e.skills.specialties,isAvailable:e.availability.isAvailable,currentWorkload:e.availability.currentWorkload}))))}applyFilters(a,e){return e?a.filter(t=>{if(e.searchTerm){let r=e.searchTerm.toLowerCase();if(![t.personalInfo.fullName,t.personalInfo.email,t.employeeNumber,t.employment.role,t.employment.department,...t.skills.specialties].join(" ").toLowerCase().includes(r))return!1}return!(e.role&&e.role.length>0&&!e.role.includes(t.employment.role)||e.department&&e.department.length>0&&!e.department.includes(t.employment.department)||e.status&&e.status.length>0&&!e.status.includes(t.employment.status)||e.experienceLevel&&e.experienceLevel.length>0&&!e.experienceLevel.includes(t.skills.experienceLevel)||e.isAvailable!==void 0&&t.availability.isAvailable!==e.isAvailable)}):a}calculateAverageExperience(a){if(a.length===0)return 0;let e=a.reduce((t,r)=>{let i=new Date().getFullYear()-r.employment.hireDate.getFullYear();return t+i},0);return Math.round(e/a.length*10)/10}getDepartmentDistribution(a){let e={management:0,mechanical:0,bodywork:0,electrical:0,service:0};return a.forEach(t=>{e[t.employment.department]++}),e}getRoleDistribution(a){let e={admin:0,"senior-mechanic":0,"junior-mechanic":0,apprentice:0,"service-advisor":0};return a.forEach(t=>{e[t.employment.role]++}),e}static \u0275fac=function(e){return new(e||c)};static \u0275prov=b({token:c,factory:c.\u0275fac,providedIn:"root"})};export{E as a};
