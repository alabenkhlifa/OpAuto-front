import{a as H}from"./chunk-STG6HTKR.js";import{b as B}from"./chunk-KSNCH7NH.js";import{a as V,b as O,c,d as q,e as G,i as R,l as D,o as N,x as z,z as j}from"./chunk-O3CTDYVO.js";import{c as U}from"./chunk-ECECQ7NF.js";import{e as T}from"./chunk-5NENZ4M5.js";import{$ as u,$a as m,Ab as d,Ca as L,L as y,Sa as h,Ta as f,U as P,Ya as x,Z as S,Za as t,_ as F,_a as e,aa as b,ab as I,ac as A,bb as v,cb as C,ga as _,i as M,ib as k,kb as i,lb as p,mb as w,sa as r,tb as E,zb as l}from"./chunk-DMTVNCDT.js";function J(n,s){if(n&1&&(t(0,"div",20)(1,"div",44),u(),t(2,"svg",45),m(3,"path",46),e(),b(),t(4,"p",47),i(5),e()()()),n&2){let o=C();r(5),p(o.errorMessage())}}function K(n,s){n&1&&(t(0,"p",24),i(1),l(2,"translate"),e()),n&2&&(r(),p(d(2,1,"auth.login.emailOrUsernameRequired")))}function Q(n,s){n&1&&(u(),m(0,"path",29))}function W(n,s){n&1&&(u(),m(0,"path",48)(1,"path",49))}function X(n,s){n&1&&(t(0,"p",24),i(1),l(2,"translate"),e()),n&2&&(r(),p(d(2,1,"auth.login.passwordRequired")))}function Y(n,s){n&1&&(u(),t(0,"svg",50),m(1,"circle",51)(2,"path",52),e(),b(),t(3,"span"),i(4),l(5,"translate"),e()),n&2&&(r(4),p(d(5,1,"auth.login.signingIn")))}function Z(n,s){n&1&&(u(),t(0,"svg",53),m(1,"path",19),e(),b(),t(2,"span"),i(3),l(4,"translate"),e()),n&2&&(r(3),p(d(4,1,"auth.signIn")))}function ee(n,s){n&1&&(t(0,"p",24),i(1),l(2,"translate"),e()),n&2&&(r(),p(d(2,1,"auth.forgotPassword.emailRequired")))}function te(n,s){n&1&&(u(),t(0,"svg",70),m(1,"circle",51)(2,"path",52),e(),i(3),l(4,"translate")),n&2&&(r(3),w(" ",d(4,1,"auth.forgotPassword.sending")," "))}function ie(n,s){n&1&&(i(0),l(1,"translate")),n&2&&w(" ",d(1,1,"auth.forgotPassword.sendResetLink")," ")}function re(n,s){if(n&1){let o=I();t(0,"div",43)(1,"div",54)(2,"div",55),v("click",function(){S(o);let g=C();return F(g.closeForgotPassword())}),e(),t(3,"div",56)(4,"div",57)(5,"div",30)(6,"h2",58),i(7),l(8,"translate"),e(),t(9,"button",59),v("click",function(){S(o);let g=C();return F(g.closeForgotPassword())}),u(),t(10,"svg",60),m(11,"path",61),e()()()(),b(),t(12,"div",62)(13,"p",63),i(14),l(15,"translate"),e(),t(16,"form",64),v("ngSubmit",function(){S(o);let g=C();return F(g.onForgotPassword())}),t(17,"div",65)(18,"label",22),i(19),l(20,"translate"),e(),m(21,"input",66),l(22,"translate"),h(23,ee,3,3,"p",24),e(),t(24,"div",67)(25,"button",68),v("click",function(){S(o);let g=C();return F(g.closeForgotPassword())}),i(26),l(27,"translate"),e(),t(28,"button",69),h(29,te,5,3)(30,ie,2,3),e()()()()()()()}if(n&2){let o=C();r(7),p(d(8,12,"auth.forgotPassword.title")),r(7),w(" ",d(15,14,"auth.forgotPassword.description")," "),r(2),x("formGroup",o.forgotPasswordForm),r(3),p(d(20,16,"auth.forgotPassword.emailLabel")),r(2),k("border-red-500",o.isFieldInvalid("email",o.forgotPasswordForm)),x("placeholder",E(d(22,18,"auth.forgotPassword.emailPlaceholder"))),r(2),f(o.isFieldInvalid("email",o.forgotPasswordForm)?23:-1),r(3),w(" ",d(27,20,"auth.forgotPassword.cancel")," "),r(2),x("disabled",o.forgotPasswordForm.invalid||o.isLoading()),r(),f(o.isLoading()?29:30)}}var $=class n{fb=P(z);router=P(T);authService=P(B);destroy$=new M;isRegisterMode=_(!1);isLoading=_(!1);errorMessage=_("");showPassword=_(!1);showConfirmPassword=_(!1);showForgotPasswordModal=_(!1);loginForm;registerForm;forgotPasswordForm;ngOnInit(){this.initializeForms(),this.checkIfAlreadyAuthenticated()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForms(){this.loginForm=this.fb.group({emailOrUsername:["",[c.required]],password:["",[c.required]],rememberMe:[!1]}),this.registerForm=this.fb.group({name:["",[c.required,c.minLength(2)]],garageName:["",[c.required,c.minLength(2)]],phoneNumber:[""],email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]],confirmPassword:["",[c.required]],acceptTerms:[!1,[c.requiredTrue]]}),this.forgotPasswordForm=this.fb.group({email:["",[c.required,c.email]]}),this.registerForm.get("confirmPassword")?.valueChanges.pipe(y(this.destroy$)).subscribe(()=>{this.registerForm.get("confirmPassword")?.updateValueAndValidity({emitEvent:!1})})}checkIfAlreadyAuthenticated(){this.authService.isAuthenticated$.pipe(y(this.destroy$)).subscribe(s=>{s&&this.router.navigate(["/dashboard"])})}setMode(s){this.isRegisterMode.set(s),this.errorMessage.set(""),this.resetForms()}onLogin(){if(this.loginForm.valid&&!this.isLoading()){this.isLoading.set(!0),this.errorMessage.set("");let s={emailOrUsername:this.loginForm.get("emailOrUsername")?.value,password:this.loginForm.get("password")?.value,rememberMe:this.loginForm.get("rememberMe")?.value};this.authService.login(s).pipe(y(this.destroy$)).subscribe({next:o=>{this.isLoading.set(!1),this.router.navigate(["/dashboard"])},error:o=>{this.isLoading.set(!1),this.errorMessage.set(o.message)}})}}onRegister(){if(this.registerForm.valid&&!this.isLoading()){this.isLoading.set(!0),this.errorMessage.set("");let s={name:this.registerForm.get("name")?.value,garageName:this.registerForm.get("garageName")?.value,phoneNumber:this.registerForm.get("phoneNumber")?.value,email:this.registerForm.get("email")?.value,password:this.registerForm.get("password")?.value,confirmPassword:this.registerForm.get("confirmPassword")?.value,acceptTerms:this.registerForm.get("acceptTerms")?.value};this.authService.register(s).pipe(y(this.destroy$)).subscribe({next:o=>{this.isLoading.set(!1),this.router.navigate(["/dashboard"])},error:o=>{this.isLoading.set(!1),this.errorMessage.set(o.message)}})}}onForgotPassword(){if(this.forgotPasswordForm.valid&&!this.isLoading()){this.isLoading.set(!0);let s={email:this.forgotPasswordForm.get("email")?.value};this.authService.forgotPassword(s).pipe(y(this.destroy$)).subscribe({next:o=>{this.isLoading.set(!1),this.closeForgotPassword(),this.errorMessage.set(""),alert(o.message)},error:o=>{this.isLoading.set(!1),this.errorMessage.set(o.message)}})}}togglePasswordVisibility(){this.showPassword.set(!this.showPassword())}toggleConfirmPasswordVisibility(){this.showConfirmPassword.set(!this.showConfirmPassword())}showForgotPassword(){this.showForgotPasswordModal.set(!0),this.forgotPasswordForm.reset()}closeForgotPassword(){this.showForgotPasswordModal.set(!1),this.errorMessage.set("")}showTerms(){alert("Terms and Conditions would be displayed here")}showPrivacy(){alert("Privacy Policy would be displayed here")}isFieldInvalid(s,o){let a=o.get(s);return!!(a&&a.invalid&&(a.dirty||a.touched))}hasPasswordMismatch(){let s=this.registerForm.get("password")?.value,o=this.registerForm.get("confirmPassword")?.value;return!!(s&&o&&s!==o&&(this.registerForm.get("confirmPassword")?.dirty||this.registerForm.get("confirmPassword")?.touched))}resetForms(){this.loginForm.reset({rememberMe:!1}),this.registerForm.reset({acceptTerms:!1}),this.showPassword.set(!1),this.showConfirmPassword.set(!1)}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=L({type:n,selectors:[["app-auth"]],decls:113,vars:48,consts:[[1,"min-h-screen","flex","items-center","justify-center","p-4",2,"background","linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)"],[1,"absolute","inset-0","overflow-hidden","pointer-events-none"],[1,"absolute","-top-20","-right-20","w-40","h-40","bg-blue-600","rounded-full","opacity-10","blur-2xl"],[1,"absolute","-bottom-20","-left-20","w-40","h-40","bg-purple-600","rounded-full","opacity-10","blur-2xl"],[1,"absolute","top-20","left-20","w-40","h-40","bg-amber-600","rounded-full","opacity-10","blur-2xl"],[1,"relative","w-full","max-w-md"],[1,"glass-card","p-8"],[1,"relative","mb-8"],[1,"absolute","top-0","right-0"],[1,"flex","flex-col","items-center"],[1,"w-16","h-16","bg-gradient-to-br","from-blue-500","to-blue-600","rounded-xl","flex","items-center","justify-center","mb-4","shadow-lg"],["fill","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-white"],["d","M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.22.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"],[1,"text-center"],[1,"text-2xl","font-bold","text-white","mb-2"],[1,"text-gray-300"],[1,"backdrop-blur-sm","bg-slate-800","bg-opacity-50","rounded-lg","p-1","mb-6","border","border-slate-700"],[1,"py-3","px-4","text-sm","font-semibold","text-white","text-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","mr-2","inline"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],[1,"mb-4","p-3","backdrop-blur-sm","bg-red-900","bg-opacity-30","border","border-red-500","border-opacity-30","rounded-lg"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"form-label"],["type","text","formControlName","emailOrUsername","autocomplete","username",1,"form-input",3,"placeholder"],[1,"mt-1","text-sm","text-red-400"],[1,"relative"],["formControlName","password","autocomplete","current-password",1,"form-input","pr-10",3,"type","placeholder"],["type","button",1,"absolute","inset-y-0","right-0","pr-3","flex","items-center",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["type","checkbox","id","rememberMe","formControlName","rememberMe",1,"w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","rememberMe",1,"ml-2","text-sm","text-gray-300"],["type","button",1,"text-sm","text-blue-400","hover:text-blue-300",3,"click"],["type","submit",1,"w-full","btn-primary","btn-lg","flex","items-center","justify-center",3,"disabled"],[1,"mt-6","p-4","backdrop-blur-sm","bg-blue-900","bg-opacity-20","border","border-blue-500","border-opacity-30","rounded-lg"],[1,"text-sm","font-medium","text-blue-300","mb-3"],[1,"mb-3"],[1,"text-xs","font-semibold","text-blue-400","mb-1"],[1,"text-xs","text-blue-200","space-y-0.5","pl-3"],[1,"mt-6","text-center"],[1,"text-xs","text-gray-400"],[1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"flex","items-start"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-red-400","mt-0.5","mr-2","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"],[1,"text-sm","text-red-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-5","h-5","mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","mr-2"],[1,"flex","min-h-screen","items-center","justify-center","p-4"],[1,"fixed","inset-0","bg-black","bg-opacity-50","backdrop-blur-sm",3,"click"],[1,"relative","glass-card","backdrop-blur-lg","rounded-xl","max-w-md","w-full"],[1,"p-6","border-b","border-slate-700","border-opacity-50"],[1,"text-lg","font-semibold","text-white"],[1,"text-gray-400","hover:text-gray-200",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"text-gray-300","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["type","email","formControlName","email","autocomplete","email",1,"form-input",3,"placeholder"],[1,"flex","space-x-3"],["type","button",1,"flex-1","btn-secondary",3,"click"],["type","submit",1,"flex-1","btn-primary",3,"disabled"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4"]],template:function(o,a){o&1&&(t(0,"div",0)(1,"div",1),m(2,"div",2)(3,"div",3)(4,"div",4),e(),t(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),m(9,"app-language-toggle"),e(),t(10,"div",9)(11,"div",10),u(),t(12,"svg",11),m(13,"path",12),e()(),b(),t(14,"div",13)(15,"h1",14),i(16),l(17,"translate"),e(),t(18,"p",15),i(19),l(20,"translate"),e()()()(),t(21,"div",16)(22,"div",17),u(),t(23,"svg",18),m(24,"path",19),e(),i(25),l(26,"translate"),e()(),h(27,J,6,1,"div",20),b(),t(28,"form",21),v("ngSubmit",function(){return a.onLogin()}),t(29,"div")(30,"label",22),i(31),l(32,"translate"),e(),m(33,"input",23),l(34,"translate"),h(35,K,3,3,"p",24),e(),t(36,"div")(37,"label",22),i(38),l(39,"translate"),e(),t(40,"div",25),m(41,"input",26),l(42,"translate"),t(43,"button",27),v("click",function(){return a.togglePasswordVisibility()}),u(),t(44,"svg",28),h(45,Q,1,0,":svg:path",29)(46,W,2,0),e()()(),h(47,X,3,3,"p",24),e(),b(),t(48,"div",30)(49,"div",31),m(50,"input",32),t(51,"label",33),i(52),l(53,"translate"),e()(),t(54,"button",34),v("click",function(){return a.showForgotPassword()}),i(55),l(56,"translate"),e()(),t(57,"button",35),h(58,Y,6,3)(59,Z,5,3),e()(),t(60,"div",36)(61,"h3",37),i(62),l(63,"translate"),e(),t(64,"div",38)(65,"p",39),i(66,"\u{1F535} Solo (1 user, 50 cars)"),e(),t(67,"div",40)(68,"p")(69,"strong"),i(70,"Owner:"),e(),i(71," solo@opauto.tn / solo123"),e()()(),t(72,"div",38)(73,"p",39),i(74,"\u{1F7E2} Starter (3 users, 200 cars)"),e(),t(75,"div",40)(76,"p")(77,"strong"),i(78,"Owner:"),e(),i(79," starter@opauto.tn / starter123"),e(),t(80,"p")(81,"strong"),i(82,"Staff:"),e(),i(83," starter_staff1 / staff123"),e(),t(84,"p")(85,"strong"),i(86,"Staff:"),e(),i(87," starter_staff2 / staff123"),e()()(),t(88,"div")(89,"p",39),i(90,"\u{1F7E3} Professional (Unlimited)"),e(),t(91,"div",40)(92,"p")(93,"strong"),i(94,"Owner:"),e(),i(95," pro@opauto.tn / pro123"),e(),t(96,"p")(97,"strong"),i(98,"Mechanic:"),e(),i(99," pro_mechanic1 / staff123"),e(),t(100,"p")(101,"strong"),i(102,"Receptionist:"),e(),i(103," pro_receptionist / staff123"),e(),t(104,"p")(105,"strong"),i(106,"Inventory:"),e(),i(107," pro_inventory / staff123"),e()()()(),t(108,"div",41)(109,"p",42),i(110),l(111,"translate"),e()()()()(),h(112,re,31,22,"div",43)),o&2&&(r(16),p(d(17,26,"auth.title")),r(3),p(d(20,28,"auth.subtitle")),r(6),w(" ",d(26,30,"auth.signIn")," "),r(2),f(a.errorMessage()?27:-1),r(),x("formGroup",a.loginForm),r(3),p(d(32,32,"auth.login.emailOrUsernameLabel")),r(2),k("border-red-500",a.isFieldInvalid("emailOrUsername",a.loginForm)),x("placeholder",E(d(34,34,"auth.login.emailOrUsernamePlaceholder"))),r(2),f(a.isFieldInvalid("emailOrUsername",a.loginForm)?35:-1),r(3),p(d(39,36,"auth.login.passwordLabel")),r(3),k("border-red-500",a.isFieldInvalid("password",a.loginForm)),x("placeholder",E(d(42,38,"auth.login.passwordPlaceholder")))("type",a.showPassword()?"text":"password"),r(4),f(a.showPassword()?45:46),r(2),f(a.isFieldInvalid("password",a.loginForm)?47:-1),r(5),p(d(53,40,"auth.login.rememberMe")),r(3),w(" ",d(56,42,"auth.login.forgotPassword")," "),r(2),x("disabled",a.loginForm.invalid||a.isLoading()),r(),f(a.isLoading()?58:59),r(4),p(d(63,44,"auth.demo.title")),r(48),w(" ",d(111,46,"auth.footer.systemName")," "),r(2),f(a.showForgotPasswordModal()?112:-1))},dependencies:[A,j,R,O,V,q,G,D,N,U,H],styles:[".glass-card[_ngcontent-%COMP%]{background:#111827f2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:1px solid rgba(75,85,99,.6);border-radius:20px;box-shadow:0 8px 32px #000000b3;transition:all .3s cubic-bezier(.4,0,.2,1)}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#fff;margin-bottom:.5rem}.form-input[_ngcontent-%COMP%]{display:block;width:100%;padding:.875rem 1rem;border:1px solid rgba(75,85,99,.4);border-radius:12px;background:#1f293799;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);color:#fff;font-size:.875rem;transition:all .2s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f699;background:#1f2937cc;box-shadow:0 0 0 3px #3b82f61a}.form-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.backdrop-blur-lg[_ngcontent-%COMP%]{backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px)}*[_ngcontent-%COMP%]{transition:background-color .3s ease,border-color .3s ease,color .3s ease,transform .2s ease}"]})};export{$ as AuthComponent};
