import{a as R}from"./chunk-YPJIBZY7.js";import{$ as b,A as _,B as c,Ba as M,C as x,E as C,J as l,M as T,Na as B,Pa as H,Ua as V,W as g,Wa as F,X as v,Y as L,Z as w,_ as f,ba as t,ca as i,da as s,ea as A,fa as I,ga as p,la as j,na as E,oa as a,pa as m,qa as d,ra as h,x as S,z as k,za as D}from"./chunk-JES5V5RQ.js";var W=(r,n)=>n.key;function O(r,n){if(r&1&&(t(0,"div",20)(1,"span",8),a(2,"Address:"),i(),t(3,"span",56),a(4),i()()),r&2){let e=p(2);l(4),m(e.employee().personalInfo.address)}}function N(r,n){if(r&1&&(t(0,"p",58),a(1),D(2,"date"),i()),r&2){let e=p(3);l(),d("Until: ",M(2,1,e.employee().availability.unavailableUntil,"short"))}}function $(r,n){if(r&1&&(t(0,"div")(1,"span",8),a(2,"Reason:"),i(),t(3,"p",57),a(4),i(),g(5,N,3,4,"p",58),i()),r&2){let e=p(2);l(4),m(e.employee().availability.unavailableReason),l(),v(e.employee().availability.unavailableUntil?5:-1)}}function G(r,n){r&1&&(c(),t(0,"svg",37),s(1,"path",47),i())}function Y(r,n){if(r&1&&(t(0,"span",34),a(1),i()),r&2){let e=n.$implicit,o=p(2);l(),d(" ",o.getSpecialtyLabel(e)," ")}}function z(r,n){if(r&1&&(t(0,"div",25),c(),t(1,"svg",60),s(2,"path",61),i(),x(),t(3,"span",62),a(4),i()()),r&2){let e=n.$implicit;l(4),m(e)}}function J(r,n){if(r&1&&(t(0,"div")(1,"h3",33),a(2,"Certifications"),i(),t(3,"div",59),f(4,z,5,1,"div",25,w),i()()),r&2){let e=p(2);l(4),b(e.employee().skills.certifications)}}function U(r,n){if(r&1&&(t(0,"p",66),a(1),i()),r&2){let e=p(2).$implicit;l(),h("Break: ",e.schedule.breakStart," - ",e.schedule.breakEnd)}}function q(r,n){if(r&1&&(t(0,"div",64)(1,"p"),a(2),i(),g(3,U,2,2,"p",66),i()),r&2){let e=p().$implicit;l(2),h("",e.schedule.startTime," - ",e.schedule.endTime),l(),v(e.schedule.breakStart&&e.schedule.breakEnd?3:-1)}}function K(r,n){r&1&&(t(0,"span",65),a(1,"Off Day"),i())}function Q(r,n){if(r&1&&(t(0,"div",55)(1,"h3",63),a(2),i(),g(3,q,4,3,"div",64)(4,K,2,0,"span",65),i()),r&2){let e=n.$implicit;l(2),m(e.label),l(),v(e.schedule.isWorkingDay?3:4)}}function X(r,n){if(r&1){let e=A();t(0,"div",0)(1,"div",2)(2,"button",3),I("click",function(){k(e);let y=p();return _(y.goBack())}),c(),t(3,"svg",4),s(4,"path",5),i()(),x(),t(5,"div",6)(6,"h1",7),a(7),i(),t(8,"p",8),a(9),i()(),t(10,"button",9),I("click",function(){k(e);let y=p();return _(y.editEmployee())}),c(),t(11,"svg",10),s(12,"path",11),i(),a(13," Edit Employee "),i()(),x(),t(14,"div",12)(15,"div",13)(16,"h2",14),a(17,"Personal Information"),i(),t(18,"div",15)(19,"div",16)(20,"div",17),a(21),i(),t(22,"div")(23,"p",18),a(24),i(),t(25,"p",8),a(26),i()()(),t(27,"div",19)(28,"div",20)(29,"span",8),a(30,"Email:"),i(),t(31,"span",21),a(32),i()(),t(33,"div",20)(34,"span",8),a(35,"Phone:"),i(),t(36,"span",21),a(37),i()(),g(38,O,5,1,"div",20),t(39,"div",20)(40,"span",8),a(41,"Age:"),i(),t(42,"span",21),a(43),i()()()()(),t(44,"div",13)(45,"h2",14),a(46,"Employment Details"),i(),t(47,"div",15)(48,"div",20)(49,"span",8),a(50,"Role:"),i(),t(51,"span",21),a(52),i()(),t(53,"div",20)(54,"span",8),a(55,"Department:"),i(),t(56,"span",21),a(57),i()(),t(58,"div",20)(59,"span",8),a(60,"Status:"),i(),t(61,"span",22),a(62),i()(),t(63,"div",20)(64,"span",8),a(65,"Contract:"),i(),t(66,"span",21),a(67),i()(),t(68,"div",20)(69,"span",8),a(70,"Salary:"),i(),t(71,"span",21),a(72),i()(),t(73,"div",20)(74,"span",8),a(75,"Hire Date:"),i(),t(76,"span",21),a(77),D(78,"date"),i()(),t(79,"div",20)(80,"span",8),a(81,"Years of Service:"),i(),t(82,"span",21),a(83),i()()()(),t(84,"div",13)(85,"h2",14),a(86,"Availability"),i(),t(87,"div",23)(88,"div",24)(89,"span",8),a(90,"Status:"),i(),t(91,"div",25),s(92,"div",26),t(93,"span",27),a(94),i()()(),g(95,$,6,2,"div"),t(96,"div")(97,"div",28)(98,"span",29),a(99,"Current Workload"),i(),t(100,"span",18),a(101),i()(),t(102,"div",30),s(103,"div",31),i()()()()(),t(104,"div",32)(105,"div",13)(106,"h2",14),a(107,"Skills & Certifications"),i(),t(108,"div",23)(109,"div")(110,"h3",33),a(111,"Experience Level"),i(),t(112,"span",34),a(113),i()(),t(114,"div")(115,"h3",33),a(116,"Skill Rating"),i(),t(117,"div",35)(118,"div",36),f(119,G,2,0,":svg:svg",37,L),i(),t(121,"span",21),a(122),i()()(),t(123,"div")(124,"h3",33),a(125,"Specialties"),i(),t(126,"div",38),f(127,Y,2,1,"span",34,w),i()(),g(129,J,6,0,"div"),i()(),t(130,"div",13)(131,"h2",14),a(132,"Performance Metrics"),i(),t(133,"div",23)(134,"div",39)(135,"div",25)(136,"div",40),c(),t(137,"svg",41),s(138,"path",42),i()(),x(),t(139,"span",43),a(140,"Jobs Completed"),i()(),t(141,"span",44),a(142),i()(),t(143,"div",39)(144,"div",25)(145,"div",45),c(),t(146,"svg",46),s(147,"path",47),i()(),x(),t(148,"span",43),a(149,"Customer Rating"),i()(),t(150,"span",44),a(151),i()(),t(152,"div",39)(153,"div",25)(154,"div",48),c(),t(155,"svg",41),s(156,"path",49),i()(),x(),t(157,"span",43),a(158,"Total Revenue"),i()(),t(159,"span",44),a(160),i()(),t(161,"div",39)(162,"div",25)(163,"div",50),c(),t(164,"svg",41),s(165,"path",51),i()(),x(),t(166,"span",43),a(167,"Efficiency Score"),i()(),t(168,"span",44),a(169),i()(),t(170,"div",39)(171,"div",25)(172,"div",52),c(),t(173,"svg",41),s(174,"path",53),i()(),x(),t(175,"span",43),a(176,"Avg. Job Duration"),i()(),t(177,"span",44),a(178),i()()()()(),t(179,"div",13)(180,"h2",14),a(181,"Working Schedule"),i(),t(182,"div",54),f(183,Q,5,2,"div",55,W),i()()()}if(r&2){let e=p();l(7),d(" ",e.employee().personalInfo.fullName," "),l(2),h(" ",e.employee().employeeNumber," \u2022 ",e.getRoleLabel(e.employee().employment.role)," "),l(12),d(" ",e.getInitials(e.employee().personalInfo.fullName)," "),l(3),m(e.employee().personalInfo.fullName),l(2),m(e.employee().employeeNumber),l(6),m(e.employee().personalInfo.email),l(5),m(e.employee().personalInfo.phone),l(),v(e.employee().personalInfo.address?38:-1),l(5),d("",e.getAge(e.employee().personalInfo.dateOfBirth)," years"),l(9),m(e.getRoleLabel(e.employee().employment.role)),l(5),m(e.getDepartmentLabel(e.employee().employment.department)),l(4),E(e.getStatusClasses(e.employee().employment.status)),l(),d(" ",e.getStatusLabel(e.employee().employment.status)," "),l(5),m(e.getContractLabel(e.employee().employment.contractType)),l(5),d("",e.formatCurrency(e.employee().employment.salary),"/month"),l(5),m(M(78,37,e.employee().employment.hireDate,"mediumDate")),l(6),d("",e.getYearsOfService(e.employee().employment.hireDate)," years"),l(9),E(e.getAvailabilityColor(e.employee().availability.isAvailable)),l(),E(e.getAvailabilityTextColor(e.employee().availability.isAvailable)),l(),d(" ",e.employee().availability.isAvailable?"Available":"Unavailable"," "),l(),v(!e.employee().availability.isAvailable&&e.employee().availability.unavailableReason?95:-1),l(6),h("",e.employee().availability.currentWorkload,"/",e.employee().availability.maxWorkload),l(2),j("width",e.getWorkloadPercentage(),"%"),l(10),d(" ",e.getExperienceLabel(e.employee().skills.experienceLevel)," "),l(6),b(e.getStarArray(e.employee().skills.skillRating)),l(3),d("",e.employee().skills.skillRating.toFixed(1),"/5"),l(5),b(e.employee().skills.specialties),l(2),v(e.employee().skills.certifications.length>0?129:-1),l(13),m(e.employee().performance.completedJobs),l(9),d("",e.employee().performance.customerRating.toFixed(1),"/5"),l(9),m(e.formatCurrency(e.employee().performance.totalRevenue)),l(9),d("",e.employee().performance.efficiencyScore,"%"),l(9),m(e.formatDuration(e.employee().performance.averageJobDuration)),l(5),b(e.getWeekDays())}}function Z(r,n){r&1&&(t(0,"div",1),s(1,"div",67),t(2,"p",68),a(3,"Loading employee details..."),i()())}var P=class r{employeeService=S(R);router=S(F);route=S(V);employee=C(null);loading=C(!0);ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n?this.loadEmployee(n):this.router.navigate(["/employees"])}loadEmployee(n){this.employeeService.getEmployeeById(n).subscribe({next:e=>{this.employee.set(e),this.loading.set(!1)},error:e=>{console.error("Error loading employee:",e),this.loading.set(!1),this.router.navigate(["/employees"])}})}getInitials(n){return n.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2)}getAge(n){let e=new Date,o=new Date(n),y=e.getFullYear()-o.getFullYear(),u=e.getMonth()-o.getMonth();return(u<0||u===0&&e.getDate()<o.getDate())&&y--,y}getYearsOfService(n){let e=new Date,o=new Date(n),y=e.getFullYear()-o.getFullYear(),u=e.getMonth()-o.getMonth();return u<0||u===0&&e.getDate()<o.getDate()?y-1:y}getRoleLabel(n){return{admin:"Administrator","senior-mechanic":"Senior Mechanic","junior-mechanic":"Junior Mechanic",apprentice:"Apprentice","service-advisor":"Service Advisor"}[n]||n}getDepartmentLabel(n){return{management:"Management",mechanical:"Mechanical",bodywork:"Bodywork",electrical:"Electrical",service:"Service"}[n]||n}getStatusLabel(n){return{active:"Active",inactive:"Inactive","on-leave":"On Leave",terminated:"Terminated"}[n]||n}getStatusClasses(n){let e={active:"badge badge-active",inactive:"badge badge-inactive","on-leave":"badge badge-pending",terminated:"badge badge-cancelled"};return e[n]||e.inactive}getContractLabel(n){return{"full-time":"Full Time","part-time":"Part Time",contract:"Contract",apprentice:"Apprentice"}[n]||n}getExperienceLabel(n){return{entry:"Entry Level",junior:"Junior",mid:"Mid Level",senior:"Senior",expert:"Expert"}[n]||n}getSpecialtyLabel(n){return{"oil-change":"Oil Change",inspection:"Vehicle Inspection",engine:"Engine Repair",transmission:"Transmission","brake-repair":"Brake Repair",electrical:"Electrical Systems",bodywork:"Bodywork",painting:"Painting",tires:"Tire Service","air-conditioning":"Air Conditioning",suspension:"Suspension",diagnostics:"Vehicle Diagnostics"}[n]||n}getAvailabilityColor(n){return n?"bg-green-500":"bg-red-500"}getAvailabilityTextColor(n){return n?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}getWorkloadPercentage(){let n=this.employee();return!n||n.availability.maxWorkload===0?0:Math.round(n.availability.currentWorkload/n.availability.maxWorkload*100)}getStarArray(n){return Array(Math.floor(n)).fill(0)}getWeekDays(){let n=this.employee();return n?[{key:"monday",label:"Mon",schedule:n.employment.workingHours.monday},{key:"tuesday",label:"Tue",schedule:n.employment.workingHours.tuesday},{key:"wednesday",label:"Wed",schedule:n.employment.workingHours.wednesday},{key:"thursday",label:"Thu",schedule:n.employment.workingHours.thursday},{key:"friday",label:"Fri",schedule:n.employment.workingHours.friday},{key:"saturday",label:"Sat",schedule:n.employment.workingHours.saturday},{key:"sunday",label:"Sun",schedule:n.employment.workingHours.sunday}]:[]}formatCurrency(n){return new Intl.NumberFormat("fr-TN",{style:"currency",currency:"TND",minimumFractionDigits:0}).format(n)}formatDuration(n){if(n<60)return`${n}min`;let e=Math.floor(n/60),o=n%60;return o>0?`${e}h ${o}min`:`${e}h`}editEmployee(){this.router.navigate(["/employees/edit",this.employee()?.id])}goBack(){this.router.navigate(["/employees"])}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=T({type:r,selectors:[["app-employee-details"]],decls:2,vars:1,consts:[[1,"p-6","max-w-6xl","mx-auto","space-y-6"],[1,"p-6","text-center"],[1,"flex","items-center","space-x-2","mb-6"],[1,"p-2","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-200",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"flex-1"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"btn-primary",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"bg-white","bg-opacity-80","dark:bg-gray-800","dark:bg-opacity-80","backdrop-blur-sm","rounded-xl","border","border-gray-200","dark:border-gray-700","p-6"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4"],[1,"space-y-3"],[1,"flex","items-center","space-x-3","mb-4"],[1,"w-16","h-16","bg-gradient-to-br","from-blue-500","to-purple-600","rounded-full","flex","items-center","justify-center","text-white","font-semibold","text-xl"],[1,"font-medium","text-gray-900","dark:text-white"],[1,"space-y-2"],[1,"flex","justify-between"],[1,"text-sm","font-medium","text-gray-900","dark:text-white"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"w-3","h-3","rounded-full","mr-2"],[1,"text-sm","font-medium"],[1,"flex","justify-between","text-sm","mb-2"],[1,"text-gray-500","dark:text-gray-400"],[1,"w-full","bg-gray-200","dark:bg-gray-700","rounded-full","h-3"],[1,"bg-gradient-to-r","from-blue-500","to-green-500","h-3","rounded-full","transition-all"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],[1,"badge","badge-active"],[1,"flex","items-center","space-x-2"],[1,"flex","text-yellow-400"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5"],[1,"flex","flex-wrap","gap-2"],[1,"flex","items-center","justify-between","p-3","bg-gray-50","dark:bg-gray-900/50","rounded-lg"],[1,"w-8","h-8","bg-blue-500","rounded-lg","flex","items-center","justify-center","mr-3"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"w-8","h-8","bg-yellow-500","rounded-lg","flex","items-center","justify-center","mr-3"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","text-white"],["d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"],[1,"w-8","h-8","bg-green-500","rounded-lg","flex","items-center","justify-center","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"w-8","h-8","bg-purple-500","rounded-lg","flex","items-center","justify-center","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"w-8","h-8","bg-orange-500","rounded-lg","flex","items-center","justify-center","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"grid","grid-cols-1","md:grid-cols-7","gap-4"],[1,"text-center"],[1,"text-sm","font-medium","text-gray-900","dark:text-white","text-right"],[1,"text-sm","font-medium","text-gray-900","dark:text-white","mt-1"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-1"],[1,"space-y-1"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","text-green-500","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-gray-900","dark:text-white"],[1,"text-sm","font-medium","text-gray-900","dark:text-white","mb-2"],[1,"space-y-1","text-xs","text-gray-600","dark:text-gray-400"],[1,"text-xs","text-gray-500","dark:text-gray-500"],[1,"text-gray-500","dark:text-gray-500"],[1,"animate-spin","w-8","h-8","border-4","border-blue-500","border-t-transparent","rounded-full","mx-auto"],[1,"mt-2","text-gray-500","dark:text-gray-400"]],template:function(e,o){e&1&&g(0,X,185,40,"div",0)(1,Z,4,0,"div",1),e&2&&v(o.employee()?0:1)},dependencies:[H,B],styles:[".btn-primary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.5rem 1rem;border:1px solid transparent;font-size:.875rem;font-weight:500;border-radius:.375rem;color:#fff;background-color:#2563eb;gap:.5rem}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#1d4ed8}"]})};export{P as EmployeeDetailsComponent};
