import{a as nt}from"./chunk-UJO3757W.js";import{a as U,b as $,c as v,d as O,e as V,i as q,j as ne,l as L,m as K,o as H,p as J,q as Q,r as Z,s as re,t as le,x as j,z as Y}from"./chunk-O3CTDYVO.js";import{c as F}from"./chunk-ECECQ7NF.js";import{f as it}from"./chunk-5NENZ4M5.js";import{$ as _,$a as d,Ab as a,Bb as ye,C as k,Ca as T,Ha as Xe,Ja as G,P as Ze,Sa as f,Ta as b,U as B,Wa as M,Xa as A,Xb as et,Ya as c,Z as D,Za as i,_ as P,_a as t,_b as tt,a as h,aa as ie,ab as W,ac as w,b as E,bb as y,c as te,cb as C,f as Je,ga as ee,ia as R,ib as x,j as Qe,jb as z,kb as s,lb as p,m as N,mb as g,nb as be,q as fe,sa as e,tb as I,zb as n}from"./chunk-DMTVNCDT.js";var pe=class m{mockSettings={garageInfo:{name:"OpAuto Garage",address:"123 Avenue Habib Bourguiba",city:"Tunis",postalCode:"1000",country:"Tunisia",phone:"+216 71 123 456",email:"contact@opauto.tn",website:"https://opauto.tn",taxId:"TN123456789",registrationNumber:"RC-A-12345",description:"Professional automotive repair and maintenance services",bankDetails:{bankName:"Banque de Tunisie",accountNumber:"12345678901234567890",iban:"TN5912345678901234567890",bic:"BTUNTNTT",accountHolderName:"OpAuto Garage SARL"}},operationalSettings:{capacity:{totalLifts:4,availableLifts:4,totalMechanics:3,availableMechanics:3,maxDailyAppointments:16,avgServiceDuration:90},workingHours:{monday:{isWorkingDay:!0,openTime:"08:00",closeTime:"18:00",lunchBreak:{startTime:"12:00",endTime:"13:00"}},tuesday:{isWorkingDay:!0,openTime:"08:00",closeTime:"18:00",lunchBreak:{startTime:"12:00",endTime:"13:00"}},wednesday:{isWorkingDay:!0,openTime:"08:00",closeTime:"18:00",lunchBreak:{startTime:"12:00",endTime:"13:00"}},thursday:{isWorkingDay:!0,openTime:"08:00",closeTime:"18:00",lunchBreak:{startTime:"12:00",endTime:"13:00"}},friday:{isWorkingDay:!0,openTime:"08:00",closeTime:"18:00",lunchBreak:{startTime:"12:00",endTime:"13:00"}},saturday:{isWorkingDay:!0,openTime:"08:00",closeTime:"14:00"},sunday:{isWorkingDay:!1,openTime:"",closeTime:""},timezone:"Africa/Tunis"},serviceSettings:{defaultServiceDuration:90,bufferTimeBetweenServices:15,allowOverlappingAppointments:!1,requireCustomerApproval:!0,defaultWarrantyPeriod:30,serviceCategories:[{id:"maintenance",name:"Maintenance",description:"Regular vehicle maintenance",averageDuration:60,averageCost:150,requiresSpecialist:!1,color:"#3b82f6",isActive:!0},{id:"repair",name:"Repair",description:"Vehicle repairs",averageDuration:120,averageCost:300,requiresSpecialist:!0,color:"#ef4444",isActive:!0},{id:"diagnostic",name:"Diagnostic",description:"Vehicle diagnostics",averageDuration:45,averageCost:80,requiresSpecialist:!0,color:"#f59e0b",isActive:!0},{id:"bodywork",name:"Bodywork",description:"Body and paint work",averageDuration:240,averageCost:800,requiresSpecialist:!0,color:"#10b981",isActive:!0}]},appointments:{allowOnlineBooking:!1,maxAdvanceBookingDays:30,minAdvanceBookingHours:2,allowSameDayBooking:!0,requireDepositForBooking:!1,depositPercentage:20,cancellationPolicy:"Cancellations must be made at least 2 hours in advance",reminderSettings:{emailReminders:!0,smsReminders:!1,reminderTimings:[24,2],followUpEnabled:!0,followUpDelayDays:7}},holidays:[{id:"new-year",name:"New Year's Day",date:new Date("2024-01-01"),isRecurring:!0},{id:"independence",name:"Independence Day",date:new Date("2024-03-20"),isRecurring:!0},{id:"eid-fitr",name:"Eid al-Fitr",date:new Date("2024-04-10"),isRecurring:!1,description:"Dates vary each year"}]},businessSettings:{currency:"TND",taxSettings:{defaultTaxRate:19,taxIncluded:!1,taxLabel:"TVA",taxId:"TN123456789",applyTaxToLabor:!0,applyTaxToParts:!0},paymentSettings:{acceptedMethods:["cash","card","bank-transfer"],defaultPaymentTerms:"Payment due upon completion",lateFeePercentage:1.5,lateFeeGracePeriodDays:7,allowPartialPayments:!0,requireDepositPercentage:0},invoiceSettings:{invoicePrefix:"INV",invoiceNumberFormat:"INV-{YYYY}-{000001}",nextInvoiceNumber:1001,defaultPaymentTerms:"Payment due upon completion of service",showItemCodes:!0,showMechanicNames:!0,includeTermsAndConditions:!0,termsAndConditions:"All work is guaranteed for 30 days. Customer is responsible for any parts not covered under warranty.",footerText:"Thank you for choosing OpAuto Garage!"},pricingRules:{laborRatePerHour:45,weekendSurcharge:25,urgentJobSurcharge:50,bulkDiscountThreshold:1e3,bulkDiscountPercentage:10,loyalCustomerDiscountPercentage:5,autoApplyDiscounts:!0}},systemSettings:{notifications:{enableBrowserNotifications:!0,enableEmailNotifications:!1,enableSmsNotifications:!1,notificationChannels:[{type:"browser",events:["appointment-created","job-completed","approval-required"],isEnabled:!0,configuration:{}}],quietHours:{enabled:!0,startTime:"22:00",endTime:"08:00"}},security:{sessionTimeoutMinutes:480,requirePasswordReset:!1,passwordResetIntervalDays:90,enableTwoFactor:!1,allowMultipleSessions:!0,ipWhitelist:[],auditLogRetentionDays:365},dataRetention:{customerDataRetentionYears:7,invoiceRetentionYears:10,maintenanceLogRetentionYears:5,deleteInactiveCustomersAfterYears:3,autoArchiveCompletedJobs:!0,archiveAfterMonths:12},backup:{autoBackupEnabled:!1,backupFrequency:"weekly",backupRetentionDays:30,includeImages:!0,cloudBackupEnabled:!1},appearance:{theme:"system",primaryColor:"#2563eb",secondaryColor:"#64748b",accentColor:"#f59e0b",dashboardLayout:"standard",showWelcomeMessage:!0,language:"en"}},integrationSettings:{smsProvider:{provider:"none",isEnabled:!1,configuration:{}},emailProvider:{provider:"none",isEnabled:!1,configuration:{}},paymentGateway:{provider:"none",isEnabled:!1,configuration:{}},inventoryIntegration:{provider:"manual",isEnabled:!0,autoOrderThreshold:5,preferredSuppliers:["Local Parts Store","Auto Parts Direct"],configuration:{}},accountingIntegration:{provider:"none",isEnabled:!1,syncFrequency:"manual",configuration:{}}},createdAt:new Date("2024-01-01"),updatedAt:new Date};settingsSubject=new Qe(this.mockSettings);settings$=this.settingsSubject.asObservable();getSettings(){return this.settings$.pipe(k(100))}updateSettings(o){let l=this.settingsSubject.value,r=E(h(h({},l),o),{updatedAt:new Date});return this.settingsSubject.next(r),N(r).pipe(k(300))}updateGarageInfo(o){let l=this.settingsSubject.value,r=E(h({},l),{garageInfo:h(h({},l.garageInfo),o),updatedAt:new Date});return this.settingsSubject.next(r),N(r).pipe(k(200))}updateOperationalSettings(o){let l=this.settingsSubject.value,r=E(h({},l),{operationalSettings:h(h({},l.operationalSettings),o),updatedAt:new Date});return this.settingsSubject.next(r),N(r).pipe(k(200))}updateBusinessSettings(o){let l=this.settingsSubject.value,r=E(h({},l),{businessSettings:h(h({},l.businessSettings),o),updatedAt:new Date});return this.settingsSubject.next(r),N(r).pipe(k(200))}updateSystemSettings(o){let l=this.settingsSubject.value,r=E(h({},l),{systemSettings:h(h({},l.systemSettings),o),updatedAt:new Date});return this.settingsSubject.next(r),N(r).pipe(k(200))}updateIntegrationSettings(o){let l=this.settingsSubject.value,r=E(h({},l),{integrationSettings:h(h({},l.integrationSettings),o),updatedAt:new Date});return this.settingsSubject.next(r),N(r).pipe(k(200))}validateSettings(o){let l=[],r=[];if(o.garageInfo&&((!o.garageInfo.name||o.garageInfo.name.trim().length<2)&&l.push({field:"garageInfo.name",message:"Garage name is required and must be at least 2 characters",severity:"error"}),(!o.garageInfo.phone||!/^\+?[0-9\s-()]+$/.test(o.garageInfo.phone))&&l.push({field:"garageInfo.phone",message:"Valid phone number is required",severity:"error"}),(!o.garageInfo.email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.garageInfo.email))&&l.push({field:"garageInfo.email",message:"Valid email address is required",severity:"error"})),o.operationalSettings?.capacity){let S=o.operationalSettings.capacity;S.totalLifts<1&&l.push({field:"capacity.totalLifts",message:"At least 1 lift is required",severity:"error"}),S.totalMechanics<1&&l.push({field:"capacity.totalMechanics",message:"At least 1 mechanic is required",severity:"error"}),S.maxDailyAppointments<1&&r.push({field:"capacity.maxDailyAppointments",message:"Very low daily appointment limit may impact business",suggestion:"Consider increasing to at least 4 appointments per day"})}if(o.businessSettings?.taxSettings){let S=o.businessSettings.taxSettings;(S.defaultTaxRate<0||S.defaultTaxRate>100)&&l.push({field:"taxSettings.defaultTaxRate",message:"Tax rate must be between 0 and 100",severity:"error"})}let u={isValid:l.length===0,errors:l,warnings:r};return N(u).pipe(k(100))}resetToDefaults(o){let l=this.getDefaultSettings(),r=this.settingsSubject.value,u=E(h({},r),{[o]:l[o],updatedAt:new Date});return this.settingsSubject.next(u),N(u).pipe(k(200))}exportSettings(){let o=this.settingsSubject.value,l=E(h({},o),{exportedAt:new Date,version:"1.0"}),r=new Blob([JSON.stringify(l,null,2)],{type:"application/json"});return N(r).pipe(k(100))}importSettings(o){return new Je(l=>{let r=new FileReader;r.onload=u=>{try{let S=JSON.parse(u.target?.result);if(!S.garageInfo||!S.operationalSettings)throw new Error("Invalid settings file format");let X=E(h({},S),{updatedAt:new Date});this.settingsSubject.next(X),l.next(X),l.complete()}catch{l.error(new Error("Failed to parse settings file"))}},r.onerror=()=>{l.error(new Error("Failed to read file"))},r.readAsText(o)}).pipe(k(300))}testIntegration(o){let r={sms:{success:!0,message:"SMS service connection successful"},email:{success:!0,message:"Email service connection successful"},payment:{success:!1,message:"Payment gateway configuration invalid"},inventory:{success:!0,message:"Inventory system connected"},accounting:{success:!1,message:"Accounting integration not configured"}}[o]||{success:!1,message:"Unknown integration type"};return N(r).pipe(k(1e3))}getDefaultSettings(){return{garageInfo:{name:"",address:"",city:"",postalCode:"",country:"Tunisia",phone:"",email:"",taxId:"",registrationNumber:""},operationalSettings:{capacity:{totalLifts:2,availableLifts:2,totalMechanics:2,availableMechanics:2,maxDailyAppointments:8,avgServiceDuration:90},workingHours:{monday:{isWorkingDay:!0,openTime:"08:00",closeTime:"17:00"},tuesday:{isWorkingDay:!0,openTime:"08:00",closeTime:"17:00"},wednesday:{isWorkingDay:!0,openTime:"08:00",closeTime:"17:00"},thursday:{isWorkingDay:!0,openTime:"08:00",closeTime:"17:00"},friday:{isWorkingDay:!0,openTime:"08:00",closeTime:"17:00"},saturday:{isWorkingDay:!1,openTime:"",closeTime:""},sunday:{isWorkingDay:!1,openTime:"",closeTime:""},timezone:"Africa/Tunis"},serviceSettings:{defaultServiceDuration:90,bufferTimeBetweenServices:15,allowOverlappingAppointments:!1,requireCustomerApproval:!0,defaultWarrantyPeriod:30,serviceCategories:[]},appointments:{allowOnlineBooking:!1,maxAdvanceBookingDays:30,minAdvanceBookingHours:2,allowSameDayBooking:!0,requireDepositForBooking:!1,depositPercentage:0,cancellationPolicy:"",reminderSettings:{emailReminders:!1,smsReminders:!1,reminderTimings:[24],followUpEnabled:!1,followUpDelayDays:7}},holidays:[]},businessSettings:{currency:"TND",taxSettings:{defaultTaxRate:19,taxIncluded:!1,taxLabel:"TVA",taxId:"",applyTaxToLabor:!0,applyTaxToParts:!0},paymentSettings:{acceptedMethods:["cash"],defaultPaymentTerms:"Payment due upon completion",lateFeePercentage:0,lateFeeGracePeriodDays:0,allowPartialPayments:!1,requireDepositPercentage:0},invoiceSettings:{invoicePrefix:"INV",invoiceNumberFormat:"INV-{000001}",nextInvoiceNumber:1,defaultPaymentTerms:"Payment due upon completion",showItemCodes:!1,showMechanicNames:!1,includeTermsAndConditions:!1,termsAndConditions:"",footerText:""},pricingRules:{laborRatePerHour:30,weekendSurcharge:0,urgentJobSurcharge:0,bulkDiscountThreshold:0,bulkDiscountPercentage:0,loyalCustomerDiscountPercentage:0,autoApplyDiscounts:!1}},systemSettings:{notifications:{enableBrowserNotifications:!0,enableEmailNotifications:!1,enableSmsNotifications:!1,notificationChannels:[],quietHours:{enabled:!1,startTime:"22:00",endTime:"08:00"}},security:{sessionTimeoutMinutes:240,requirePasswordReset:!1,passwordResetIntervalDays:90,enableTwoFactor:!1,allowMultipleSessions:!1,ipWhitelist:[],auditLogRetentionDays:90},dataRetention:{customerDataRetentionYears:5,invoiceRetentionYears:7,maintenanceLogRetentionYears:3,deleteInactiveCustomersAfterYears:2,autoArchiveCompletedJobs:!1,archiveAfterMonths:6},backup:{autoBackupEnabled:!1,backupFrequency:"weekly",backupRetentionDays:7,includeImages:!1,cloudBackupEnabled:!1},appearance:{theme:"light",primaryColor:"#2563eb",secondaryColor:"#64748b",accentColor:"#f59e0b",dashboardLayout:"standard",showWelcomeMessage:!0,language:"en"}},integrationSettings:{smsProvider:{provider:"none",isEnabled:!1,configuration:{}},emailProvider:{provider:"none",isEnabled:!1,configuration:{}},paymentGateway:{provider:"none",isEnabled:!1,configuration:{}},inventoryIntegration:{provider:"manual",isEnabled:!0,autoOrderThreshold:10,preferredSuppliers:[],configuration:{}},accountingIntegration:{provider:"none",isEnabled:!1,syncFrequency:"manual",configuration:{}}},createdAt:new Date,updatedAt:new Date}}getGarageInfo(){return this.settings$.pipe(fe(o=>o.garageInfo),k(50))}getInvoiceSettings(){return this.settings$.pipe(fe(o=>h({garageInfo:o.garageInfo},o.businessSettings.invoiceSettings)),k(50))}static \u0275fac=function(l){return new(l||m)};static \u0275prov=Ze({token:m,factory:m.\u0275fac,providedIn:"root"})};function st(m,o){m&1&&(_(),i(0,"svg",35),d(1,"circle",36)(2,"path",37),t(),s(3),n(4,"translate")),m&2&&(e(3),g(" ",a(4,1,"settings.saving")," "))}function ot(m,o){m&1&&(s(0),n(1,"translate")),m&2&&g(" ",a(1,1,"settings.saveChanges")," ")}function rt(m,o){m&1&&(i(0,"p",10),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.garageInfo.errors.garageNameRequired")))}function lt(m,o){m&1&&(i(0,"p",10),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.garageInfo.errors.registrationNumberRequired")))}function pt(m,o){m&1&&(i(0,"p",10),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.garageInfo.errors.phoneNumberRequired")))}function mt(m,o){m&1&&(i(0,"p",10),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.garageInfo.errors.emailAddressRequired")))}function dt(m,o){m&1&&(i(0,"p",10),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.garageInfo.errors.taxIdRequired")))}function ct(m,o){m&1&&(i(0,"p",10),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.garageInfo.errors.addressRequired")))}function ut(m,o){m&1&&(i(0,"p",10),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.garageInfo.errors.cityRequired")))}function gt(m,o){m&1&&(i(0,"p",10),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.garageInfo.errors.postalCodeRequired")))}function vt(m,o){m&1&&(i(0,"p",10),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.garageInfo.errors.countryRequired")))}var me=class m{fb=B(j);garageInfo;save=new G;garageForm;isSaving=!1;ngOnInit(){this.initializeForm(),this.populateForm()}ngOnChanges(){this.garageForm&&this.garageInfo&&this.populateForm()}initializeForm(){this.garageForm=this.fb.group({name:["",[v.required,v.minLength(2)]],registrationNumber:["",v.required],description:[""],phone:["",[v.required,v.pattern(/^\+?[0-9\s-()]+$/)]],email:["",[v.required,v.email]],website:["",v.pattern(/^https?:\/\/.+/)],taxId:["",v.required],address:["",v.required],city:["",v.required],postalCode:["",v.required],country:["Tunisia",v.required],bankDetails:this.fb.group({bankName:[""],accountHolderName:[""],accountNumber:[""],iban:[""],bic:[""]})})}populateForm(){this.garageInfo&&this.garageForm.patchValue({name:this.garageInfo.name,registrationNumber:this.garageInfo.registrationNumber,description:this.garageInfo.description||"",phone:this.garageInfo.phone,email:this.garageInfo.email,website:this.garageInfo.website||"",taxId:this.garageInfo.taxId,address:this.garageInfo.address,city:this.garageInfo.city,postalCode:this.garageInfo.postalCode,country:this.garageInfo.country,bankDetails:{bankName:this.garageInfo.bankDetails?.bankName||"",accountHolderName:this.garageInfo.bankDetails?.accountHolderName||"",accountNumber:this.garageInfo.bankDetails?.accountNumber||"",iban:this.garageInfo.bankDetails?.iban||"",bic:this.garageInfo.bankDetails?.bic||""}})}isFieldInvalid(o){let l=this.garageForm.get(o);return!!(l&&l.invalid&&(l.dirty||l.touched))}onSave(){if(this.garageForm.valid){this.isSaving=!0;let o=this.garageForm.value,l={name:o.name,registrationNumber:o.registrationNumber,description:o.description,phone:o.phone,email:o.email,website:o.website,taxId:o.taxId,address:o.address,city:o.city,postalCode:o.postalCode,country:o.country,bankDetails:o.bankDetails.bankName?{bankName:o.bankDetails.bankName,accountHolderName:o.bankDetails.accountHolderName,accountNumber:o.bankDetails.accountNumber,iban:o.bankDetails.iban,bic:o.bankDetails.bic}:void 0};this.save.emit(l),setTimeout(()=>{this.isSaving=!1},1e3)}}resetForm(){this.populateForm(),this.garageForm.markAsPristine(),this.garageForm.markAsUntouched()}static \u0275fac=function(l){return new(l||m)};static \u0275cmp=T({type:m,selectors:[["app-garage-info-form"]],inputs:{garageInfo:"garageInfo"},outputs:{save:"save"},features:[R],decls:130,vars:96,consts:[[1,"glass-card"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-white"],[1,"flex","space-x-2"],["type","button",1,"btn-secondary","text-sm",3,"click"],["type","button",1,"btn-primary","text-sm",3,"click","disabled"],[1,"space-y-6",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"form-label"],["type","text","formControlName","name",1,"form-input"],[1,"mt-1","text-sm","text-red-600","dark:text-red-400"],["type","text","formControlName","registrationNumber","placeholder","RC-A-12345",1,"form-input"],[1,"md:col-span-2"],["formControlName","description","rows","3",1,"form-textarea",3,"placeholder"],[1,"text-md","font-medium","text-white","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","tel","formControlName","phone","placeholder","+216 71 123 456",1,"form-input"],["type","email","formControlName","email","placeholder","contact@garage.tn",1,"form-input"],["type","url","formControlName","website","placeholder","https://garage.tn",1,"form-input"],["type","text","formControlName","taxId","placeholder","TN123456789",1,"form-input"],["type","text","formControlName","address","placeholder","123 Avenue Habib Bourguiba",1,"form-input"],["type","text","formControlName","city","placeholder","Tunis",1,"form-input"],["type","text","formControlName","postalCode","placeholder","1000",1,"form-input"],["formControlName","country",1,"form-select"],["value","Tunisia"],["value","Algeria"],["value","Morocco"],["value","Libya"],["value","Egypt"],["formGroupName","bankDetails",1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","text","formControlName","bankName","placeholder","Banque de Tunisie",1,"form-input"],["type","text","formControlName","accountHolderName","placeholder","Garage SARL",1,"form-input"],["type","text","formControlName","accountNumber","placeholder","12345678901234567890",1,"form-input"],["type","text","formControlName","iban","placeholder","TN5912345678901234567890",1,"form-input"],["type","text","formControlName","bic","placeholder","BTUNTNTT",1,"form-input"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(l,r){l&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),s(3),n(4,"translate"),t(),i(5,"div",3)(6,"button",4),y("click",function(){return r.resetForm()}),s(7),n(8,"translate"),t(),i(9,"button",5),y("click",function(){return r.onSave()}),f(10,st,5,3)(11,ot,2,3),t()()(),i(12,"form",6)(13,"div",7)(14,"div")(15,"label",8),s(16),n(17,"translate"),t(),d(18,"input",9),f(19,rt,3,3,"p",10),t(),i(20,"div")(21,"label",8),s(22),n(23,"translate"),t(),d(24,"input",11),f(25,lt,3,3,"p",10),t(),i(26,"div",12)(27,"label",8),s(28),n(29,"translate"),t(),i(30,"textarea",13),n(31,"translate"),s(32,"            "),t()()(),i(33,"div")(34,"h3",14),s(35),n(36,"translate"),t(),i(37,"div",15)(38,"div")(39,"label",8),s(40),n(41,"translate"),t(),d(42,"input",16),f(43,pt,3,3,"p",10),t(),i(44,"div")(45,"label",8),s(46),n(47,"translate"),t(),d(48,"input",17),f(49,mt,3,3,"p",10),t(),i(50,"div")(51,"label",8),s(52),n(53,"translate"),t(),d(54,"input",18),t(),i(55,"div")(56,"label",8),s(57),n(58,"translate"),t(),d(59,"input",19),f(60,dt,3,3,"p",10),t()()(),i(61,"div")(62,"h3",14),s(63),n(64,"translate"),t(),i(65,"div",15)(66,"div",12)(67,"label",8),s(68),n(69,"translate"),t(),d(70,"input",20),f(71,ct,3,3,"p",10),t(),i(72,"div")(73,"label",8),s(74),n(75,"translate"),t(),d(76,"input",21),f(77,ut,3,3,"p",10),t(),i(78,"div")(79,"label",8),s(80),n(81,"translate"),t(),d(82,"input",22),f(83,gt,3,3,"p",10),t(),i(84,"div")(85,"label",8),s(86),n(87,"translate"),t(),i(88,"select",23)(89,"option",24),s(90,"Tunisia"),t(),i(91,"option",25),s(92,"Algeria"),t(),i(93,"option",26),s(94,"Morocco"),t(),i(95,"option",27),s(96,"Libya"),t(),i(97,"option",28),s(98,"Egypt"),t()(),f(99,vt,3,3,"p",10),t()()(),i(100,"div")(101,"h3",14),s(102),n(103,"translate"),t(),i(104,"div",29)(105,"div")(106,"label",8),s(107),n(108,"translate"),t(),d(109,"input",30),t(),i(110,"div")(111,"label",8),s(112),n(113,"translate"),t(),d(114,"input",31),t(),i(115,"div")(116,"label",8),s(117),n(118,"translate"),t(),d(119,"input",32),t(),i(120,"div")(121,"label",8),s(122),n(123,"translate"),t(),d(124,"input",33),t(),i(125,"div")(126,"label",8),s(127),n(128,"translate"),t(),d(129,"input",34),t()()()()()),l&2&&(e(3),p(a(4,52,"settings.garageInfo.title")),e(4),g(" ",a(8,54,"common.reset")," "),e(2),c("disabled",r.garageForm.invalid||r.isSaving),e(),b(r.isSaving?10:11),e(2),c("formGroup",r.garageForm),e(4),g("",a(17,56,"settings.garageInfo.garageName")," *"),e(2),x("border-red-500",r.isFieldInvalid("name")),e(),b(r.isFieldInvalid("name")?19:-1),e(3),g("",a(23,58,"settings.garageInfo.registrationNumber")," *"),e(2),x("border-red-500",r.isFieldInvalid("registrationNumber")),e(),b(r.isFieldInvalid("registrationNumber")?25:-1),e(3),p(a(29,60,"common.description")),e(2),c("placeholder",a(31,62,"settings.garageInfo.descriptionPlaceholder")),e(5),p(a(36,64,"settings.garageInfo.contactInformation")),e(5),g("",a(41,66,"settings.garageInfo.phoneNumber")," *"),e(2),x("border-red-500",r.isFieldInvalid("phone")),e(),b(r.isFieldInvalid("phone")?43:-1),e(3),g("",a(47,68,"settings.garageInfo.emailAddress")," *"),e(2),x("border-red-500",r.isFieldInvalid("email")),e(),b(r.isFieldInvalid("email")?49:-1),e(3),p(a(53,70,"settings.garageInfo.website")),e(5),g("",a(58,72,"settings.garageInfo.taxId")," *"),e(2),x("border-red-500",r.isFieldInvalid("taxId")),e(),b(r.isFieldInvalid("taxId")?60:-1),e(3),p(a(64,74,"settings.garageInfo.address")),e(5),g("",a(69,76,"settings.garageInfo.streetAddress")," *"),e(2),x("border-red-500",r.isFieldInvalid("address")),e(),b(r.isFieldInvalid("address")?71:-1),e(3),g("",a(75,78,"settings.garageInfo.city")," *"),e(2),x("border-red-500",r.isFieldInvalid("city")),e(),b(r.isFieldInvalid("city")?77:-1),e(3),g("",a(81,80,"settings.garageInfo.postalCode")," *"),e(2),x("border-red-500",r.isFieldInvalid("postalCode")),e(),b(r.isFieldInvalid("postalCode")?83:-1),e(3),g("",a(87,82,"settings.garageInfo.country")," *"),e(2),x("border-red-500",r.isFieldInvalid("country")),e(11),b(r.isFieldInvalid("country")?99:-1),e(3),p(a(103,84,"settings.garageInfo.bankDetails")),e(5),p(a(108,86,"settings.garageInfo.bankName")),e(5),p(a(113,88,"settings.garageInfo.accountHolderName")),e(5),p(a(118,90,"settings.garageInfo.accountNumber")),e(5),p(a(123,92,"settings.garageInfo.iban")),e(5),p(a(128,94,"settings.garageInfo.bicSwiftCode")))},dependencies:[w,Y,q,Q,Z,$,J,O,V,L,H,K,F],encapsulation:2})};var bt=(m,o)=>o.key;function yt(m,o){m&1&&(i(0,"p",8),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.operations.errors.atLeastOneLift")))}function St(m,o){m&1&&(i(0,"p",8),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.operations.errors.atLeastOneMechanic")))}function ht(m,o){m&1&&(i(0,"div",45),d(1,"input",46),i(2,"span",47),s(3),n(4,"translate"),t(),d(5,"input",48),t()),m&2&&(e(3),p(a(4,1,"settings.operations.to")))}function xt(m,o){m&1&&(i(0,"div",49)(1,"span",50),s(2),n(3,"translate"),t(),d(4,"input",51),i(5,"span",47),s(6,"-"),t(),d(7,"input",52),t()),m&2&&(e(2),g("",a(3,1,"settings.operations.lunch"),":"))}function It(m,o){if(m&1&&(i(0,"div",15)(1,"div",40)(2,"label",28),d(3,"input",41),i(4,"span",42),s(5),n(6,"translate"),t()()(),Xe(7,ht,6,3,"div",43)(8,xt,8,3,"div",44),t()),m&2){let l=o.$implicit,r=C();c("formGroupName",l.key),e(5),p(a(6,4,"settings.operations.days."+l.key)),e(2),c("ngIf",r.isWorkingDay(l.key)),e(),c("ngIf",r.isWorkingDay(l.key))}}var ce=class m{fb=B(j);settings;save=new G;capacityForm;workingHoursForm;serviceForm;appointmentForm;weekDays=[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}];ngOnInit(){this.initializeForms(),this.populateForms()}ngOnChanges(){this.capacityForm&&this.settings&&this.populateForms()}initializeForms(){this.capacityForm=this.fb.group({totalLifts:[1,[v.required,v.min(1)]],totalMechanics:[1,[v.required,v.min(1)]],maxDailyAppointments:[8,[v.required,v.min(1)]],avgServiceDuration:[90,[v.min(15)]]}),this.workingHoursForm=this.fb.group({timezone:["Africa/Tunis"],monday:this.createDayScheduleGroup(),tuesday:this.createDayScheduleGroup(),wednesday:this.createDayScheduleGroup(),thursday:this.createDayScheduleGroup(),friday:this.createDayScheduleGroup(),saturday:this.createDayScheduleGroup(),sunday:this.createDayScheduleGroup()}),this.serviceForm=this.fb.group({defaultServiceDuration:[90,[v.min(15)]],bufferTimeBetweenServices:[15,[v.min(0)]],allowOverlappingAppointments:[!1],requireCustomerApproval:[!0],defaultWarrantyPeriod:[30,[v.min(0)]]}),this.appointmentForm=this.fb.group({allowOnlineBooking:[!1],maxAdvanceBookingDays:[30,[v.min(1)]],minAdvanceBookingHours:[2,[v.min(0)]],allowSameDayBooking:[!0],requireDepositForBooking:[!1],depositPercentage:[0,[v.min(0),v.max(100)]],cancellationPolicy:[""]})}createDayScheduleGroup(){return this.fb.group({isWorkingDay:[!1],openTime:["08:00"],closeTime:["17:00"],lunchBreak:this.fb.group({startTime:["12:00"],endTime:["13:00"]})})}populateForms(){this.settings&&(this.capacityForm.patchValue(this.settings.capacity),this.workingHoursForm.patchValue(this.settings.workingHours),this.serviceForm.patchValue(this.settings.serviceSettings),this.appointmentForm.patchValue(this.settings.appointments))}isCapacityFieldInvalid(o){let l=this.capacityForm.get(o);return!!(l&&l.invalid&&(l.dirty||l.touched))}isWorkingDay(o){return this.workingHoursForm.get(o)?.get("isWorkingDay")?.value||!1}saveCapacity(){if(this.capacityForm.valid){let o=this.capacityForm.value;this.save.emit({capacity:E(h({},o),{availableLifts:o.totalLifts,availableMechanics:o.totalMechanics})})}}saveWorkingHours(){let o=this.workingHoursForm.value;this.save.emit({workingHours:o})}saveServiceSettings(){if(this.serviceForm.valid){let o=this.serviceForm.value;this.save.emit({serviceSettings:E(h({},o),{serviceCategories:this.settings.serviceSettings.serviceCategories||[]})})}}saveAppointmentSettings(){if(this.appointmentForm.valid){let o=this.appointmentForm.value;this.save.emit({appointments:E(h({},o),{reminderSettings:this.settings.appointments.reminderSettings||{emailReminders:!1,smsReminders:!1,reminderTimings:[24],followUpEnabled:!1,followUpDelayDays:7}})})}}copyHoursToAllDays(){let o=this.workingHoursForm.get("monday")?.value;o&&this.weekDays.slice(1,6).forEach(l=>{this.workingHoursForm.get(l.key)?.patchValue(o)})}static \u0275fac=function(l){return new(l||m)};static \u0275cmp=T({type:m,selectors:[["app-operational-settings"]],inputs:{settings:"settings"},outputs:{save:"save"},features:[R],decls:141,vars:91,consts:[[1,"space-y-6"],[1,"glass-card"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-white"],["type","button",1,"btn-primary","text-sm",3,"click","disabled"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4",3,"formGroup"],[1,"form-label"],["type","number","formControlName","totalLifts","min","1","max","20",1,"form-input"],[1,"mt-1","text-sm","text-red-600","dark:text-red-400"],["type","number","formControlName","totalMechanics","min","1","max","50",1,"form-input"],["type","number","formControlName","maxDailyAppointments","min","1","max","100",1,"form-input"],["type","number","formControlName","avgServiceDuration","min","15","max","480","step","15",1,"form-input"],["type","button",1,"btn-primary","text-sm",3,"click"],[3,"formGroup"],[1,"space-y-4"],[1,"flex","items-center","space-x-4","p-3","bg-gray-800/30","rounded-lg",3,"formGroupName"],[1,"mt-4"],["formControlName","timezone",1,"form-select","w-48"],["value","Africa/Tunis"],["value","Africa/Algiers"],["value","Africa/Casablanca"],["value","Europe/Paris"],[1,"space-y-4",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","number","formControlName","defaultServiceDuration","min","15","max","480","step","15",1,"form-input"],["type","number","formControlName","bufferTimeBetweenServices","min","0","max","60","step","5",1,"form-input"],["type","number","formControlName","defaultWarrantyPeriod","min","0","max","365",1,"form-input"],[1,"space-y-3"],[1,"flex","items-center"],["type","checkbox","formControlName","allowOverlappingAppointments",1,"form-checkbox","mr-2"],[1,"text-sm","font-medium","text-gray-300"],["type","checkbox","formControlName","requireCustomerApproval",1,"form-checkbox","mr-2"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["type","number","formControlName","maxAdvanceBookingDays","min","1","max","365",1,"form-input"],["type","number","formControlName","minAdvanceBookingHours","min","0","max","72",1,"form-input"],["type","number","formControlName","depositPercentage","min","0","max","100","step","5",1,"form-input"],["type","checkbox","formControlName","allowOnlineBooking",1,"form-checkbox","mr-2"],["type","checkbox","formControlName","allowSameDayBooking",1,"form-checkbox","mr-2"],["type","checkbox","formControlName","requireDepositForBooking",1,"form-checkbox","mr-2"],["formControlName","cancellationPolicy","rows","3",1,"form-textarea",3,"placeholder"],[1,"w-24"],["type","checkbox","formControlName","isWorkingDay",1,"form-checkbox","mr-2"],[1,"text-sm","font-medium","text-white"],["class","flex items-center space-x-2",4,"ngIf"],["class","flex items-center space-x-2 ml-4","formGroupName","lunchBreak",4,"ngIf"],[1,"flex","items-center","space-x-2"],["type","time","formControlName","openTime",1,"form-input","w-20"],[1,"text-gray-400"],["type","time","formControlName","closeTime",1,"form-input","w-20"],["formGroupName","lunchBreak",1,"flex","items-center","space-x-2","ml-4"],[1,"text-sm","text-gray-400"],["type","time","formControlName","startTime",1,"form-input","w-20"],["type","time","formControlName","endTime",1,"form-input","w-20"]],template:function(l,r){l&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),s(4),n(5,"translate"),t(),i(6,"button",4),y("click",function(){return r.saveCapacity()}),s(7),n(8,"translate"),t()(),i(9,"form",5)(10,"div")(11,"label",6),s(12),n(13,"translate"),t(),d(14,"input",7),f(15,yt,3,3,"p",8),t(),i(16,"div")(17,"label",6),s(18),n(19,"translate"),t(),d(20,"input",9),f(21,St,3,3,"p",8),t(),i(22,"div")(23,"label",6),s(24),n(25,"translate"),t(),d(26,"input",10),t(),i(27,"div")(28,"label",6),s(29),n(30,"translate"),t(),d(31,"input",11),t()()(),i(32,"div",1)(33,"div",2)(34,"h3",3),s(35),n(36,"translate"),t(),i(37,"button",12),y("click",function(){return r.saveWorkingHours()}),s(38),n(39,"translate"),t()(),i(40,"form",13)(41,"div",14),M(42,It,9,6,"div",15,bt),t(),i(44,"div",16)(45,"label",6),s(46),n(47,"translate"),t(),i(48,"select",17)(49,"option",18),s(50,"Africa/Tunis (GMT+1)"),t(),i(51,"option",19),s(52,"Africa/Algiers (GMT+1)"),t(),i(53,"option",20),s(54,"Africa/Casablanca (GMT+1)"),t(),i(55,"option",21),s(56,"Europe/Paris (GMT+1)"),t()()()()(),i(57,"div",1)(58,"div",2)(59,"h3",3),s(60),n(61,"translate"),t(),i(62,"button",12),y("click",function(){return r.saveServiceSettings()}),s(63),n(64,"translate"),t()(),i(65,"form",22)(66,"div",23)(67,"div")(68,"label",6),s(69),n(70,"translate"),t(),d(71,"input",24),t(),i(72,"div")(73,"label",6),s(74),n(75,"translate"),t(),d(76,"input",25),t(),i(77,"div")(78,"label",6),s(79),n(80,"translate"),t(),d(81,"input",26),t()(),i(82,"div",27)(83,"label",28),d(84,"input",29),i(85,"span",30),s(86),n(87,"translate"),t()(),i(88,"label",28),d(89,"input",31),i(90,"span",30),s(91),n(92,"translate"),t()()()()(),i(93,"div",1)(94,"div",2)(95,"h3",3),s(96),n(97,"translate"),t(),i(98,"button",12),y("click",function(){return r.saveAppointmentSettings()}),s(99),n(100,"translate"),t()(),i(101,"form",22)(102,"div",32)(103,"div")(104,"label",6),s(105),n(106,"translate"),t(),d(107,"input",33),t(),i(108,"div")(109,"label",6),s(110),n(111,"translate"),t(),d(112,"input",34),t(),i(113,"div")(114,"label",6),s(115),n(116,"translate"),t(),d(117,"input",35),t()(),i(118,"div",27)(119,"label",28),d(120,"input",36),i(121,"span",30),s(122),n(123,"translate"),t()(),i(124,"label",28),d(125,"input",37),i(126,"span",30),s(127),n(128,"translate"),t()(),i(129,"label",28),d(130,"input",38),i(131,"span",30),s(132),n(133,"translate"),t()()(),i(134,"div")(135,"label",6),s(136),n(137,"translate"),t(),i(138,"textarea",39),n(139,"translate"),s(140,"            "),t()()()()()),l&2&&(e(4),p(a(5,39,"settings.operations.garageCapacity")),e(2),c("disabled",r.capacityForm.invalid),e(),g(" ",a(8,41,"settings.operations.saveCapacity")," "),e(2),c("formGroup",r.capacityForm),e(3),g("",a(13,43,"settings.operations.totalLifts")," *"),e(2),x("border-red-500",r.isCapacityFieldInvalid("totalLifts")),e(),b(r.isCapacityFieldInvalid("totalLifts")?15:-1),e(3),g("",a(19,45,"settings.operations.totalMechanics")," *"),e(2),x("border-red-500",r.isCapacityFieldInvalid("totalMechanics")),e(),b(r.isCapacityFieldInvalid("totalMechanics")?21:-1),e(3),g("",a(25,47,"settings.operations.maxDailyAppointments")," *"),e(2),x("border-red-500",r.isCapacityFieldInvalid("maxDailyAppointments")),e(3),p(a(30,49,"settings.operations.avgServiceDuration")),e(6),p(a(36,51,"settings.operations.workingHours")),e(3),g(" ",a(39,53,"settings.operations.saveHours")," "),e(2),c("formGroup",r.workingHoursForm),e(2),A(r.weekDays),e(4),p(a(47,55,"settings.operations.timezone")),e(14),p(a(61,57,"settings.operations.serviceSettings")),e(3),g(" ",a(64,59,"settings.operations.saveSettings")," "),e(2),c("formGroup",r.serviceForm),e(4),p(a(70,61,"settings.operations.defaultServiceDuration")),e(5),p(a(75,63,"settings.operations.bufferTime")),e(5),p(a(80,65,"settings.operations.warrantyPeriod")),e(7),p(a(87,67,"settings.operations.allowOverlapping")),e(5),p(a(92,69,"settings.operations.requireApproval")),e(5),p(a(97,71,"settings.operations.appointmentSettings")),e(3),g(" ",a(100,73,"settings.operations.saveAppointmentSettings")," "),e(2),c("formGroup",r.appointmentForm),e(4),p(a(106,75,"settings.operations.maxAdvanceBooking")),e(5),p(a(111,77,"settings.operations.minAdvanceBooking")),e(5),p(a(116,79,"settings.operations.depositPercentage")),e(7),p(a(123,81,"settings.operations.allowOnlineBooking")),e(5),p(a(128,83,"settings.operations.allowSameDayBooking")),e(5),p(a(133,85,"settings.operations.requireDeposit")),e(4),p(a(137,87,"settings.operations.cancellationPolicy")),e(2),c("placeholder",a(139,89,"settings.operations.cancellationPlaceholder")))},dependencies:[w,et,Y,q,Q,Z,$,ne,U,J,O,V,le,re,L,H,K,F],styles:["input[type=time][_ngcontent-%COMP%]{color-scheme:dark}input[type=time][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{filter:invert(1);cursor:pointer}"]})};var Ct=(m,o)=>o.value;function _t(m,o){m&1&&(i(0,"p",9),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.business.taxSettings.taxRateValidation")))}function Et(m,o){if(m&1){let l=W();i(0,"label",20)(1,"input",40),y("change",function(u){let S=D(l).$implicit,X=C();return P(X.onPaymentMethodChange(S.value,u))}),t(),i(2,"div")(3,"div",41),s(4),n(5,"translate"),t(),i(6,"div",42),s(7),n(8,"translate"),t()()()}if(m&2){let l=o.$implicit,r=C();e(),c("value",l.value)("checked",r.isPaymentMethodSelected(l.value)),e(3),p(a(5,4,"settings.business.paymentSettings.methods."+l.value+".label")),e(3),p(a(8,6,"settings.business.paymentSettings.methods."+l.value+".description"))}}function kt(m,o){m&1&&(i(0,"div")(1,"label",7),s(2),n(3,"translate"),t(),i(4,"textarea",43),n(5,"translate"),s(6,"              "),t()()),m&2&&(e(2),p(a(3,3,"settings.business.invoiceSettings.termsAndConditions")),e(2),c("placeholder",I(a(5,5,"settings.business.invoiceSettings.termsPlaceholder"))))}var ue=class m{fb=B(j);settings;save=new G;taxForm;paymentForm;pricingForm;invoiceForm;selectedPaymentMethods=[];paymentMethods=[{value:"cash",label:"Cash",description:"Cash payments"},{value:"card",label:"Credit/Debit Card",description:"Card payments"},{value:"bank-transfer",label:"Bank Transfer",description:"Wire transfers"},{value:"check",label:"Check",description:"Bank checks"},{value:"credit",label:"Credit Terms",description:"Payment on account"}];ngOnInit(){this.initializeForms(),this.populateForms()}ngOnChanges(){this.taxForm&&this.settings&&this.populateForms()}initializeForms(){this.taxForm=this.fb.group({defaultTaxRate:[19,[v.required,v.min(0),v.max(100)]],taxIncluded:[!1],taxLabel:["TVA"],taxId:[""],applyTaxToLabor:[!0],applyTaxToParts:[!0]}),this.paymentForm=this.fb.group({defaultPaymentTerms:["Payment due upon completion"],lateFeePercentage:[0,[v.min(0),v.max(25)]],lateFeeGracePeriodDays:[0,[v.min(0)]],allowPartialPayments:[!1],requireDepositPercentage:[0,[v.min(0),v.max(100)]]}),this.pricingForm=this.fb.group({laborRatePerHour:[30,[v.min(0)]],weekendSurcharge:[0,[v.min(0),v.max(100)]],urgentJobSurcharge:[0,[v.min(0),v.max(200)]],bulkDiscountThreshold:[0,[v.min(0)]],bulkDiscountPercentage:[0,[v.min(0),v.max(50)]],loyalCustomerDiscountPercentage:[0,[v.min(0),v.max(50)]],autoApplyDiscounts:[!1]}),this.invoiceForm=this.fb.group({invoicePrefix:["INV"],invoiceNumberFormat:["INV-{000001}"],nextInvoiceNumber:[1,[v.min(1)]],defaultPaymentTerms:["Payment due upon completion"],showItemCodes:[!1],showMechanicNames:[!1],includeTermsAndConditions:[!1],termsAndConditions:[""],footerText:[""]})}populateForms(){this.settings&&(this.taxForm.patchValue(this.settings.taxSettings),this.paymentForm.patchValue(this.settings.paymentSettings),this.pricingForm.patchValue(this.settings.pricingRules),this.invoiceForm.patchValue(this.settings.invoiceSettings),this.selectedPaymentMethods=[...this.settings.paymentSettings.acceptedMethods])}isTaxFieldInvalid(o){let l=this.taxForm.get(o);return!!(l&&l.invalid&&(l.dirty||l.touched))}isPaymentMethodSelected(o){return this.selectedPaymentMethods.includes(o)}onPaymentMethodChange(o,l){l.target.checked?this.selectedPaymentMethods.push(o):this.selectedPaymentMethods=this.selectedPaymentMethods.filter(u=>u!==o)}includeTermsAndConditions(){return this.invoiceForm.get("includeTermsAndConditions")?.value||!1}saveTaxSettings(){this.taxForm.valid&&this.save.emit({taxSettings:this.taxForm.value})}savePaymentSettings(){let o=E(h({},this.paymentForm.value),{acceptedMethods:this.selectedPaymentMethods});this.save.emit({paymentSettings:o})}savePricingRules(){this.pricingForm.valid&&this.save.emit({pricingRules:this.pricingForm.value})}saveInvoiceSettings(){this.invoiceForm.valid&&this.save.emit({invoiceSettings:this.invoiceForm.value})}static \u0275fac=function(l){return new(l||m)};static \u0275cmp=T({type:m,selectors:[["app-business-settings"]],inputs:{settings:"settings"},outputs:{save:"save"},features:[R],decls:188,vars:141,consts:[[1,"space-y-6"],[1,"glass-card"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-white"],["type","button",1,"btn-primary","text-sm",3,"click","disabled"],[1,"space-y-4",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"form-label"],["type","number","formControlName","defaultTaxRate","min","0","max","100","step","0.1",1,"form-input"],[1,"mt-1","text-sm","text-red-400"],["type","text","formControlName","taxLabel",1,"form-input",3,"placeholder"],["type","text","formControlName","taxId",1,"form-input",3,"placeholder"],[1,"space-y-3"],[1,"flex","items-center"],["type","checkbox","formControlName","taxIncluded",1,"form-checkbox","mr-2"],[1,"text-sm","font-medium","text-gray-300"],["type","checkbox","formControlName","applyTaxToLabor",1,"form-checkbox","mr-2"],["type","checkbox","formControlName","applyTaxToParts",1,"form-checkbox","mr-2"],["type","button",1,"btn-primary","text-sm",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-3","mt-2"],[1,"flex","items-center","p-3","border","border-gray-600","rounded-lg","hover:bg-gray-700/50","cursor-pointer"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","number","formControlName","lateFeePercentage","min","0","max","25","step","0.5",1,"form-input"],["type","number","formControlName","lateFeeGracePeriodDays","min","0","max","30",1,"form-input"],["formControlName","defaultPaymentTerms","rows","2",1,"form-textarea",3,"placeholder"],["type","checkbox","formControlName","allowPartialPayments",1,"form-checkbox","mr-2"],["type","number","formControlName","laborRatePerHour","min","0","step","5",1,"form-input"],["type","number","formControlName","weekendSurcharge","min","0","max","100","step","5",1,"form-input"],["type","number","formControlName","urgentJobSurcharge","min","0","max","200","step","10",1,"form-input"],["type","number","formControlName","loyalCustomerDiscountPercentage","min","0","max","50","step","1",1,"form-input"],["type","number","formControlName","bulkDiscountThreshold","min","0","step","100",1,"form-input"],["type","number","formControlName","bulkDiscountPercentage","min","0","max","50","step","1",1,"form-input"],["type","checkbox","formControlName","autoApplyDiscounts",1,"form-checkbox","mr-2"],["type","text","formControlName","invoicePrefix",1,"form-input",3,"placeholder"],["type","text","formControlName","invoiceNumberFormat",1,"form-input",3,"placeholder"],["type","number","formControlName","nextInvoiceNumber","min","1",1,"form-input"],["type","checkbox","formControlName","showItemCodes",1,"form-checkbox","mr-2"],["type","checkbox","formControlName","showMechanicNames",1,"form-checkbox","mr-2"],["type","checkbox","formControlName","includeTermsAndConditions",1,"form-checkbox","mr-2"],["type","text","formControlName","footerText",1,"form-input",3,"placeholder"],["type","checkbox",1,"form-checkbox","mr-3",3,"change","value","checked"],[1,"font-medium","text-white"],[1,"text-sm","text-gray-400"],["formControlName","termsAndConditions","rows","4",1,"form-textarea",3,"placeholder"]],template:function(l,r){l&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),s(4),n(5,"translate"),t(),i(6,"button",4),y("click",function(){return r.saveTaxSettings()}),s(7),n(8,"translate"),t()(),i(9,"form",5)(10,"div",6)(11,"div")(12,"label",7),s(13),n(14,"translate"),t(),d(15,"input",8),f(16,_t,3,3,"p",9),t(),i(17,"div")(18,"label",7),s(19),n(20,"translate"),t(),d(21,"input",10),n(22,"translate"),t(),i(23,"div")(24,"label",7),s(25),n(26,"translate"),t(),d(27,"input",11),n(28,"translate"),t()(),i(29,"div",12)(30,"label",13),d(31,"input",14),i(32,"span",15),s(33),n(34,"translate"),t()(),i(35,"label",13),d(36,"input",16),i(37,"span",15),s(38),n(39,"translate"),t()(),i(40,"label",13),d(41,"input",17),i(42,"span",15),s(43),n(44,"translate"),t()()()()(),i(45,"div",1)(46,"div",2)(47,"h3",3),s(48),n(49,"translate"),t(),i(50,"button",18),y("click",function(){return r.savePaymentSettings()}),s(51),n(52,"translate"),t()(),i(53,"form",5)(54,"div")(55,"label",7),s(56),n(57,"translate"),t(),i(58,"div",19),M(59,Et,9,8,"label",20,Ct),t()(),i(61,"div",21)(62,"div")(63,"label",7),s(64),n(65,"translate"),t(),d(66,"input",22),t(),i(67,"div")(68,"label",7),s(69),n(70,"translate"),t(),d(71,"input",23),t()(),i(72,"div")(73,"label",7),s(74),n(75,"translate"),t(),i(76,"textarea",24),n(77,"translate"),s(78,"            "),t()(),i(79,"div",12)(80,"label",13),d(81,"input",25),i(82,"span",15),s(83),n(84,"translate"),t()()()()(),i(85,"div",1)(86,"div",2)(87,"h3",3),s(88),n(89,"translate"),t(),i(90,"button",18),y("click",function(){return r.savePricingRules()}),s(91),n(92,"translate"),t()(),i(93,"form",5)(94,"div",21)(95,"div")(96,"label",7),s(97),n(98,"translate"),t(),d(99,"input",26),t(),i(100,"div")(101,"label",7),s(102),n(103,"translate"),t(),d(104,"input",27),t(),i(105,"div")(106,"label",7),s(107),n(108,"translate"),t(),d(109,"input",28),t(),i(110,"div")(111,"label",7),s(112),n(113,"translate"),t(),d(114,"input",29),t(),i(115,"div")(116,"label",7),s(117),n(118,"translate"),t(),d(119,"input",30),t(),i(120,"div")(121,"label",7),s(122),n(123,"translate"),t(),d(124,"input",31),t()(),i(125,"div")(126,"label",13),d(127,"input",32),i(128,"span",15),s(129),n(130,"translate"),t()()()()(),i(131,"div",1)(132,"div",2)(133,"h3",3),s(134),n(135,"translate"),t(),i(136,"button",18),y("click",function(){return r.saveInvoiceSettings()}),s(137),n(138,"translate"),t()(),i(139,"form",5)(140,"div",6)(141,"div")(142,"label",7),s(143),n(144,"translate"),t(),d(145,"input",33),n(146,"translate"),t(),i(147,"div")(148,"label",7),s(149),n(150,"translate"),t(),d(151,"input",34),n(152,"translate"),t(),i(153,"div")(154,"label",7),s(155),n(156,"translate"),t(),d(157,"input",35),t()(),i(158,"div")(159,"label",7),s(160),n(161,"translate"),t(),i(162,"textarea",24),n(163,"translate"),s(164,"            "),t()(),i(165,"div",12)(166,"label",13),d(167,"input",36),i(168,"span",15),s(169),n(170,"translate"),t()(),i(171,"label",13),d(172,"input",37),i(173,"span",15),s(174),n(175,"translate"),t()(),i(176,"label",13),d(177,"input",38),i(178,"span",15),s(179),n(180,"translate"),t()()(),f(181,kt,7,7,"div"),i(182,"div")(183,"label",7),s(184),n(185,"translate"),t(),d(186,"input",39),n(187,"translate"),t()()()()),l&2&&(e(4),p(a(5,59,"settings.business.taxSettings.title")),e(2),c("disabled",r.taxForm.invalid),e(),g(" ",a(8,61,"settings.business.taxSettings.saveButton")," "),e(2),c("formGroup",r.taxForm),e(4),p(a(14,63,"settings.business.taxSettings.defaultTaxRate")),e(2),x("border-red-500",r.isTaxFieldInvalid("defaultTaxRate")),e(),b(r.isTaxFieldInvalid("defaultTaxRate")?16:-1),e(3),p(a(20,65,"settings.business.taxSettings.taxLabel")),e(2),c("placeholder",I(a(22,67,"settings.business.taxSettings.taxLabelPlaceholder"))),e(4),p(a(26,69,"settings.business.taxSettings.taxId")),e(2),c("placeholder",I(a(28,71,"settings.business.taxSettings.taxIdPlaceholder"))),e(6),p(a(34,73,"settings.business.taxSettings.taxIncluded")),e(5),p(a(39,75,"settings.business.taxSettings.applyTaxToLabor")),e(5),p(a(44,77,"settings.business.taxSettings.applyTaxToParts")),e(5),p(a(49,79,"settings.business.paymentSettings.title")),e(3),g(" ",a(52,81,"settings.business.paymentSettings.saveButton")," "),e(2),c("formGroup",r.paymentForm),e(3),p(a(57,83,"settings.business.paymentSettings.acceptedMethods")),e(3),A(r.paymentMethods),e(5),p(a(65,85,"settings.business.paymentSettings.lateFee")),e(5),p(a(70,87,"settings.business.paymentSettings.gracePeriod")),e(5),p(a(75,89,"settings.business.paymentSettings.defaultTerms")),e(2),c("placeholder",I(a(77,91,"settings.business.paymentSettings.defaultTermsPlaceholder"))),e(7),p(a(84,93,"settings.business.paymentSettings.allowPartialPayments")),e(5),p(a(89,95,"settings.business.pricingRules.title")),e(3),g(" ",a(92,97,"settings.business.pricingRules.saveButton")," "),e(2),c("formGroup",r.pricingForm),e(4),be("",a(98,99,"settings.business.pricingRules.laborRate")," (",r.settings.currency||"TND",")"),e(5),p(a(103,101,"settings.business.pricingRules.weekendSurcharge")),e(5),p(a(108,103,"settings.business.pricingRules.urgentSurcharge")),e(5),p(a(113,105,"settings.business.pricingRules.loyalDiscount")),e(5),be("",a(118,107,"settings.business.pricingRules.bulkThreshold")," (",r.settings.currency||"TND",")"),e(5),p(a(123,109,"settings.business.pricingRules.bulkDiscount")),e(7),p(a(130,111,"settings.business.pricingRules.autoApplyDiscounts")),e(5),p(a(135,113,"settings.business.invoiceSettings.title")),e(3),g(" ",a(138,115,"settings.business.invoiceSettings.saveButton")," "),e(2),c("formGroup",r.invoiceForm),e(4),p(a(144,117,"settings.business.invoiceSettings.invoicePrefix")),e(2),c("placeholder",I(a(146,119,"settings.business.invoiceSettings.invoicePrefixPlaceholder"))),e(4),p(a(150,121,"settings.business.invoiceSettings.numberFormat")),e(2),c("placeholder",I(a(152,123,"settings.business.invoiceSettings.numberFormatPlaceholder"))),e(4),p(a(156,125,"settings.business.invoiceSettings.nextInvoiceNumber")),e(5),p(a(161,127,"settings.business.invoiceSettings.defaultPaymentTerms")),e(2),c("placeholder",I(a(163,129,"settings.business.invoiceSettings.paymentTermsPlaceholder"))),e(7),p(a(170,131,"settings.business.invoiceSettings.showItemCodes")),e(5),p(a(175,133,"settings.business.invoiceSettings.showMechanicNames")),e(5),p(a(180,135,"settings.business.invoiceSettings.includeTermsAndConditions")),e(2),b(r.includeTermsAndConditions()?181:-1),e(3),p(a(185,137,"settings.business.invoiceSettings.footerText")),e(2),c("placeholder",I(a(187,139,"settings.business.invoiceSettings.footerTextPlaceholder"))))},dependencies:[w,Y,q,$,ne,U,O,V,le,re,L,H,F],encapsulation:2})};function Bt(m,o){m&1&&(_(),i(0,"svg",59),d(1,"circle",60)(2,"path",61),t(),s(3),n(4,"translate")),m&2&&(e(3),g(" ",a(4,1,"settings.system.saving")," "))}function Tt(m,o){m&1&&(s(0),n(1,"translate")),m&2&&g(" ",a(1,1,"settings.system.saveChanges")," ")}function wt(m,o){m&1&&(i(0,"p",27),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.system.security.sessionTimeoutRequired")))}function Ft(m,o){m&1&&(i(0,"p",27),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.system.dataRetention.customerDataRequired")))}function Nt(m,o){m&1&&(i(0,"p",27),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.system.dataRetention.maintenanceRecordsRequired")))}function Dt(m,o){m&1&&(i(0,"p",27),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"settings.system.dataRetention.invoiceDataRequired")))}function Pt(m,o){if(m&1&&(i(0,"div",53)(1,"p",57)(2,"strong"),s(3),n(4,"translate"),t(),s(5),n(6,"date"),t()()),m&2){let l=C();e(3),g("",a(4,2,"settings.system.backup.lastBackup"),":"),e(2),g(" ",ye(6,4,l.lastBackupDate,"medium")," ")}}function Gt(m,o){m&1&&(_(),i(0,"svg",59),d(1,"circle",60)(2,"path",61),t(),s(3),n(4,"translate")),m&2&&(e(3),g(" ",a(4,1,"settings.system.backup.creatingBackup")," "))}function Mt(m,o){m&1&&(s(0),n(1,"translate")),m&2&&g(" ",a(1,1,"settings.system.backup.createManualBackup")," ")}var ge=class m{fb=B(j);settings;save=new G;systemForm;isSaving=!1;isCreatingBackup=!1;lastBackupDate=null;systemInfo={version:"1.0.0",lastUpdate:new Date("2024-01-15"),databaseSize:"45.2 MB"};ngOnInit(){this.initializeForm(),this.populateForm(),this.loadBackupInfo()}ngOnChanges(){this.systemForm&&this.settings&&this.populateForm()}initializeForm(){this.systemForm=this.fb.group({notifications:this.fb.group({enableBrowserNotifications:[!0],enableSmsNotifications:[!1],enableEmailNotifications:[!0]}),security:this.fb.group({sessionTimeoutMinutes:[480,v.required],enableTwoFactor:[!1],allowMultipleSessions:[!0]}),dataRetention:this.fb.group({customerDataRetentionYears:[7,v.required],maintenanceLogRetentionYears:[5,v.required],invoiceRetentionYears:[10,v.required],autoArchiveCompletedJobs:[!0]}),backup:this.fb.group({autoBackupEnabled:[!1],backupFrequency:["weekly"],backupRetentionDays:[30]})})}populateForm(){this.settings&&this.systemForm.patchValue({notifications:{enableBrowserNotifications:this.settings.notifications?.enableBrowserNotifications??!0,enableSmsNotifications:this.settings.notifications?.enableSmsNotifications??!1,enableEmailNotifications:this.settings.notifications?.enableEmailNotifications??!0},security:{sessionTimeoutMinutes:this.settings.security?.sessionTimeoutMinutes??480,enableTwoFactor:this.settings.security?.enableTwoFactor??!1,allowMultipleSessions:this.settings.security?.allowMultipleSessions??!0},dataRetention:{customerDataRetentionYears:this.settings.dataRetention?.customerDataRetentionYears??7,maintenanceLogRetentionYears:this.settings.dataRetention?.maintenanceLogRetentionYears??5,invoiceRetentionYears:this.settings.dataRetention?.invoiceRetentionYears??10,autoArchiveCompletedJobs:this.settings.dataRetention?.autoArchiveCompletedJobs??!0},backup:{autoBackupEnabled:this.settings.backup?.autoBackupEnabled??!1,backupFrequency:this.settings.backup?.backupFrequency??"weekly",backupRetentionDays:this.settings.backup?.backupRetentionDays??30}})}loadBackupInfo(){this.lastBackupDate=new Date("2024-01-20T10:30:00")}isFieldInvalid(o){let l=this.systemForm.get(o);return!!(l&&l.invalid&&(l.dirty||l.touched))}onSave(){if(this.systemForm.valid){this.isSaving=!0;let o=this.systemForm.value,l={notifications:{enableBrowserNotifications:o.notifications.enableBrowserNotifications,enableEmailNotifications:o.notifications.enableEmailNotifications,enableSmsNotifications:o.notifications.enableSmsNotifications,notificationChannels:this.settings?.notifications?.notificationChannels||[],quietHours:this.settings?.notifications?.quietHours||{enabled:!1,startTime:"22:00",endTime:"08:00"}},security:{sessionTimeoutMinutes:o.security.sessionTimeoutMinutes,requirePasswordReset:this.settings?.security?.requirePasswordReset||!1,passwordResetIntervalDays:this.settings?.security?.passwordResetIntervalDays||90,enableTwoFactor:o.security.enableTwoFactor,allowMultipleSessions:o.security.allowMultipleSessions,ipWhitelist:this.settings?.security?.ipWhitelist||[],auditLogRetentionDays:this.settings?.security?.auditLogRetentionDays||365},dataRetention:{customerDataRetentionYears:o.dataRetention.customerDataRetentionYears,invoiceRetentionYears:o.dataRetention.invoiceRetentionYears,maintenanceLogRetentionYears:o.dataRetention.maintenanceLogRetentionYears,deleteInactiveCustomersAfterYears:this.settings?.dataRetention?.deleteInactiveCustomersAfterYears||3,autoArchiveCompletedJobs:o.dataRetention.autoArchiveCompletedJobs,archiveAfterMonths:this.settings?.dataRetention?.archiveAfterMonths||12},backup:{autoBackupEnabled:o.backup.autoBackupEnabled,backupFrequency:o.backup.backupFrequency,backupRetentionDays:o.backup.backupRetentionDays,includeImages:this.settings?.backup?.includeImages||!0,cloudBackupEnabled:this.settings?.backup?.cloudBackupEnabled||!1,lastBackupDate:this.settings?.backup?.lastBackupDate}};this.save.emit(l),setTimeout(()=>{this.isSaving=!1},1e3)}}createManualBackup(){this.isCreatingBackup=!0,setTimeout(()=>{this.isCreatingBackup=!1,this.lastBackupDate=new Date},2e3)}resetForm(){this.populateForm(),this.systemForm.markAsPristine(),this.systemForm.markAsUntouched()}static \u0275fac=function(l){return new(l||m)};static \u0275cmp=T({type:m,selectors:[["app-system-settings"]],inputs:{settings:"settings"},outputs:{save:"save"},features:[R],decls:240,vars:197,consts:[[1,"glass-card"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-white"],[1,"flex","space-x-2"],["type","button",1,"btn-secondary","text-sm",3,"click"],["type","button",1,"btn-primary","text-sm",3,"click","disabled"],[1,"space-y-8",3,"formGroup"],[1,"text-md","font-medium","text-white","mb-4"],["formGroupName","notifications",1,"space-y-4"],[1,"flex","items-start","space-x-3"],["type","checkbox","id","browserNotifications","formControlName","enableBrowserNotifications",1,"mt-1","w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],[1,"flex-1"],["for","browserNotifications",1,"form-label","mb-1"],[1,"text-sm","text-gray-400"],["type","checkbox","id","smsNotifications","formControlName","enableSmsNotifications",1,"mt-1","w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","smsNotifications",1,"form-label","mb-1"],["type","checkbox","id","emailNotifications","formControlName","enableEmailNotifications",1,"mt-1","w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","emailNotifications",1,"form-label","mb-1"],["formGroupName","security",1,"space-y-4"],[1,"form-label"],["formControlName","sessionTimeoutMinutes",1,"form-select"],["value","15"],["value","30"],["value","60"],["value","120"],["value","240"],["value","480"],[1,"mt-1","text-sm","text-red-600","dark:text-red-400"],["type","checkbox","id","twoFactorAuth","formControlName","enableTwoFactor",1,"mt-1","w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","twoFactorAuth",1,"form-label","mb-1"],["type","checkbox","id","multipleSessions","formControlName","allowMultipleSessions",1,"mt-1","w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","multipleSessions",1,"form-label","mb-1"],["formGroupName","dataRetention",1,"space-y-4"],["formControlName","customerDataRetentionYears",1,"form-select"],["value","3"],["value","5"],["value","7"],["value","10"],["value","0"],["formControlName","maintenanceLogRetentionYears",1,"form-select"],["formControlName","invoiceRetentionYears",1,"form-select"],["type","checkbox","id","autoArchive","formControlName","autoArchiveCompletedJobs",1,"mt-1","w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","autoArchive",1,"form-label","mb-1"],["formGroupName","backup",1,"space-y-4"],["type","checkbox","id","autoBackup","formControlName","autoBackupEnabled",1,"mt-1","w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","autoBackup",1,"form-label","mb-1"],["formControlName","backupFrequency",1,"form-select",3,"disabled"],["value","daily"],["value","weekly"],["value","monthly"],["formControlName","backupRetentionDays",1,"form-select",3,"disabled"],["value","90"],["value","365"],[1,"bg-gray-800/30","p-4","rounded-lg"],["type","button",1,"btn-secondary",3,"click","disabled"],[1,"bg-gray-50","dark:bg-gray-700","p-4","rounded-lg","space-y-2"],[1,"flex","justify-between"],[1,"text-sm","text-gray-300"],[1,"text-sm","font-medium","text-white"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(l,r){if(l&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),s(3),n(4,"translate"),t(),i(5,"div",3)(6,"button",4),y("click",function(){return r.resetForm()}),s(7),n(8,"translate"),t(),i(9,"button",5),y("click",function(){return r.onSave()}),f(10,Bt,5,3)(11,Tt,2,3),t()()(),i(12,"form",6)(13,"div")(14,"h3",7),s(15),n(16,"translate"),t(),i(17,"div",8)(18,"div",9),d(19,"input",10),i(20,"div",11)(21,"label",12),s(22),n(23,"translate"),t(),i(24,"p",13),s(25),n(26,"translate"),t()()(),i(27,"div",9),d(28,"input",14),i(29,"div",11)(30,"label",15),s(31),n(32,"translate"),t(),i(33,"p",13),s(34),n(35,"translate"),t()()(),i(36,"div",9),d(37,"input",16),i(38,"div",11)(39,"label",17),s(40),n(41,"translate"),t(),i(42,"p",13),s(43),n(44,"translate"),t()()()()(),i(45,"div")(46,"h3",7),s(47),n(48,"translate"),t(),i(49,"div",18)(50,"div")(51,"label",19),s(52),n(53,"translate"),t(),i(54,"select",20)(55,"option",21),s(56),n(57,"translate"),t(),i(58,"option",22),s(59),n(60,"translate"),t(),i(61,"option",23),s(62),n(63,"translate"),t(),i(64,"option",24),s(65),n(66,"translate"),t(),i(67,"option",25),s(68),n(69,"translate"),t(),i(70,"option",26),s(71),n(72,"translate"),t()(),f(73,wt,3,3,"p",27),t(),i(74,"div",9),d(75,"input",28),i(76,"div",11)(77,"label",29),s(78),n(79,"translate"),t(),i(80,"p",13),s(81),n(82,"translate"),t()()(),i(83,"div",9),d(84,"input",30),i(85,"div",11)(86,"label",31),s(87),n(88,"translate"),t(),i(89,"p",13),s(90),n(91,"translate"),t()()()()(),i(92,"div")(93,"h3",7),s(94),n(95,"translate"),t(),i(96,"div",32)(97,"div")(98,"label",19),s(99),n(100,"translate"),t(),i(101,"select",33)(102,"option",34),s(103),n(104,"translate"),t(),i(105,"option",35),s(106),n(107,"translate"),t(),i(108,"option",36),s(109),n(110,"translate"),t(),i(111,"option",37),s(112),n(113,"translate"),t(),i(114,"option",38),s(115),n(116,"translate"),t()(),f(117,Ft,3,3,"p",27),t(),i(118,"div")(119,"label",19),s(120),n(121,"translate"),t(),i(122,"select",39)(123,"option",34),s(124),n(125,"translate"),t(),i(126,"option",35),s(127),n(128,"translate"),t(),i(129,"option",36),s(130),n(131,"translate"),t(),i(132,"option",37),s(133),n(134,"translate"),t(),i(135,"option",38),s(136),n(137,"translate"),t()(),f(138,Nt,3,3,"p",27),t(),i(139,"div")(140,"label",19),s(141),n(142,"translate"),t(),i(143,"select",40)(144,"option",35),s(145),n(146,"translate"),t(),i(147,"option",36),s(148),n(149,"translate"),t(),i(150,"option",37),s(151),n(152,"translate"),t(),i(153,"option",38),s(154),n(155,"translate"),t()(),f(156,Dt,3,3,"p",27),t(),i(157,"div",9),d(158,"input",41),i(159,"div",11)(160,"label",42),s(161),n(162,"translate"),t(),i(163,"p",13),s(164),n(165,"translate"),t()()()()(),i(166,"div")(167,"h3",7),s(168),n(169,"translate"),t(),i(170,"div",43)(171,"div",9),d(172,"input",44),i(173,"div",11)(174,"label",45),s(175),n(176,"translate"),t(),i(177,"p",13),s(178),n(179,"translate"),t()()(),i(180,"div")(181,"label",19),s(182),n(183,"translate"),t(),i(184,"select",46)(185,"option",47),s(186),n(187,"translate"),t(),i(188,"option",48),s(189),n(190,"translate"),t(),i(191,"option",49),s(192),n(193,"translate"),t()()(),i(194,"div")(195,"label",19),s(196),n(197,"translate"),t(),i(198,"select",50)(199,"option",36),s(200),n(201,"translate"),t(),i(202,"option",22),s(203),n(204,"translate"),t(),i(205,"option",51),s(206),n(207,"translate"),t(),i(208,"option",52),s(209),n(210,"translate"),t()()(),f(211,Pt,7,7,"div",53),i(212,"div")(213,"button",54),y("click",function(){return r.createManualBackup()}),f(214,Gt,5,3)(215,Mt,2,3),t()()()(),i(216,"div")(217,"h3",7),s(218),n(219,"translate"),t(),i(220,"div",55)(221,"div",56)(222,"span",57),s(223),n(224,"translate"),t(),i(225,"span",58),s(226),t()(),i(227,"div",56)(228,"span",57),s(229),n(230,"translate"),t(),i(231,"span",58),s(232),n(233,"date"),t()(),i(234,"div",56)(235,"span",57),s(236),n(237,"translate"),t(),i(238,"span",58),s(239),t()()()()()()),l&2){let u,S;e(3),p(a(4,80,"settings.system.title")),e(4),g(" ",a(8,82,"settings.system.resetButton")," "),e(2),c("disabled",r.systemForm.invalid||r.isSaving),e(),b(r.isSaving?10:11),e(2),c("formGroup",r.systemForm),e(3),p(a(16,84,"settings.system.notifications.title")),e(7),p(a(23,86,"settings.system.notifications.browserNotifications")),e(3),p(a(26,88,"settings.system.notifications.browserDescription")),e(6),p(a(32,90,"settings.system.notifications.smsNotifications")),e(3),p(a(35,92,"settings.system.notifications.smsDescription")),e(6),p(a(41,94,"settings.system.notifications.emailNotifications")),e(3),p(a(44,96,"settings.system.notifications.emailDescription")),e(4),p(a(48,98,"settings.system.security.title")),e(5),p(a(53,100,"settings.system.security.sessionTimeout")),e(2),x("border-red-500",r.isFieldInvalid("security.sessionTimeoutMinutes")),e(2),p(a(57,102,"settings.system.security.timeouts.15min")),e(3),p(a(60,104,"settings.system.security.timeouts.30min")),e(3),p(a(63,106,"settings.system.security.timeouts.1hour")),e(3),p(a(66,108,"settings.system.security.timeouts.2hours")),e(3),p(a(69,110,"settings.system.security.timeouts.4hours")),e(3),p(a(72,112,"settings.system.security.timeouts.8hours")),e(2),b(r.isFieldInvalid("security.sessionTimeoutMinutes")?73:-1),e(5),p(a(79,114,"settings.system.security.twoFactorAuth")),e(3),p(a(82,116,"settings.system.security.twoFactorDescription")),e(6),p(a(88,118,"settings.system.security.multipleSessions")),e(3),p(a(91,120,"settings.system.security.multipleSessionsDescription")),e(4),p(a(95,122,"settings.system.dataRetention.title")),e(5),p(a(100,124,"settings.system.dataRetention.customerData")),e(2),x("border-red-500",r.isFieldInvalid("dataRetention.customerDataRetentionYears")),e(2),p(a(104,126,"settings.system.dataRetention.periods.3years")),e(3),p(a(107,128,"settings.system.dataRetention.periods.5years")),e(3),p(a(110,130,"settings.system.dataRetention.periods.7years")),e(3),p(a(113,132,"settings.system.dataRetention.periods.10years")),e(3),p(a(116,134,"settings.system.dataRetention.periods.neverDelete")),e(2),b(r.isFieldInvalid("dataRetention.customerDataRetentionYears")?117:-1),e(3),p(a(121,136,"settings.system.dataRetention.maintenanceRecords")),e(2),x("border-red-500",r.isFieldInvalid("dataRetention.maintenanceLogRetentionYears")),e(2),p(a(125,138,"settings.system.dataRetention.periods.3years")),e(3),p(a(128,140,"settings.system.dataRetention.periods.5years")),e(3),p(a(131,142,"settings.system.dataRetention.periods.7years")),e(3),p(a(134,144,"settings.system.dataRetention.periods.10years")),e(3),p(a(137,146,"settings.system.dataRetention.periods.neverDelete")),e(2),b(r.isFieldInvalid("dataRetention.maintenanceLogRetentionYears")?138:-1),e(3),p(a(142,148,"settings.system.dataRetention.invoiceData")),e(2),x("border-red-500",r.isFieldInvalid("dataRetention.invoiceRetentionYears")),e(2),p(a(146,150,"settings.system.dataRetention.periods.5years")),e(3),p(a(149,152,"settings.system.dataRetention.periods.7years")),e(3),p(a(152,154,"settings.system.dataRetention.periods.10years")),e(3),p(a(155,156,"settings.system.dataRetention.periods.neverDelete")),e(2),b(r.isFieldInvalid("dataRetention.invoiceRetentionYears")?156:-1),e(5),p(a(162,158,"settings.system.dataRetention.autoArchive")),e(3),p(a(165,160,"settings.system.dataRetention.autoArchiveDescription")),e(4),p(a(169,162,"settings.system.backup.title")),e(7),p(a(176,164,"settings.system.backup.automaticBackup")),e(3),p(a(179,166,"settings.system.backup.automaticBackupDescription")),e(4),p(a(183,168,"settings.system.backup.frequency")),e(2),c("disabled",!((u=r.systemForm.get("backup.autoBackupEnabled"))!=null&&u.value)),e(2),p(a(187,170,"settings.system.backup.frequencies.daily")),e(3),p(a(190,172,"settings.system.backup.frequencies.weekly")),e(3),p(a(193,174,"settings.system.backup.frequencies.monthly")),e(4),p(a(197,176,"settings.system.backup.retention")),e(2),c("disabled",!((S=r.systemForm.get("backup.autoBackupEnabled"))!=null&&S.value)),e(2),p(a(201,178,"settings.system.backup.retentionPeriods.7days")),e(3),p(a(204,180,"settings.system.backup.retentionPeriods.30days")),e(3),p(a(207,182,"settings.system.backup.retentionPeriods.90days")),e(3),p(a(210,184,"settings.system.backup.retentionPeriods.1year")),e(2),b(r.lastBackupDate?211:-1),e(2),c("disabled",r.isCreatingBackup),e(),b(r.isCreatingBackup?214:215),e(4),p(a(219,186,"settings.system.systemInfo.title")),e(5),g("",a(224,188,"settings.system.systemInfo.appVersion"),":"),e(3),p(r.systemInfo.version),e(3),g("",a(230,190,"settings.system.systemInfo.lastUpdate"),":"),e(3),p(ye(233,192,r.systemInfo.lastUpdate,"medium")),e(4),g("",a(237,195,"settings.system.systemInfo.databaseSize"),":"),e(3),p(r.systemInfo.databaseSize)}},dependencies:[w,tt,Y,q,Q,Z,U,J,O,V,L,H,K,F],encapsulation:2})};var oe=(m,o)=>o.value,At=(m,o)=>o.name;function Rt(m,o){m&1&&(_(),i(0,"svg",55),d(1,"circle",56)(2,"path",57),t(),s(3),n(4,"translate")),m&2&&(e(3),g(" ",a(4,1,"settings.integrations.saving")," "))}function Ot(m,o){m&1&&(s(0),n(1,"translate")),m&2&&g(" ",a(1,1,"settings.integrations.saveChanges")," ")}function Vt(m,o){m&1&&(i(0,"span",10),s(1),n(2,"translate"),t()),m&2&&(e(),p(a(2,1,"tiers.pro")))}function qt(m,o){if(m&1&&(i(0,"option",14),s(1),t()),m&2){let l=o.$implicit;c("value",l.value),e(),p(l.label)}}function Lt(m,o){m&1&&(_(),i(0,"svg",55),d(1,"circle",56)(2,"path",57),t(),s(3),n(4,"translate")),m&2&&(e(3),g(" ",a(4,1,"settings.integrations.sms.testing")," "))}function Ht(m,o){m&1&&(s(0),n(1,"translate")),m&2&&g(" ",a(1,1,"settings.integrations.sms.testConnection")," ")}function jt(m,o){if(m&1&&(i(0,"option",14),s(1),t()),m&2){let l=o.$implicit;c("value",l.value),e(),p(l.label)}}function Yt(m,o){m&1&&(_(),i(0,"svg",55),d(1,"circle",56)(2,"path",58),t(),s(3),n(4,"translate")),m&2&&(e(3),g(" ",a(4,1,"settings.integrations.email.testing")," "))}function Wt(m,o){m&1&&(s(0),n(1,"translate")),m&2&&g(" ",a(1,1,"settings.integrations.email.testConnection")," ")}function zt(m,o){if(m&1&&(i(0,"option",14),s(1),n(2,"translate"),t()),m&2){let l=o.$implicit;c("value",l.value),e(),p(a(2,2,"settings.integrations.payment.providers."+l.value))}}function Ut(m,o){m&1&&(_(),i(0,"svg",55),d(1,"circle",56)(2,"path",57),t(),s(3),n(4,"translate")),m&2&&(e(3),g(" ",a(4,1,"settings.integrations.common.testing")," "))}function $t(m,o){m&1&&(s(0),n(1,"translate")),m&2&&g(" ",a(1,1,"settings.integrations.common.testConnection")," ")}function Kt(m,o){if(m&1&&(i(0,"option",14),s(1),n(2,"translate"),t()),m&2){let l=o.$implicit;c("value",l.value),e(),p(a(2,2,"settings.integrations.inventory.providers."+l.value))}}function Jt(m,o){m&1&&(_(),i(0,"svg",55),d(1,"circle",56)(2,"path",57),t(),s(3),n(4,"translate")),m&2&&(e(3),g(" ",a(4,1,"settings.integrations.common.testing")," "))}function Qt(m,o){m&1&&(s(0),n(1,"translate")),m&2&&g(" ",a(1,1,"settings.integrations.common.testConnection")," ")}function Zt(m,o){if(m&1&&(i(0,"option",14),s(1),t()),m&2){let l=o.$implicit;c("value",l.value),e(),p(l.label)}}function Xt(m,o){m&1&&(_(),i(0,"svg",55),d(1,"circle",56)(2,"path",57),t(),s(3),n(4,"translate")),m&2&&(e(3),g(" ",a(4,1,"settings.integrations.common.testing")," "))}function ei(m,o){m&1&&(s(0),n(1,"translate")),m&2&&g(" ",a(1,1,"settings.integrations.common.testConnection")," ")}function ti(m,o){if(m&1&&(i(0,"div",54)(1,"span",59),s(2),n(3,"translate"),t(),i(4,"div",60),d(5,"div",61),i(6,"span",62),s(7),n(8,"translate"),n(9,"translate"),t()()()),m&2){let l=o.$implicit;e(2),p(a(3,6,"settings.integrations.status.services."+l.name.toLowerCase().replace(" ","_"))),e(3),z(l.connected?"bg-green-500":"bg-red-500"),e(),z(l.connected?"text-green-400":"text-red-400"),e(),g(" ",l.connected?a(8,8,"settings.integrations.status.connected"):a(9,10,"settings.integrations.status.disconnected")," ")}}var ve=class m{fb=B(j);subscriptionService=B(nt);hasSmsAccess=ee(!1);settings;save=new G;testIntegration=new G;integrationForm;isSaving=!1;isTesting={sms:!1,email:!1,payment:!1,inventory:!1,accounting:!1};smsProviders=[{value:"twilio",label:"Twilio"},{value:"nexmo",label:"Vonage (Nexmo)"},{value:"local",label:"Local SMS Gateway"}];emailProviders=[{value:"gmail",label:"Gmail"},{value:"outlook",label:"Outlook/Office 365"},{value:"smtp",label:"Custom SMTP"},{value:"sendgrid",label:"SendGrid"}];paymentProviders=[{value:"monei",label:"Monei (Tunisia)"},{value:"paypal",label:"PayPal"},{value:"stripe",label:"Stripe"},{value:"local_bank",label:"Local Bank Gateway"}];inventoryProviders=[{value:"custom",label:"Custom Inventory System"},{value:"odoo",label:"Odoo"},{value:"zoho",label:"Zoho Inventory"}];accountingSoftware=[{value:"custom",label:"Custom Accounting"},{value:"quickbooks",label:"QuickBooks"},{value:"sage",label:"Sage"},{value:"odoo",label:"Odoo Accounting"}];integrationStatuses=[{name:"SMS Service",connected:!1},{name:"Email Service",connected:!0},{name:"Payment Gateway",connected:!1},{name:"Inventory System",connected:!1},{name:"Accounting Software",connected:!1}];ngOnInit(){this.subscriptionService.isFeatureEnabled("sms_notifications").subscribe(o=>{this.hasSmsAccess.set(o),o||this.integrationForm?.get("smsEnabled")?.disable()}),this.initializeForm(),this.populateForm()}ngOnChanges(){this.integrationForm&&this.settings&&this.populateForm()}initializeForm(){this.integrationForm=this.fb.group({smsEnabled:[!1],emailEnabled:[!1],paymentEnabled:[!1],inventoryEnabled:[!1],accountingEnabled:[!1],sms:this.fb.group({provider:["twilio"],apiKey:[""],senderId:["OpAuto"]}),email:this.fb.group({provider:["gmail"],smtpHost:[""],smtpPort:[587],username:[""],password:[""]}),paymentGateway:this.fb.group({provider:["monei"],merchantId:[""],apiKey:[""],webhookUrl:[""],testMode:[!0]}),inventory:this.fb.group({provider:["custom"],apiEndpoint:[""],apiKey:[""],syncFrequency:["daily"],autoOrderEnabled:[!1]}),accounting:this.fb.group({software:["custom"],apiEndpoint:[""],clientId:[""],clientSecret:[""],syncFrequency:["daily"],autoSyncEnabled:[!1]})})}populateForm(){this.settings&&this.integrationForm.patchValue({smsEnabled:this.settings.smsProvider?.isEnabled??!1,emailEnabled:this.settings.emailProvider?.isEnabled??!1,paymentEnabled:this.settings.paymentGateway?.isEnabled??!1,inventoryEnabled:this.settings.inventoryIntegration?.isEnabled??!1,accountingEnabled:this.settings.accountingIntegration?.isEnabled??!1,sms:{provider:this.settings.smsProvider?.provider??"twilio",apiKey:this.settings.smsProvider?.configuration?.apiKey??"",senderId:this.settings.smsProvider?.configuration?.phoneNumber??"OpAuto"},email:{provider:this.settings.emailProvider?.provider??"gmail",smtpHost:this.settings.emailProvider?.configuration?.host??"",smtpPort:this.settings.emailProvider?.configuration?.port??587,username:this.settings.emailProvider?.configuration?.username??"",password:this.settings.emailProvider?.configuration?.password??""},paymentGateway:{provider:this.settings.paymentGateway?.provider??"stripe",merchantId:this.settings.paymentGateway?.configuration?.merchantId??"",apiKey:this.settings.paymentGateway?.configuration?.apiKey??"",webhookUrl:this.settings.paymentGateway?.configuration?.endpoint??"",testMode:!0},inventory:{provider:this.settings.inventoryIntegration?.provider??"manual",apiEndpoint:"",apiKey:"",syncFrequency:"daily",autoOrderEnabled:!!this.settings.inventoryIntegration?.autoOrderThreshold},accounting:{software:this.settings.accountingIntegration?.provider??"none",apiEndpoint:"",clientId:"",clientSecret:"",syncFrequency:this.settings.accountingIntegration?.syncFrequency??"daily",autoSyncEnabled:this.settings.accountingIntegration?.isEnabled??!1}})}isFieldInvalid(o){let l=this.integrationForm.get(o);return!!(l&&l.invalid&&(l.dirty||l.touched))}onSave(){if(this.integrationForm.valid){this.isSaving=!0;let o=this.integrationForm.value,l={smsProvider:{provider:o.sms.provider,isEnabled:o.smsEnabled,configuration:{apiKey:o.sms.apiKey,phoneNumber:o.sms.senderId}},emailProvider:{provider:o.email.provider,isEnabled:o.emailEnabled,configuration:{host:o.email.smtpHost,port:o.email.smtpPort,username:o.email.username,password:o.email.password,fromEmail:o.email.username,fromName:"OpAuto Garage"}},paymentGateway:{provider:o.paymentGateway.provider,isEnabled:o.paymentEnabled,configuration:{apiKey:o.paymentGateway.apiKey,merchantId:o.paymentGateway.merchantId,endpoint:o.paymentGateway.webhookUrl}},inventoryIntegration:{provider:o.inventory.provider,isEnabled:o.inventoryEnabled,autoOrderThreshold:o.inventory.autoOrderEnabled?5:0,preferredSuppliers:this.settings?.inventoryIntegration?.preferredSuppliers||[],configuration:{}},accountingIntegration:{provider:o.accounting.software,isEnabled:o.accountingEnabled,syncFrequency:o.accounting.syncFrequency,configuration:{apiEndpoint:o.accounting.apiEndpoint,clientId:o.accounting.clientId,clientSecret:o.accounting.clientSecret}}};this.save.emit(l),setTimeout(()=>{this.isSaving=!1},1e3)}}testSmsConnection(){return te(this,null,function*(){this.isTesting.sms=!0;let o=this.integrationForm.get("sms")?.value;this.testIntegration.emit({type:"sms",config:o}),setTimeout(()=>{this.isTesting.sms=!1,this.updateIntegrationStatus("SMS Service",!0)},2e3)})}testEmailConnection(){return te(this,null,function*(){this.isTesting.email=!0;let o=this.integrationForm.get("email")?.value;this.testIntegration.emit({type:"email",config:o}),setTimeout(()=>{this.isTesting.email=!1,this.updateIntegrationStatus("Email Service",!0)},2e3)})}testPaymentConnection(){return te(this,null,function*(){this.isTesting.payment=!0;let o=this.integrationForm.get("paymentGateway")?.value;this.testIntegration.emit({type:"payment",config:o}),setTimeout(()=>{this.isTesting.payment=!1,this.updateIntegrationStatus("Payment Gateway",!0)},2e3)})}testInventoryConnection(){return te(this,null,function*(){this.isTesting.inventory=!0;let o=this.integrationForm.get("inventory")?.value;this.testIntegration.emit({type:"inventory",config:o}),setTimeout(()=>{this.isTesting.inventory=!1,this.updateIntegrationStatus("Inventory System",!0)},2e3)})}testAccountingConnection(){return te(this,null,function*(){this.isTesting.accounting=!0;let o=this.integrationForm.get("accounting")?.value;this.testIntegration.emit({type:"accounting",config:o}),setTimeout(()=>{this.isTesting.accounting=!1,this.updateIntegrationStatus("Accounting Software",!0)},2e3)})}updateIntegrationStatus(o,l){let r=this.integrationStatuses.find(u=>u.name===o);r&&(r.connected=l)}resetForm(){this.populateForm(),this.integrationForm.markAsPristine(),this.integrationForm.markAsUntouched()}static \u0275fac=function(l){return new(l||m)};static \u0275cmp=T({type:m,selectors:[["app-integration-settings"]],inputs:{settings:"settings"},outputs:{save:"save",testIntegration:"testIntegration"},features:[R],decls:256,vars:234,consts:[[1,"glass-card"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-white"],[1,"flex","space-x-2"],["type","button",1,"btn-secondary","text-sm",3,"click"],["type","button",1,"btn-primary","text-sm",3,"click","disabled"],[1,"space-y-8",3,"formGroup"],[1,"flex","items-center","space-x-3","mb-4"],["type","checkbox","id","smsEnabled","formControlName","smsEnabled",1,"form-checkbox",3,"disabled"],[1,"text-md","font-medium","text-white"],[1,"badge","badge-warning","text-xs"],["formGroupName","sms",1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"form-label"],["formControlName","provider",1,"form-select",3,"disabled"],[3,"value"],["type","password","formControlName","apiKey",1,"form-input",3,"placeholder","disabled"],["type","text","formControlName","senderId",1,"form-input",3,"placeholder","disabled"],[1,"flex","items-center","mt-6"],["type","button",1,"btn-secondary","text-sm",3,"click","disabled"],["type","checkbox","id","emailEnabled","formControlName","emailEnabled",1,"form-checkbox"],["formGroupName","email",1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","text","formControlName","smtpHost",1,"form-input",3,"placeholder","disabled"],["type","number","formControlName","smtpPort",1,"form-input",3,"placeholder","disabled"],["type","email","formControlName","username",1,"form-input",3,"placeholder","disabled"],["type","password","formControlName","password",1,"form-input",3,"placeholder","disabled"],["type","checkbox","id","paymentEnabled","formControlName","paymentEnabled",1,"form-checkbox"],["formGroupName","paymentGateway",1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","text","formControlName","merchantId",1,"form-input",3,"placeholder","disabled"],["type","url","formControlName","webhookUrl",1,"form-input",3,"placeholder","disabled"],[1,"md:col-span-2"],[1,"flex","items-center","space-x-3"],["type","checkbox","id","testMode","formControlName","testMode",1,"form-checkbox",3,"disabled"],["for","testMode",1,"text-sm","font-medium","text-gray-300"],[1,"text-sm","text-gray-400","mt-1"],["type","checkbox","id","inventoryEnabled","formControlName","inventoryEnabled",1,"form-checkbox"],["formGroupName","inventory",1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","url","formControlName","apiEndpoint",1,"form-input",3,"placeholder","disabled"],["formControlName","syncFrequency",1,"form-select",3,"disabled"],["value","realtime"],["value","hourly"],["value","daily"],["value","weekly"],["type","checkbox","id","autoOrder","formControlName","autoOrderEnabled",1,"form-checkbox",3,"disabled"],["for","autoOrder",1,"text-sm","font-medium","text-gray-300"],["type","checkbox","id","accountingEnabled","formControlName","accountingEnabled",1,"form-checkbox"],["formGroupName","accounting",1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["formControlName","software",1,"form-select",3,"disabled"],["type","text","formControlName","clientId",1,"form-input",3,"placeholder","disabled"],["type","password","formControlName","clientSecret",1,"form-input",3,"placeholder","disabled"],["value","monthly"],["type","checkbox","id","autoSync","formControlName","autoSyncEnabled",1,"form-checkbox",3,"disabled"],["for","autoSync",1,"text-sm","font-medium","text-gray-300"],[1,"text-md","font-medium","text-white","mb-4"],[1,"bg-gray-800/30","p-4","rounded-lg","space-y-3"],[1,"flex","items-center","justify-between"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-sm","font-medium","text-white"],[1,"flex","items-center","space-x-2"],[1,"w-2","h-2","rounded-full"],[1,"text-sm"]],template:function(l,r){if(l&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),s(3),n(4,"translate"),t(),i(5,"div",3)(6,"button",4),y("click",function(){return r.resetForm()}),s(7),n(8,"translate"),t(),i(9,"button",5),y("click",function(){return r.onSave()}),f(10,Rt,5,3)(11,Ot,2,3),t()()(),i(12,"form",6)(13,"div")(14,"div",7),d(15,"input",8),i(16,"h3",9),s(17),n(18,"translate"),t(),f(19,Vt,3,3,"span",10),t(),i(20,"div",11)(21,"div")(22,"label",12),s(23),n(24,"translate"),t(),i(25,"select",13),M(26,qt,2,2,"option",14,oe),t()(),i(28,"div")(29,"label",12),s(30),n(31,"translate"),t(),d(32,"input",15),n(33,"translate"),t(),i(34,"div")(35,"label",12),s(36),n(37,"translate"),t(),d(38,"input",16),n(39,"translate"),t(),i(40,"div",17)(41,"button",18),y("click",function(){return r.testSmsConnection()}),f(42,Lt,5,3)(43,Ht,2,3),t()()()(),i(44,"div")(45,"div",7),d(46,"input",19),i(47,"h3",9),s(48),n(49,"translate"),t()(),i(50,"div",20)(51,"div")(52,"label",12),s(53),n(54,"translate"),t(),i(55,"select",13),M(56,jt,2,2,"option",14,oe),t()(),i(58,"div")(59,"label",12),s(60),n(61,"translate"),t(),d(62,"input",21),n(63,"translate"),t(),i(64,"div")(65,"label",12),s(66),n(67,"translate"),t(),d(68,"input",22),n(69,"translate"),t(),i(70,"div")(71,"label",12),s(72),n(73,"translate"),t(),d(74,"input",23),n(75,"translate"),t(),i(76,"div")(77,"label",12),s(78),n(79,"translate"),t(),d(80,"input",24),n(81,"translate"),t(),i(82,"div",17)(83,"button",18),y("click",function(){return r.testEmailConnection()}),f(84,Yt,5,3)(85,Wt,2,3),t()()()(),i(86,"div")(87,"div",7),d(88,"input",25),i(89,"h3",9),s(90),n(91,"translate"),t()(),i(92,"div",26)(93,"div")(94,"label",12),s(95),n(96,"translate"),t(),i(97,"select",13),M(98,zt,3,4,"option",14,oe),t()(),i(100,"div")(101,"label",12),s(102),n(103,"translate"),t(),d(104,"input",27),n(105,"translate"),t(),i(106,"div")(107,"label",12),s(108),n(109,"translate"),t(),d(110,"input",15),n(111,"translate"),t(),i(112,"div")(113,"label",12),s(114),n(115,"translate"),t(),d(116,"input",28),n(117,"translate"),t(),i(118,"div",29)(119,"div",30),d(120,"input",31),i(121,"label",32),s(122),n(123,"translate"),t()(),i(124,"p",33),s(125),n(126,"translate"),t()(),i(127,"div",17)(128,"button",18),y("click",function(){return r.testPaymentConnection()}),f(129,Ut,5,3)(130,$t,2,3),t()()()(),i(131,"div")(132,"div",7),d(133,"input",34),i(134,"h3",9),s(135),n(136,"translate"),t()(),i(137,"div",35)(138,"div")(139,"label",12),s(140),n(141,"translate"),t(),i(142,"select",13),M(143,Kt,3,4,"option",14,oe),t()(),i(145,"div")(146,"label",12),s(147),n(148,"translate"),t(),d(149,"input",36),n(150,"translate"),t(),i(151,"div")(152,"label",12),s(153),n(154,"translate"),t(),d(155,"input",15),n(156,"translate"),t(),i(157,"div")(158,"label",12),s(159),n(160,"translate"),t(),i(161,"select",37)(162,"option",38),s(163),n(164,"translate"),t(),i(165,"option",39),s(166),n(167,"translate"),t(),i(168,"option",40),s(169),n(170,"translate"),t(),i(171,"option",41),s(172),n(173,"translate"),t()()(),i(174,"div",29)(175,"div",30),d(176,"input",42),i(177,"label",43),s(178),n(179,"translate"),t()(),i(180,"p",33),s(181),n(182,"translate"),t()(),i(183,"div",17)(184,"button",18),y("click",function(){return r.testInventoryConnection()}),f(185,Jt,5,3)(186,Qt,2,3),t()()()(),i(187,"div")(188,"div",7),d(189,"input",44),i(190,"h3",9),s(191),n(192,"translate"),t()(),i(193,"div",45)(194,"div")(195,"label",12),s(196),n(197,"translate"),t(),i(198,"select",46),M(199,Zt,2,2,"option",14,oe),t()(),i(201,"div")(202,"label",12),s(203),n(204,"translate"),t(),d(205,"input",36),n(206,"translate"),t(),i(207,"div")(208,"label",12),s(209),n(210,"translate"),t(),d(211,"input",47),n(212,"translate"),t(),i(213,"div")(214,"label",12),s(215),n(216,"translate"),t(),d(217,"input",48),n(218,"translate"),t(),i(219,"div")(220,"label",12),s(221),n(222,"translate"),t(),i(223,"select",37)(224,"option",38),s(225),n(226,"translate"),t(),i(227,"option",40),s(228),n(229,"translate"),t(),i(230,"option",41),s(231),n(232,"translate"),t(),i(233,"option",49),s(234),n(235,"translate"),t()()(),i(236,"div",29)(237,"div",30),d(238,"input",50),i(239,"label",51),s(240),n(241,"translate"),t()(),i(242,"p",33),s(243),n(244,"translate"),t()(),i(245,"div",17)(246,"button",18),y("click",function(){return r.testAccountingConnection()}),f(247,Xt,5,3)(248,ei,2,3),t()()()(),i(249,"div")(250,"h3",52),s(251),n(252,"translate"),t(),i(253,"div",53),M(254,ti,10,12,"div",54,At),t()()()()),l&2){let u,S,X,Se,he,xe,Ie,Ce,_e,Ee,ke,Be,Te,we,Fe,Ne,De,Pe,Ge,Me,Ae,Re,Oe,Ve,qe,Le,He,je,Ye,We,ze,Ue,$e,Ke;e(3),p(a(4,120,"settings.integrations.title")),e(4),g(" ",a(8,122,"settings.integrations.resetButton")," "),e(2),c("disabled",r.integrationForm.invalid||r.isSaving),e(),b(r.isSaving?10:11),e(2),c("formGroup",r.integrationForm),e(3),c("disabled",!r.hasSmsAccess()),e(2),p(a(18,124,"settings.integrations.sms.title")),e(2),b(r.hasSmsAccess()?-1:19),e(),x("opacity-50",!((u=r.integrationForm.get("smsEnabled"))!=null&&u.value)),e(3),p(a(24,126,"settings.integrations.sms.provider")),e(2),c("disabled",!((S=r.integrationForm.get("smsEnabled"))!=null&&S.value)),e(),A(r.smsProviders),e(4),p(a(31,128,"settings.integrations.sms.apiKey")),e(2),c("placeholder",I(a(33,130,"settings.integrations.sms.apiKeyPlaceholder")))("disabled",!((X=r.integrationForm.get("smsEnabled"))!=null&&X.value)),e(4),p(a(37,132,"settings.integrations.sms.senderName")),e(2),c("placeholder",I(a(39,134,"settings.integrations.sms.senderNamePlaceholder")))("disabled",!((Se=r.integrationForm.get("smsEnabled"))!=null&&Se.value)),e(3),c("disabled",!((he=r.integrationForm.get("smsEnabled"))!=null&&he.value)||r.isTesting.sms),e(),b(r.isTesting.sms?42:43),e(6),p(a(49,136,"settings.integrations.email.title")),e(2),x("opacity-50",!((xe=r.integrationForm.get("emailEnabled"))!=null&&xe.value)),e(3),p(a(54,138,"settings.integrations.email.provider")),e(2),c("disabled",!((Ie=r.integrationForm.get("emailEnabled"))!=null&&Ie.value)),e(),A(r.emailProviders),e(4),p(a(61,140,"settings.integrations.email.smtpHost")),e(2),c("placeholder",I(a(63,142,"settings.integrations.email.smtpHostPlaceholder")))("disabled",!((Ce=r.integrationForm.get("emailEnabled"))!=null&&Ce.value)),e(4),p(a(67,144,"settings.integrations.email.smtpPort")),e(2),c("placeholder",I(a(69,146,"settings.integrations.email.smtpPortPlaceholder")))("disabled",!((_e=r.integrationForm.get("emailEnabled"))!=null&&_e.value)),e(4),p(a(73,148,"settings.integrations.email.username")),e(2),c("placeholder",I(a(75,150,"settings.integrations.email.usernamePlaceholder")))("disabled",!((Ee=r.integrationForm.get("emailEnabled"))!=null&&Ee.value)),e(4),p(a(79,152,"settings.integrations.email.password")),e(2),c("placeholder",I(a(81,154,"settings.integrations.email.passwordPlaceholder")))("disabled",!((ke=r.integrationForm.get("emailEnabled"))!=null&&ke.value)),e(3),c("disabled",!((Be=r.integrationForm.get("emailEnabled"))!=null&&Be.value)||r.isTesting.email),e(),b(r.isTesting.email?84:85),e(6),p(a(91,156,"settings.integrations.payment.title")),e(2),x("opacity-50",!((Te=r.integrationForm.get("paymentEnabled"))!=null&&Te.value)),e(3),p(a(96,158,"settings.integrations.payment.provider")),e(2),c("disabled",!((we=r.integrationForm.get("paymentEnabled"))!=null&&we.value)),e(),A(r.paymentProviders),e(4),p(a(103,160,"settings.integrations.payment.merchantId")),e(2),c("placeholder",I(a(105,162,"settings.integrations.payment.merchantIdPlaceholder")))("disabled",!((Fe=r.integrationForm.get("paymentEnabled"))!=null&&Fe.value)),e(4),p(a(109,164,"settings.integrations.payment.apiKey")),e(2),c("placeholder",I(a(111,166,"settings.integrations.payment.apiKeyPlaceholder")))("disabled",!((Ne=r.integrationForm.get("paymentEnabled"))!=null&&Ne.value)),e(4),p(a(115,168,"settings.integrations.payment.webhookUrl")),e(2),c("placeholder",I(a(117,170,"settings.integrations.payment.webhookUrlPlaceholder")))("disabled",!((De=r.integrationForm.get("paymentEnabled"))!=null&&De.value)),e(4),c("disabled",!((Pe=r.integrationForm.get("paymentEnabled"))!=null&&Pe.value)),e(2),p(a(123,172,"settings.integrations.payment.testMode")),e(3),p(a(126,174,"settings.integrations.payment.testModeDescription")),e(3),c("disabled",!((Ge=r.integrationForm.get("paymentEnabled"))!=null&&Ge.value)||r.isTesting.payment),e(),b(r.isTesting.payment?129:130),e(6),p(a(136,176,"settings.integrations.inventory.title")),e(2),x("opacity-50",!((Me=r.integrationForm.get("inventoryEnabled"))!=null&&Me.value)),e(3),p(a(141,178,"settings.integrations.inventory.provider")),e(2),c("disabled",!((Ae=r.integrationForm.get("inventoryEnabled"))!=null&&Ae.value)),e(),A(r.inventoryProviders),e(4),p(a(148,180,"settings.integrations.inventory.apiEndpoint")),e(2),c("placeholder",I(a(150,182,"settings.integrations.inventory.apiEndpointPlaceholder")))("disabled",!((Re=r.integrationForm.get("inventoryEnabled"))!=null&&Re.value)),e(4),p(a(154,184,"settings.integrations.inventory.apiKey")),e(2),c("placeholder",I(a(156,186,"settings.integrations.inventory.apiKeyPlaceholder")))("disabled",!((Oe=r.integrationForm.get("inventoryEnabled"))!=null&&Oe.value)),e(4),p(a(160,188,"settings.integrations.inventory.syncFrequency")),e(2),c("disabled",!((Ve=r.integrationForm.get("inventoryEnabled"))!=null&&Ve.value)),e(2),p(a(164,190,"settings.integrations.common.frequencies.realtime")),e(3),p(a(167,192,"settings.integrations.common.frequencies.hourly")),e(3),p(a(170,194,"settings.integrations.common.frequencies.daily")),e(3),p(a(173,196,"settings.integrations.common.frequencies.weekly")),e(4),c("disabled",!((qe=r.integrationForm.get("inventoryEnabled"))!=null&&qe.value)),e(2),p(a(179,198,"settings.integrations.inventory.autoOrder")),e(3),p(a(182,200,"settings.integrations.inventory.autoOrderDescription")),e(3),c("disabled",!((Le=r.integrationForm.get("inventoryEnabled"))!=null&&Le.value)||r.isTesting.inventory),e(),b(r.isTesting.inventory?185:186),e(6),p(a(192,202,"settings.integrations.accounting.title")),e(2),x("opacity-50",!((He=r.integrationForm.get("accountingEnabled"))!=null&&He.value)),e(3),p(a(197,204,"settings.integrations.accounting.software")),e(2),c("disabled",!((je=r.integrationForm.get("accountingEnabled"))!=null&&je.value)),e(),A(r.accountingSoftware),e(4),p(a(204,206,"settings.integrations.accounting.apiEndpoint")),e(2),c("placeholder",I(a(206,208,"settings.integrations.accounting.apiEndpointPlaceholder")))("disabled",!((Ye=r.integrationForm.get("accountingEnabled"))!=null&&Ye.value)),e(4),p(a(210,210,"settings.integrations.accounting.clientId")),e(2),c("placeholder",I(a(212,212,"settings.integrations.accounting.clientIdPlaceholder")))("disabled",!((We=r.integrationForm.get("accountingEnabled"))!=null&&We.value)),e(4),p(a(216,214,"settings.integrations.accounting.clientSecret")),e(2),c("placeholder",I(a(218,216,"settings.integrations.accounting.clientSecretPlaceholder")))("disabled",!((ze=r.integrationForm.get("accountingEnabled"))!=null&&ze.value)),e(4),p(a(222,218,"settings.integrations.accounting.syncFrequency")),e(2),c("disabled",!((Ue=r.integrationForm.get("accountingEnabled"))!=null&&Ue.value)),e(2),p(a(226,220,"settings.integrations.common.frequencies.realtime")),e(3),p(a(229,222,"settings.integrations.common.frequencies.daily")),e(3),p(a(232,224,"settings.integrations.common.frequencies.weekly")),e(3),p(a(235,226,"settings.integrations.common.frequencies.monthly")),e(4),c("disabled",!(($e=r.integrationForm.get("accountingEnabled"))!=null&&$e.value)),e(2),p(a(241,228,"settings.integrations.accounting.autoSync")),e(3),p(a(244,230,"settings.integrations.accounting.autoSyncDescription")),e(3),c("disabled",!((Ke=r.integrationForm.get("accountingEnabled"))!=null&&Ke.value)||r.isTesting.accounting),e(),b(r.isTesting.accounting?247:248),e(4),p(a(252,232,"settings.integrations.status.title")),e(3),A(r.integrationStatuses)}},dependencies:[w,Y,q,Q,Z,$,ne,U,J,O,V,L,H,K,F],encapsulation:2})};function ii(m,o){if(m&1){let l=W();i(0,"app-garage-info-form",22),y("save",function(u){D(l);let S=C(2);return P(S.onGarageInfoSave(u))}),t()}if(m&2){let l=C(2);c("garageInfo",l.settings().garageInfo)}}function ni(m,o){if(m&1){let l=W();i(0,"app-operational-settings",23),y("save",function(u){D(l);let S=C(2);return P(S.onOperationalSettingsSave(u))}),t()}if(m&2){let l=C(2);c("settings",l.settings().operationalSettings)}}function ai(m,o){if(m&1){let l=W();i(0,"app-business-settings",23),y("save",function(u){D(l);let S=C(2);return P(S.onBusinessSettingsSave(u))}),t()}if(m&2){let l=C(2);c("settings",l.settings().businessSettings)}}function si(m,o){if(m&1){let l=W();i(0,"app-system-settings",23),y("save",function(u){D(l);let S=C(2);return P(S.onSystemSettingsSave(u))}),t()}if(m&2){let l=C(2);c("settings",l.settings().systemSettings)}}function oi(m,o){if(m&1){let l=W();i(0,"app-integration-settings",24),y("save",function(u){D(l);let S=C(2);return P(S.onIntegrationSettingsSave(u))})("testIntegration",function(u){D(l);let S=C(2);return P(S.onTestIntegration(u))}),t()}if(m&2){let l=C(2);c("settings",l.settings().integrationSettings)}}function ri(m,o){if(m&1&&(i(0,"div",17),f(1,ii,1,1,"app-garage-info-form",20),f(2,ni,1,1,"app-operational-settings",21),f(3,ai,1,1,"app-business-settings",21),f(4,si,1,1,"app-system-settings",21),f(5,oi,1,1,"app-integration-settings",21),t()),m&2){let l=C();e(),b(l.activeTab()==="garage-info"?1:-1),e(),b(l.activeTab()==="operational"?2:-1),e(),b(l.activeTab()==="business"?3:-1),e(),b(l.activeTab()==="system"?4:-1),e(),b(l.activeTab()==="integrations"?5:-1)}}function li(m,o){m&1&&(i(0,"div",18)(1,"div",25),d(2,"div",26),i(3,"p",27),s(4),n(5,"translate"),t()()()),m&2&&(e(4),p(a(5,1,"settings.loading")))}function pi(m,o){m&1&&(_(),i(0,"svg",35),d(1,"circle",36)(2,"path",37),t(),s(3),n(4,"translate")),m&2&&(e(3),g(" ",a(4,1,"settings.saving")," "))}function mi(m,o){m&1&&(s(0),n(1,"translate")),m&2&&g(" ",a(1,1,"settings.saveAllChanges")," ")}function di(m,o){if(m&1){let l=W();i(0,"div",19)(1,"div",28)(2,"div",29),d(3,"div",30),i(4,"span",31),s(5),n(6,"translate"),t()(),i(7,"div",32)(8,"button",33),y("click",function(){D(l);let u=C();return P(u.discardChanges())}),s(9),n(10,"translate"),t(),i(11,"button",34),y("click",function(){D(l);let u=C();return P(u.saveAllChanges())}),f(12,pi,5,3)(13,mi,2,3),t()()()()}if(m&2){let l=C();e(5),p(a(6,4,"settings.unsavedChanges")),e(4),g(" ",a(10,6,"settings.discardChanges")," "),e(2),c("disabled",l.isSaving()),e(),b(l.isSaving()?12:13)}}var at=class m{garageSettingsService=B(pe);settings=ee(null);activeTab=ee("garage-info");isSaving=ee(!1);unsavedChanges=ee(!1);ngOnInit(){this.loadSettings()}loadSettings(){this.garageSettingsService.getSettings().subscribe({next:o=>{this.settings.set(o)},error:o=>{console.error("Error loading garage settings:",o)}})}setActiveTab(o){this.activeTab.set(o)}onGarageInfoSave(o){this.isSaving.set(!0),this.garageSettingsService.updateGarageInfo(o).subscribe({next:l=>{this.settings.set(l),this.unsavedChanges.set(!1),this.isSaving.set(!1),this.showSuccessMessage("Garage information updated successfully")},error:l=>{console.error("Error updating garage info:",l),this.isSaving.set(!1),this.showErrorMessage("Failed to update garage information")}})}onOperationalSettingsSave(o){this.isSaving.set(!0),this.garageSettingsService.updateOperationalSettings(o).subscribe({next:l=>{this.settings.set(l),this.unsavedChanges.set(!1),this.isSaving.set(!1),this.showSuccessMessage("Operational settings updated successfully")},error:l=>{console.error("Error updating operational settings:",l),this.isSaving.set(!1),this.showErrorMessage("Failed to update operational settings")}})}onBusinessSettingsSave(o){this.isSaving.set(!0),this.garageSettingsService.updateBusinessSettings(o).subscribe({next:l=>{this.settings.set(l),this.unsavedChanges.set(!1),this.isSaving.set(!1),this.showSuccessMessage("Business settings updated successfully")},error:l=>{console.error("Error updating business settings:",l),this.isSaving.set(!1),this.showErrorMessage("Failed to update business settings")}})}onSystemSettingsSave(o){this.isSaving.set(!0),this.garageSettingsService.updateSystemSettings(o).subscribe({next:l=>{this.settings.set(l),this.unsavedChanges.set(!1),this.isSaving.set(!1),this.showSuccessMessage("System settings updated successfully")},error:l=>{console.error("Error updating system settings:",l),this.isSaving.set(!1),this.showErrorMessage("Failed to update system settings")}})}onIntegrationSettingsSave(o){this.isSaving.set(!0),this.garageSettingsService.updateIntegrationSettings(o).subscribe({next:l=>{this.settings.set(l),this.unsavedChanges.set(!1),this.isSaving.set(!1),this.showSuccessMessage("Integration settings updated successfully")},error:l=>{console.error("Error updating integration settings:",l),this.isSaving.set(!1),this.showErrorMessage("Failed to update integration settings")}})}onTestIntegration(o){this.garageSettingsService.testIntegration(o.type).subscribe({next:l=>{l.success?this.showSuccessMessage(l.message):this.showErrorMessage(l.message)},error:l=>{console.error("Integration test failed:",l),this.showErrorMessage("Integration test failed")}})}hasUnsavedChanges(){return this.unsavedChanges()}saveAllChanges(){this.isSaving.set(!0),setTimeout(()=>{this.isSaving.set(!1),this.unsavedChanges.set(!1),this.showSuccessMessage("All changes saved successfully")},1e3)}discardChanges(){this.loadSettings(),this.unsavedChanges.set(!1)}exportSettings(){this.garageSettingsService.exportSettings().subscribe({next:o=>{let l=window.URL.createObjectURL(o),r=document.createElement("a");r.href=l,r.download=`garage-settings-${new Date().toISOString().split("T")[0]}.json`,r.click(),window.URL.revokeObjectURL(l),this.showSuccessMessage("Settings exported successfully")},error:o=>{console.error("Export failed:",o),this.showErrorMessage("Failed to export settings")}})}importSettings(o){let r=o.target.files?.[0];r&&this.garageSettingsService.importSettings(r).subscribe({next:u=>{this.settings.set(u),this.showSuccessMessage("Settings imported successfully")},error:u=>{console.error("Import failed:",u),this.showErrorMessage("Failed to import settings")}})}showSuccessMessage(o){console.log("Success:",o)}showErrorMessage(o){console.error("Error:",o)}static \u0275fac=function(l){return new(l||m)};static \u0275cmp=T({type:m,selectors:[["app-garage-settings"]],decls:46,vars:33,consts:[[1,"min-h-screen","garage-settings-container","p-4","lg:p-6"],[1,"glass-card","garage-settings-header"],[1,"flex","flex-col","lg:flex-row","lg:items-center","lg:justify-between","gap-4"],[1,"flex-1"],[1,"text-2xl","lg:text-3xl","font-bold","text-white","mb-1"],[1,"text-gray-300"],[1,"glass-card","settings-nav"],[1,"flex","flex-wrap","gap-2","overflow-x-auto"],[1,"nav-button","flex","items-center","gap-2","px-4","py-2","rounded-lg","backdrop-blur-sm","border-2","transition-all","duration-300","font-medium","hover:scale-105","whitespace-nowrap",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"text-sm"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"],[1,"space-y-6"],[1,"glass-card"],[1,"fixed","bottom-0","left-0","right-0","glass-card","m-4","rounded-2xl","shadow-2xl"],[3,"garageInfo"],[3,"settings"],[3,"save","garageInfo"],[3,"save","settings"],[3,"save","testIntegration","settings"],[1,"text-center","py-12"],[1,"loading-spinner","mx-auto"],[1,"mt-4","text-gray-300"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-2"],[1,"w-2","h-2","bg-orange-400","rounded-full","animate-pulse"],[1,"text-sm","text-gray-300"],[1,"flex","space-x-3"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(l,r){l&1&&(i(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"h1",4),s(5),n(6,"translate"),t(),i(7,"p",5),s(8),n(9,"translate"),t()()()(),i(10,"div",6)(11,"nav",7)(12,"button",8),y("click",function(){return r.setActiveTab("garage-info")}),_(),i(13,"svg",9),d(14,"path",10),t(),ie(),i(15,"span",11),s(16),n(17,"translate"),t()(),i(18,"button",8),y("click",function(){return r.setActiveTab("operational")}),_(),i(19,"svg",9),d(20,"path",12)(21,"path",13),t(),ie(),i(22,"span",11),s(23),n(24,"translate"),t()(),i(25,"button",8),y("click",function(){return r.setActiveTab("business")}),_(),i(26,"svg",9),d(27,"path",14),t(),ie(),i(28,"span",11),s(29),n(30,"translate"),t()(),i(31,"button",8),y("click",function(){return r.setActiveTab("system")}),_(),i(32,"svg",9),d(33,"path",15),t(),ie(),i(34,"span",11),s(35),n(36,"translate"),t()(),i(37,"button",8),y("click",function(){return r.setActiveTab("integrations")}),_(),i(38,"svg",9),d(39,"path",16),t(),ie(),i(40,"span",11),s(41),n(42,"translate"),t()()()(),f(43,ri,6,5,"div",17)(44,li,6,3,"div",18),f(45,di,14,8,"div",19),t()),l&2&&(e(5),p(a(6,19,"settings.title")),e(3),p(a(9,21,"settings.subtitle")),e(4),z(r.activeTab()==="garage-info"?"nav-button-active":"nav-button-inactive"),e(4),p(a(17,23,"settings.navigation.garageInformation")),e(2),z(r.activeTab()==="operational"?"nav-button-active":"nav-button-inactive"),e(5),p(a(24,25,"settings.navigation.operations")),e(2),z(r.activeTab()==="business"?"nav-button-active":"nav-button-inactive"),e(4),p(a(30,27,"settings.navigation.business")),e(2),z(r.activeTab()==="system"?"nav-button-active":"nav-button-inactive"),e(4),p(a(36,29,"settings.navigation.system")),e(2),z(r.activeTab()==="integrations"?"nav-button-active":"nav-button-inactive"),e(4),p(a(42,31,"settings.navigation.integrations")),e(2),b(r.settings()?43:44),e(2),b(r.settings()&&r.hasUnsavedChanges()?45:-1))},dependencies:[w,it,F,me,ce,ue,ge,ve],styles:[".garage-settings-container[_ngcontent-%COMP%]{min-height:100vh;background:transparent}.nav-button-active[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-hover))!important;border-color:var(--color-primary)!important;color:#fff!important;box-shadow:0 4px 15px #2563eb4d}.nav-button-inactive[_ngcontent-%COMP%]{background-color:var(--color-bg-primary)!important;border-color:var(--color-border)!important;color:var(--color-text-secondary)!important}.nav-button-inactive[_ngcontent-%COMP%]:hover{background-color:var(--color-bg-tertiary)!important;border-color:var(--color-primary)!important;color:var(--color-text-primary)!important;box-shadow:0 2px 8px #2563eb33}.loading-spinner[_ngcontent-%COMP%]{width:2rem;height:2rem;border:3px solid rgba(59,130,246,.3);border-top:3px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};export{at as GarageSettingsComponent};
