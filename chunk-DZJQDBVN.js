import{a as j,b as G,c,d as A,e as M,h as R,i as Z,j as et,k as B,l as W,n as O,o as Y,p as z,q as U,r as ne,s as ae,u as V,w as q}from"./chunk-2V6QG4GK.js";import{$ as E,A as N,Aa as ue,B as S,C as Q,Ca as ge,F as ee,G as P,K as s,Ma as Qe,N as T,Oa as Ze,Qa as w,S as Ke,T as D,X as p,Y as u,Ya as Xe,a as b,aa as _,b as x,ba as m,c as J,ca as t,d as ze,da as e,ea as l,f as Ue,fa as L,ga as g,h as I,ha as y,j as pe,ma as Je,na as v,o as C,oa as H,pa as i,qa as h,ra as K,u as $e,x as k,z as F}from"./chunk-6MGQ6QS3.js";var oe=class r{mockSettings={garageInfo:{name:"OpAuto Garage",address:"123 Avenue Habib Bourguiba",city:"Tunis",postalCode:"1000",country:"Tunisia",phone:"+216 71 123 456",email:"contact@opauto.tn",website:"https://opauto.tn",taxId:"TN123456789",registrationNumber:"RC-A-12345",description:"Professional automotive repair and maintenance services",bankDetails:{bankName:"Banque de Tunisie",accountNumber:"12345678901234567890",iban:"TN5912345678901234567890",bic:"BTUNTNTT",accountHolderName:"OpAuto Garage SARL"}},operationalSettings:{capacity:{totalLifts:4,availableLifts:4,totalMechanics:3,availableMechanics:3,maxDailyAppointments:16,avgServiceDuration:90},workingHours:{monday:{isWorkingDay:!0,openTime:"08:00",closeTime:"18:00",lunchBreak:{startTime:"12:00",endTime:"13:00"}},tuesday:{isWorkingDay:!0,openTime:"08:00",closeTime:"18:00",lunchBreak:{startTime:"12:00",endTime:"13:00"}},wednesday:{isWorkingDay:!0,openTime:"08:00",closeTime:"18:00",lunchBreak:{startTime:"12:00",endTime:"13:00"}},thursday:{isWorkingDay:!0,openTime:"08:00",closeTime:"18:00",lunchBreak:{startTime:"12:00",endTime:"13:00"}},friday:{isWorkingDay:!0,openTime:"08:00",closeTime:"18:00",lunchBreak:{startTime:"12:00",endTime:"13:00"}},saturday:{isWorkingDay:!0,openTime:"08:00",closeTime:"14:00"},sunday:{isWorkingDay:!1,openTime:"",closeTime:""},timezone:"Africa/Tunis"},serviceSettings:{defaultServiceDuration:90,bufferTimeBetweenServices:15,allowOverlappingAppointments:!1,requireCustomerApproval:!0,defaultWarrantyPeriod:30,serviceCategories:[{id:"maintenance",name:"Maintenance",description:"Regular vehicle maintenance",averageDuration:60,averageCost:150,requiresSpecialist:!1,color:"#3b82f6",isActive:!0},{id:"repair",name:"Repair",description:"Vehicle repairs",averageDuration:120,averageCost:300,requiresSpecialist:!0,color:"#ef4444",isActive:!0},{id:"diagnostic",name:"Diagnostic",description:"Vehicle diagnostics",averageDuration:45,averageCost:80,requiresSpecialist:!0,color:"#f59e0b",isActive:!0},{id:"bodywork",name:"Bodywork",description:"Body and paint work",averageDuration:240,averageCost:800,requiresSpecialist:!0,color:"#10b981",isActive:!0}]},appointments:{allowOnlineBooking:!1,maxAdvanceBookingDays:30,minAdvanceBookingHours:2,allowSameDayBooking:!0,requireDepositForBooking:!1,depositPercentage:20,cancellationPolicy:"Cancellations must be made at least 2 hours in advance",reminderSettings:{emailReminders:!0,smsReminders:!1,reminderTimings:[24,2],followUpEnabled:!0,followUpDelayDays:7}},holidays:[{id:"new-year",name:"New Year's Day",date:new Date("2024-01-01"),isRecurring:!0},{id:"independence",name:"Independence Day",date:new Date("2024-03-20"),isRecurring:!0},{id:"eid-fitr",name:"Eid al-Fitr",date:new Date("2024-04-10"),isRecurring:!1,description:"Dates vary each year"}]},businessSettings:{currency:"TND",taxSettings:{defaultTaxRate:19,taxIncluded:!1,taxLabel:"TVA",taxId:"TN123456789",applyTaxToLabor:!0,applyTaxToParts:!0},paymentSettings:{acceptedMethods:["cash","card","bank-transfer"],defaultPaymentTerms:"Payment due upon completion",lateFeePercentage:1.5,lateFeeGracePeriodDays:7,allowPartialPayments:!0,requireDepositPercentage:0},invoiceSettings:{invoicePrefix:"INV",invoiceNumberFormat:"INV-{YYYY}-{000001}",nextInvoiceNumber:1001,defaultPaymentTerms:"Payment due upon completion of service",showItemCodes:!0,showMechanicNames:!0,includeTermsAndConditions:!0,termsAndConditions:"All work is guaranteed for 30 days. Customer is responsible for any parts not covered under warranty.",footerText:"Thank you for choosing OpAuto Garage!"},pricingRules:{laborRatePerHour:45,weekendSurcharge:25,urgentJobSurcharge:50,bulkDiscountThreshold:1e3,bulkDiscountPercentage:10,loyalCustomerDiscountPercentage:5,autoApplyDiscounts:!0}},systemSettings:{notifications:{enableBrowserNotifications:!0,enableEmailNotifications:!1,enableSmsNotifications:!1,notificationChannels:[{type:"browser",events:["appointment-created","job-completed","approval-required"],isEnabled:!0,configuration:{}}],quietHours:{enabled:!0,startTime:"22:00",endTime:"08:00"}},security:{sessionTimeoutMinutes:480,requirePasswordReset:!1,passwordResetIntervalDays:90,enableTwoFactor:!1,allowMultipleSessions:!0,ipWhitelist:[],auditLogRetentionDays:365},dataRetention:{customerDataRetentionYears:7,invoiceRetentionYears:10,maintenanceLogRetentionYears:5,deleteInactiveCustomersAfterYears:3,autoArchiveCompletedJobs:!0,archiveAfterMonths:12},backup:{autoBackupEnabled:!1,backupFrequency:"weekly",backupRetentionDays:30,includeImages:!0,cloudBackupEnabled:!1},appearance:{theme:"system",primaryColor:"#2563eb",secondaryColor:"#64748b",accentColor:"#f59e0b",dashboardLayout:"standard",showWelcomeMessage:!0,language:"en"}},integrationSettings:{smsProvider:{provider:"none",isEnabled:!1,configuration:{}},emailProvider:{provider:"none",isEnabled:!1,configuration:{}},paymentGateway:{provider:"none",isEnabled:!1,configuration:{}},inventoryIntegration:{provider:"manual",isEnabled:!0,autoOrderThreshold:5,preferredSuppliers:["Local Parts Store","Auto Parts Direct"],configuration:{}},accountingIntegration:{provider:"none",isEnabled:!1,syncFrequency:"manual",configuration:{}}},createdAt:new Date("2024-01-01"),updatedAt:new Date};settingsSubject=new Ue(this.mockSettings);settings$=this.settingsSubject.asObservable();getSettings(){return this.settings$.pipe(C(100))}updateSettings(n){let o=this.settingsSubject.value,a=x(b(b({},o),n),{updatedAt:new Date});return this.settingsSubject.next(a),I(a).pipe(C(300))}updateGarageInfo(n){let o=this.settingsSubject.value,a=x(b({},o),{garageInfo:b(b({},o.garageInfo),n),updatedAt:new Date});return this.settingsSubject.next(a),I(a).pipe(C(200))}updateOperationalSettings(n){let o=this.settingsSubject.value,a=x(b({},o),{operationalSettings:b(b({},o.operationalSettings),n),updatedAt:new Date});return this.settingsSubject.next(a),I(a).pipe(C(200))}updateBusinessSettings(n){let o=this.settingsSubject.value,a=x(b({},o),{businessSettings:b(b({},o.businessSettings),n),updatedAt:new Date});return this.settingsSubject.next(a),I(a).pipe(C(200))}updateSystemSettings(n){let o=this.settingsSubject.value,a=x(b({},o),{systemSettings:b(b({},o.systemSettings),n),updatedAt:new Date});return this.settingsSubject.next(a),I(a).pipe(C(200))}updateIntegrationSettings(n){let o=this.settingsSubject.value,a=x(b({},o),{integrationSettings:b(b({},o.integrationSettings),n),updatedAt:new Date});return this.settingsSubject.next(a),I(a).pipe(C(200))}validateSettings(n){let o=[],a=[];if(n.garageInfo&&((!n.garageInfo.name||n.garageInfo.name.trim().length<2)&&o.push({field:"garageInfo.name",message:"Garage name is required and must be at least 2 characters",severity:"error"}),(!n.garageInfo.phone||!/^\+?[0-9\s-()]+$/.test(n.garageInfo.phone))&&o.push({field:"garageInfo.phone",message:"Valid phone number is required",severity:"error"}),(!n.garageInfo.email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.garageInfo.email))&&o.push({field:"garageInfo.email",message:"Valid email address is required",severity:"error"})),n.operationalSettings?.capacity){let f=n.operationalSettings.capacity;f.totalLifts<1&&o.push({field:"capacity.totalLifts",message:"At least 1 lift is required",severity:"error"}),f.totalMechanics<1&&o.push({field:"capacity.totalMechanics",message:"At least 1 mechanic is required",severity:"error"}),f.maxDailyAppointments<1&&a.push({field:"capacity.maxDailyAppointments",message:"Very low daily appointment limit may impact business",suggestion:"Consider increasing to at least 4 appointments per day"})}if(n.businessSettings?.taxSettings){let f=n.businessSettings.taxSettings;(f.defaultTaxRate<0||f.defaultTaxRate>100)&&o.push({field:"taxSettings.defaultTaxRate",message:"Tax rate must be between 0 and 100",severity:"error"})}let d={isValid:o.length===0,errors:o,warnings:a};return I(d).pipe(C(100))}resetToDefaults(n){let o=this.getDefaultSettings(),a=this.settingsSubject.value,d=x(b({},a),{[n]:o[n],updatedAt:new Date});return this.settingsSubject.next(d),I(d).pipe(C(200))}exportSettings(){let n=this.settingsSubject.value,o=x(b({},n),{exportedAt:new Date,version:"1.0"}),a=new Blob([JSON.stringify(o,null,2)],{type:"application/json"});return I(a).pipe(C(100))}importSettings(n){return new ze(o=>{let a=new FileReader;a.onload=d=>{try{let f=JSON.parse(d.target?.result);if(!f.garageInfo||!f.operationalSettings)throw new Error("Invalid settings file format");let $=x(b({},f),{updatedAt:new Date});this.settingsSubject.next($),o.next($),o.complete()}catch{o.error(new Error("Failed to parse settings file"))}},a.onerror=()=>{o.error(new Error("Failed to read file"))},a.readAsText(n)}).pipe(C(300))}testIntegration(n){let a={sms:{success:!0,message:"SMS service connection successful"},email:{success:!0,message:"Email service connection successful"},payment:{success:!1,message:"Payment gateway configuration invalid"},inventory:{success:!0,message:"Inventory system connected"},accounting:{success:!1,message:"Accounting integration not configured"}}[n]||{success:!1,message:"Unknown integration type"};return I(a).pipe(C(1e3))}getDefaultSettings(){return{garageInfo:{name:"",address:"",city:"",postalCode:"",country:"Tunisia",phone:"",email:"",taxId:"",registrationNumber:""},operationalSettings:{capacity:{totalLifts:2,availableLifts:2,totalMechanics:2,availableMechanics:2,maxDailyAppointments:8,avgServiceDuration:90},workingHours:{monday:{isWorkingDay:!0,openTime:"08:00",closeTime:"17:00"},tuesday:{isWorkingDay:!0,openTime:"08:00",closeTime:"17:00"},wednesday:{isWorkingDay:!0,openTime:"08:00",closeTime:"17:00"},thursday:{isWorkingDay:!0,openTime:"08:00",closeTime:"17:00"},friday:{isWorkingDay:!0,openTime:"08:00",closeTime:"17:00"},saturday:{isWorkingDay:!1,openTime:"",closeTime:""},sunday:{isWorkingDay:!1,openTime:"",closeTime:""},timezone:"Africa/Tunis"},serviceSettings:{defaultServiceDuration:90,bufferTimeBetweenServices:15,allowOverlappingAppointments:!1,requireCustomerApproval:!0,defaultWarrantyPeriod:30,serviceCategories:[]},appointments:{allowOnlineBooking:!1,maxAdvanceBookingDays:30,minAdvanceBookingHours:2,allowSameDayBooking:!0,requireDepositForBooking:!1,depositPercentage:0,cancellationPolicy:"",reminderSettings:{emailReminders:!1,smsReminders:!1,reminderTimings:[24],followUpEnabled:!1,followUpDelayDays:7}},holidays:[]},businessSettings:{currency:"TND",taxSettings:{defaultTaxRate:19,taxIncluded:!1,taxLabel:"TVA",taxId:"",applyTaxToLabor:!0,applyTaxToParts:!0},paymentSettings:{acceptedMethods:["cash"],defaultPaymentTerms:"Payment due upon completion",lateFeePercentage:0,lateFeeGracePeriodDays:0,allowPartialPayments:!1,requireDepositPercentage:0},invoiceSettings:{invoicePrefix:"INV",invoiceNumberFormat:"INV-{000001}",nextInvoiceNumber:1,defaultPaymentTerms:"Payment due upon completion",showItemCodes:!1,showMechanicNames:!1,includeTermsAndConditions:!1,termsAndConditions:"",footerText:""},pricingRules:{laborRatePerHour:30,weekendSurcharge:0,urgentJobSurcharge:0,bulkDiscountThreshold:0,bulkDiscountPercentage:0,loyalCustomerDiscountPercentage:0,autoApplyDiscounts:!1}},systemSettings:{notifications:{enableBrowserNotifications:!0,enableEmailNotifications:!1,enableSmsNotifications:!1,notificationChannels:[],quietHours:{enabled:!1,startTime:"22:00",endTime:"08:00"}},security:{sessionTimeoutMinutes:240,requirePasswordReset:!1,passwordResetIntervalDays:90,enableTwoFactor:!1,allowMultipleSessions:!1,ipWhitelist:[],auditLogRetentionDays:90},dataRetention:{customerDataRetentionYears:5,invoiceRetentionYears:7,maintenanceLogRetentionYears:3,deleteInactiveCustomersAfterYears:2,autoArchiveCompletedJobs:!1,archiveAfterMonths:6},backup:{autoBackupEnabled:!1,backupFrequency:"weekly",backupRetentionDays:7,includeImages:!1,cloudBackupEnabled:!1},appearance:{theme:"light",primaryColor:"#2563eb",secondaryColor:"#64748b",accentColor:"#f59e0b",dashboardLayout:"standard",showWelcomeMessage:!0,language:"en"}},integrationSettings:{smsProvider:{provider:"none",isEnabled:!1,configuration:{}},emailProvider:{provider:"none",isEnabled:!1,configuration:{}},paymentGateway:{provider:"none",isEnabled:!1,configuration:{}},inventoryIntegration:{provider:"manual",isEnabled:!0,autoOrderThreshold:10,preferredSuppliers:[],configuration:{}},accountingIntegration:{provider:"none",isEnabled:!1,syncFrequency:"manual",configuration:{}}},createdAt:new Date,updatedAt:new Date}}getGarageInfo(){return this.settings$.pipe(pe(n=>n.garageInfo),C(50))}getInvoiceSettings(){return this.settings$.pipe(pe(n=>b({garageInfo:n.garageInfo},n.businessSettings.invoiceSettings)),C(50))}static \u0275fac=function(o){return new(o||r)};static \u0275prov=$e({token:r,factory:r.\u0275fac,providedIn:"root"})};function it(r,n){r&1&&(S(),t(0,"svg",35),l(1,"circle",36)(2,"path",37),e(),i(3," Saving... "))}function nt(r,n){r&1&&i(0," Save Changes ")}function at(r,n){r&1&&(t(0,"p",10),i(1,"Garage name is required"),e())}function ot(r,n){r&1&&(t(0,"p",10),i(1,"Registration number is required"),e())}function rt(r,n){r&1&&(t(0,"p",10),i(1,"Valid phone number is required"),e())}function st(r,n){r&1&&(t(0,"p",10),i(1,"Valid email address is required"),e())}function lt(r,n){r&1&&(t(0,"p",10),i(1,"Tax ID is required"),e())}function mt(r,n){r&1&&(t(0,"p",10),i(1,"Address is required"),e())}function dt(r,n){r&1&&(t(0,"p",10),i(1,"City is required"),e())}function ct(r,n){r&1&&(t(0,"p",10),i(1,"Postal code is required"),e())}function pt(r,n){r&1&&(t(0,"p",10),i(1,"Country is required"),e())}var re=class r{fb=k(V);garageInfo;save=new D;garageForm;isSaving=!1;ngOnInit(){this.initializeForm(),this.populateForm()}ngOnChanges(){this.garageForm&&this.garageInfo&&this.populateForm()}initializeForm(){this.garageForm=this.fb.group({name:["",[c.required,c.minLength(2)]],registrationNumber:["",c.required],description:[""],phone:["",[c.required,c.pattern(/^\+?[0-9\s-()]+$/)]],email:["",[c.required,c.email]],website:["",c.pattern(/^https?:\/\/.+/)],taxId:["",c.required],address:["",c.required],city:["",c.required],postalCode:["",c.required],country:["Tunisia",c.required],bankDetails:this.fb.group({bankName:[""],accountHolderName:[""],accountNumber:[""],iban:[""],bic:[""]})})}populateForm(){this.garageInfo&&this.garageForm.patchValue({name:this.garageInfo.name,registrationNumber:this.garageInfo.registrationNumber,description:this.garageInfo.description||"",phone:this.garageInfo.phone,email:this.garageInfo.email,website:this.garageInfo.website||"",taxId:this.garageInfo.taxId,address:this.garageInfo.address,city:this.garageInfo.city,postalCode:this.garageInfo.postalCode,country:this.garageInfo.country,bankDetails:{bankName:this.garageInfo.bankDetails?.bankName||"",accountHolderName:this.garageInfo.bankDetails?.accountHolderName||"",accountNumber:this.garageInfo.bankDetails?.accountNumber||"",iban:this.garageInfo.bankDetails?.iban||"",bic:this.garageInfo.bankDetails?.bic||""}})}isFieldInvalid(n){let o=this.garageForm.get(n);return!!(o&&o.invalid&&(o.dirty||o.touched))}onSave(){if(this.garageForm.valid){this.isSaving=!0;let n=this.garageForm.value,o={name:n.name,registrationNumber:n.registrationNumber,description:n.description,phone:n.phone,email:n.email,website:n.website,taxId:n.taxId,address:n.address,city:n.city,postalCode:n.postalCode,country:n.country,bankDetails:n.bankDetails.bankName?{bankName:n.bankDetails.bankName,accountHolderName:n.bankDetails.accountHolderName,accountNumber:n.bankDetails.accountNumber,iban:n.bankDetails.iban,bic:n.bankDetails.bic}:void 0};this.save.emit(o),setTimeout(()=>{this.isSaving=!1},1e3)}}resetForm(){this.populateForm(),this.garageForm.markAsPristine(),this.garageForm.markAsUntouched()}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=T({type:r,selectors:[["app-garage-info-form"]],inputs:{garageInfo:"garageInfo"},outputs:{save:"save"},features:[P],decls:108,vars:30,consts:[[1,"glass-card"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-white"],[1,"flex","space-x-2"],["type","button",1,"btn-secondary","text-sm",3,"click"],["type","button",1,"btn-primary","text-sm",3,"click","disabled"],[1,"space-y-6",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"form-label"],["type","text","formControlName","name",1,"form-input"],[1,"mt-1","text-sm","text-red-600","dark:text-red-400"],["type","text","formControlName","registrationNumber","placeholder","RC-A-12345",1,"form-input"],[1,"md:col-span-2"],["formControlName","description","rows","3","placeholder","Brief description of your garage services",1,"form-textarea"],[1,"text-md","font-medium","text-white","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","tel","formControlName","phone","placeholder","+216 71 123 456",1,"form-input"],["type","email","formControlName","email","placeholder","contact@garage.tn",1,"form-input"],["type","url","formControlName","website","placeholder","https://garage.tn",1,"form-input"],["type","text","formControlName","taxId","placeholder","TN123456789",1,"form-input"],["type","text","formControlName","address","placeholder","123 Avenue Habib Bourguiba",1,"form-input"],["type","text","formControlName","city","placeholder","Tunis",1,"form-input"],["type","text","formControlName","postalCode","placeholder","1000",1,"form-input"],["formControlName","country",1,"form-select"],["value","Tunisia"],["value","Algeria"],["value","Morocco"],["value","Libya"],["value","Egypt"],["formGroupName","bankDetails",1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","text","formControlName","bankName","placeholder","Banque de Tunisie",1,"form-input"],["type","text","formControlName","accountHolderName","placeholder","Garage SARL",1,"form-input"],["type","text","formControlName","accountNumber","placeholder","12345678901234567890",1,"form-input"],["type","text","formControlName","iban","placeholder","TN5912345678901234567890",1,"form-input"],["type","text","formControlName","bic","placeholder","BTUNTNTT",1,"form-input"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(o,a){o&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),i(3,"Garage Information"),e(),t(4,"div",3)(5,"button",4),g("click",function(){return a.resetForm()}),i(6," Reset "),e(),t(7,"button",5),g("click",function(){return a.onSave()}),p(8,it,4,0)(9,nt,1,0),e()()(),t(10,"form",6)(11,"div",7)(12,"div")(13,"label",8),i(14,"Garage Name *"),e(),l(15,"input",9),p(16,at,2,0,"p",10),e(),t(17,"div")(18,"label",8),i(19,"Registration Number *"),e(),l(20,"input",11),p(21,ot,2,0,"p",10),e(),t(22,"div",12)(23,"label",8),i(24,"Description"),e(),t(25,"textarea",13),i(26,"            "),e()()(),t(27,"div")(28,"h3",14),i(29,"Contact Information"),e(),t(30,"div",15)(31,"div")(32,"label",8),i(33,"Phone Number *"),e(),l(34,"input",16),p(35,rt,2,0,"p",10),e(),t(36,"div")(37,"label",8),i(38,"Email Address *"),e(),l(39,"input",17),p(40,st,2,0,"p",10),e(),t(41,"div")(42,"label",8),i(43,"Website"),e(),l(44,"input",18),e(),t(45,"div")(46,"label",8),i(47,"Tax ID *"),e(),l(48,"input",19),p(49,lt,2,0,"p",10),e()()(),t(50,"div")(51,"h3",14),i(52,"Address"),e(),t(53,"div",15)(54,"div",12)(55,"label",8),i(56,"Street Address *"),e(),l(57,"input",20),p(58,mt,2,0,"p",10),e(),t(59,"div")(60,"label",8),i(61,"City *"),e(),l(62,"input",21),p(63,dt,2,0,"p",10),e(),t(64,"div")(65,"label",8),i(66,"Postal Code *"),e(),l(67,"input",22),p(68,ct,2,0,"p",10),e(),t(69,"div")(70,"label",8),i(71,"Country *"),e(),t(72,"select",23)(73,"option",24),i(74,"Tunisia"),e(),t(75,"option",25),i(76,"Algeria"),e(),t(77,"option",26),i(78,"Morocco"),e(),t(79,"option",27),i(80,"Libya"),e(),t(81,"option",28),i(82,"Egypt"),e()(),p(83,pt,2,0,"p",10),e()()(),t(84,"div")(85,"h3",14),i(86,"Bank Details (Optional)"),e(),t(87,"div",29)(88,"div")(89,"label",8),i(90,"Bank Name"),e(),l(91,"input",30),e(),t(92,"div")(93,"label",8),i(94,"Account Holder Name"),e(),l(95,"input",31),e(),t(96,"div")(97,"label",8),i(98,"Account Number"),e(),l(99,"input",32),e(),t(100,"div")(101,"label",8),i(102,"IBAN"),e(),l(103,"input",33),e(),t(104,"div")(105,"label",8),i(106,"BIC/SWIFT Code"),e(),l(107,"input",34),e()()()()()),o&2&&(s(7),m("disabled",a.garageForm.invalid||a.isSaving),s(),u(a.isSaving?8:9),s(2),m("formGroup",a.garageForm),s(5),v("border-red-500",a.isFieldInvalid("name")),s(),u(a.isFieldInvalid("name")?16:-1),s(4),v("border-red-500",a.isFieldInvalid("registrationNumber")),s(),u(a.isFieldInvalid("registrationNumber")?21:-1),s(13),v("border-red-500",a.isFieldInvalid("phone")),s(),u(a.isFieldInvalid("phone")?35:-1),s(4),v("border-red-500",a.isFieldInvalid("email")),s(),u(a.isFieldInvalid("email")?40:-1),s(8),v("border-red-500",a.isFieldInvalid("taxId")),s(),u(a.isFieldInvalid("taxId")?49:-1),s(8),v("border-red-500",a.isFieldInvalid("address")),s(),u(a.isFieldInvalid("address")?58:-1),s(4),v("border-red-500",a.isFieldInvalid("city")),s(),u(a.isFieldInvalid("city")?63:-1),s(4),v("border-red-500",a.isFieldInvalid("postalCode")),s(),u(a.isFieldInvalid("postalCode")?68:-1),s(4),v("border-red-500",a.isFieldInvalid("country")),s(11),u(a.isFieldInvalid("country")?83:-1))},dependencies:[w,q,R,z,U,G,Y,A,M,B,O,W],encapsulation:2})};var gt=(r,n)=>n.key;function ft(r,n){r&1&&(t(0,"p",8),i(1,"At least 1 lift required"),e())}function vt(r,n){r&1&&(t(0,"p",8),i(1,"At least 1 mechanic required"),e())}function bt(r,n){r&1&&(t(0,"div",45),l(1,"input",46),t(2,"span",47),i(3,"to"),e(),l(4,"input",48),e())}function yt(r,n){r&1&&(t(0,"div",49)(1,"span",50),i(2,"Lunch:"),e(),l(3,"input",51),t(4,"span",47),i(5,"-"),e(),l(6,"input",52),e())}function St(r,n){if(r&1&&(t(0,"div",15)(1,"div",40)(2,"label",28),l(3,"input",41),t(4,"span",42),i(5),e()()(),Ke(6,bt,5,0,"div",43)(7,yt,7,0,"div",44),e()),r&2){let o=n.$implicit,a=y();m("formGroupName",o.key),s(5),h(o.label),s(),m("ngIf",a.isWorkingDay(o.key)),s(),m("ngIf",a.isWorkingDay(o.key))}}var le=class r{fb=k(V);settings;save=new D;capacityForm;workingHoursForm;serviceForm;appointmentForm;weekDays=[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}];ngOnInit(){this.initializeForms(),this.populateForms()}ngOnChanges(){this.capacityForm&&this.settings&&this.populateForms()}initializeForms(){this.capacityForm=this.fb.group({totalLifts:[1,[c.required,c.min(1)]],totalMechanics:[1,[c.required,c.min(1)]],maxDailyAppointments:[8,[c.required,c.min(1)]],avgServiceDuration:[90,[c.min(15)]]}),this.workingHoursForm=this.fb.group({timezone:["Africa/Tunis"],monday:this.createDayScheduleGroup(),tuesday:this.createDayScheduleGroup(),wednesday:this.createDayScheduleGroup(),thursday:this.createDayScheduleGroup(),friday:this.createDayScheduleGroup(),saturday:this.createDayScheduleGroup(),sunday:this.createDayScheduleGroup()}),this.serviceForm=this.fb.group({defaultServiceDuration:[90,[c.min(15)]],bufferTimeBetweenServices:[15,[c.min(0)]],allowOverlappingAppointments:[!1],requireCustomerApproval:[!0],defaultWarrantyPeriod:[30,[c.min(0)]]}),this.appointmentForm=this.fb.group({allowOnlineBooking:[!1],maxAdvanceBookingDays:[30,[c.min(1)]],minAdvanceBookingHours:[2,[c.min(0)]],allowSameDayBooking:[!0],requireDepositForBooking:[!1],depositPercentage:[0,[c.min(0),c.max(100)]],cancellationPolicy:[""]})}createDayScheduleGroup(){return this.fb.group({isWorkingDay:[!1],openTime:["08:00"],closeTime:["17:00"],lunchBreak:this.fb.group({startTime:["12:00"],endTime:["13:00"]})})}populateForms(){this.settings&&(this.capacityForm.patchValue(this.settings.capacity),this.workingHoursForm.patchValue(this.settings.workingHours),this.serviceForm.patchValue(this.settings.serviceSettings),this.appointmentForm.patchValue(this.settings.appointments))}isCapacityFieldInvalid(n){let o=this.capacityForm.get(n);return!!(o&&o.invalid&&(o.dirty||o.touched))}isWorkingDay(n){return this.workingHoursForm.get(n)?.get("isWorkingDay")?.value||!1}saveCapacity(){if(this.capacityForm.valid){let n=this.capacityForm.value;this.save.emit({capacity:x(b({},n),{availableLifts:n.totalLifts,availableMechanics:n.totalMechanics})})}}saveWorkingHours(){let n=this.workingHoursForm.value;this.save.emit({workingHours:n})}saveServiceSettings(){if(this.serviceForm.valid){let n=this.serviceForm.value;this.save.emit({serviceSettings:x(b({},n),{serviceCategories:this.settings.serviceSettings.serviceCategories||[]})})}}saveAppointmentSettings(){if(this.appointmentForm.valid){let n=this.appointmentForm.value;this.save.emit({appointments:x(b({},n),{reminderSettings:this.settings.appointments.reminderSettings||{emailReminders:!1,smsReminders:!1,reminderTimings:[24],followUpEnabled:!1,followUpDelayDays:7}})})}}copyHoursToAllDays(){let n=this.workingHoursForm.get("monday")?.value;n&&this.weekDays.slice(1,6).forEach(o=>{this.workingHoursForm.get(o.key)?.patchValue(n)})}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=T({type:r,selectors:[["app-operational-settings"]],inputs:{settings:"settings"},outputs:{save:"save"},features:[P],decls:115,vars:13,consts:[[1,"space-y-6"],[1,"glass-card"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-white"],["type","button",1,"btn-primary","text-sm",3,"click","disabled"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4",3,"formGroup"],[1,"form-label"],["type","number","formControlName","totalLifts","min","1","max","20",1,"form-input"],[1,"mt-1","text-sm","text-red-600","dark:text-red-400"],["type","number","formControlName","totalMechanics","min","1","max","50",1,"form-input"],["type","number","formControlName","maxDailyAppointments","min","1","max","100",1,"form-input"],["type","number","formControlName","avgServiceDuration","min","15","max","480","step","15",1,"form-input"],["type","button",1,"btn-primary","text-sm",3,"click"],[3,"formGroup"],[1,"space-y-4"],[1,"flex","items-center","space-x-4","p-3","bg-gray-800/30","rounded-lg",3,"formGroupName"],[1,"mt-4"],["formControlName","timezone",1,"form-select","w-48"],["value","Africa/Tunis"],["value","Africa/Algiers"],["value","Africa/Casablanca"],["value","Europe/Paris"],[1,"space-y-4",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","number","formControlName","defaultServiceDuration","min","15","max","480","step","15",1,"form-input"],["type","number","formControlName","bufferTimeBetweenServices","min","0","max","60","step","5",1,"form-input"],["type","number","formControlName","defaultWarrantyPeriod","min","0","max","365",1,"form-input"],[1,"space-y-3"],[1,"flex","items-center"],["type","checkbox","formControlName","allowOverlappingAppointments",1,"form-checkbox","mr-2"],[1,"text-sm","font-medium","text-gray-300"],["type","checkbox","formControlName","requireCustomerApproval",1,"form-checkbox","mr-2"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["type","number","formControlName","maxAdvanceBookingDays","min","1","max","365",1,"form-input"],["type","number","formControlName","minAdvanceBookingHours","min","0","max","72",1,"form-input"],["type","number","formControlName","depositPercentage","min","0","max","100","step","5",1,"form-input"],["type","checkbox","formControlName","allowOnlineBooking",1,"form-checkbox","mr-2"],["type","checkbox","formControlName","allowSameDayBooking",1,"form-checkbox","mr-2"],["type","checkbox","formControlName","requireDepositForBooking",1,"form-checkbox","mr-2"],["formControlName","cancellationPolicy","rows","3","placeholder","Describe your cancellation policy...",1,"form-textarea"],[1,"w-24"],["type","checkbox","formControlName","isWorkingDay",1,"form-checkbox","mr-2"],[1,"text-sm","font-medium","text-white"],["class","flex items-center space-x-2",4,"ngIf"],["class","flex items-center space-x-2 ml-4","formGroupName","lunchBreak",4,"ngIf"],[1,"flex","items-center","space-x-2"],["type","time","formControlName","openTime",1,"form-input","w-20"],[1,"text-gray-400"],["type","time","formControlName","closeTime",1,"form-input","w-20"],["formGroupName","lunchBreak",1,"flex","items-center","space-x-2","ml-4"],[1,"text-sm","text-gray-400"],["type","time","formControlName","startTime",1,"form-input","w-20"],["type","time","formControlName","endTime",1,"form-input","w-20"]],template:function(o,a){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),i(4,"Garage Capacity"),e(),t(5,"button",4),g("click",function(){return a.saveCapacity()}),i(6," Save Capacity "),e()(),t(7,"form",5)(8,"div")(9,"label",6),i(10,"Total Lifts *"),e(),l(11,"input",7),p(12,ft,2,0,"p",8),e(),t(13,"div")(14,"label",6),i(15,"Total Mechanics *"),e(),l(16,"input",9),p(17,vt,2,0,"p",8),e(),t(18,"div")(19,"label",6),i(20,"Max Daily Appointments *"),e(),l(21,"input",10),e(),t(22,"div")(23,"label",6),i(24,"Avg Service Duration (minutes)"),e(),l(25,"input",11),e()()(),t(26,"div",1)(27,"div",2)(28,"h3",3),i(29,"Working Hours"),e(),t(30,"button",12),g("click",function(){return a.saveWorkingHours()}),i(31," Save Hours "),e()(),t(32,"form",13)(33,"div",14),E(34,St,8,4,"div",15,gt),e(),t(36,"div",16)(37,"label",6),i(38,"Timezone"),e(),t(39,"select",17)(40,"option",18),i(41,"Africa/Tunis (GMT+1)"),e(),t(42,"option",19),i(43,"Africa/Algiers (GMT+1)"),e(),t(44,"option",20),i(45,"Africa/Casablanca (GMT+1)"),e(),t(46,"option",21),i(47,"Europe/Paris (GMT+1)"),e()()()()(),t(48,"div",1)(49,"div",2)(50,"h3",3),i(51,"Service Settings"),e(),t(52,"button",12),g("click",function(){return a.saveServiceSettings()}),i(53," Save Settings "),e()(),t(54,"form",22)(55,"div",23)(56,"div")(57,"label",6),i(58,"Default Service Duration (minutes)"),e(),l(59,"input",24),e(),t(60,"div")(61,"label",6),i(62,"Buffer Time Between Services (minutes)"),e(),l(63,"input",25),e(),t(64,"div")(65,"label",6),i(66,"Default Warranty Period (days)"),e(),l(67,"input",26),e()(),t(68,"div",27)(69,"label",28),l(70,"input",29),t(71,"span",30),i(72,"Allow overlapping appointments"),e()(),t(73,"label",28),l(74,"input",31),t(75,"span",30),i(76,"Require customer approval for additional work"),e()()()()(),t(77,"div",1)(78,"div",2)(79,"h3",3),i(80,"Appointment Settings"),e(),t(81,"button",12),g("click",function(){return a.saveAppointmentSettings()}),i(82," Save Settings "),e()(),t(83,"form",22)(84,"div",32)(85,"div")(86,"label",6),i(87,"Max Advance Booking (days)"),e(),l(88,"input",33),e(),t(89,"div")(90,"label",6),i(91,"Min Advance Booking (hours)"),e(),l(92,"input",34),e(),t(93,"div")(94,"label",6),i(95,"Deposit Percentage (%)"),e(),l(96,"input",35),e()(),t(97,"div",27)(98,"label",28),l(99,"input",36),t(100,"span",30),i(101,"Allow online booking"),e()(),t(102,"label",28),l(103,"input",37),t(104,"span",30),i(105,"Allow same-day booking"),e()(),t(106,"label",28),l(107,"input",38),t(108,"span",30),i(109,"Require deposit for booking"),e()()(),t(110,"div")(111,"label",6),i(112,"Cancellation Policy"),e(),t(113,"textarea",39),i(114,"            "),e()()()()()),o&2&&(s(5),m("disabled",a.capacityForm.invalid),s(2),m("formGroup",a.capacityForm),s(4),v("border-red-500",a.isCapacityFieldInvalid("totalLifts")),s(),u(a.isCapacityFieldInvalid("totalLifts")?12:-1),s(4),v("border-red-500",a.isCapacityFieldInvalid("totalMechanics")),s(),u(a.isCapacityFieldInvalid("totalMechanics")?17:-1),s(4),v("border-red-500",a.isCapacityFieldInvalid("maxDailyAppointments")),s(11),m("formGroup",a.workingHoursForm),s(2),_(a.weekDays),s(20),m("formGroup",a.serviceForm),s(29),m("formGroup",a.appointmentForm))},dependencies:[w,Qe,q,R,z,U,G,Z,j,Y,A,M,ae,ne,B,O,W],styles:["input[type=time][_ngcontent-%COMP%]{color-scheme:dark}input[type=time][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{filter:invert(1);cursor:pointer}"]})};var ht=(r,n)=>n.value;function xt(r,n){r&1&&(t(0,"p",9),i(1,"Tax rate must be between 0 and 100"),e())}function Ct(r,n){if(r&1){let o=L();t(0,"label",20)(1,"input",41),g("change",function(d){let f=F(o).$implicit,$=y();return N($.onPaymentMethodChange(f.value,d))}),e(),t(2,"div")(3,"div",42),i(4),e(),t(5,"div",43),i(6),e()()()}if(r&2){let o=n.$implicit,a=y();s(),m("value",o.value)("checked",a.isPaymentMethodSelected(o.value)),s(3),h(o.label),s(2),h(o.description)}}function Et(r,n){r&1&&(t(0,"div")(1,"label",7),i(2,"Terms and Conditions"),e(),t(3,"textarea",44),i(4,"              "),e()())}var me=class r{fb=k(V);settings;save=new D;taxForm;paymentForm;pricingForm;invoiceForm;selectedPaymentMethods=[];paymentMethods=[{value:"cash",label:"Cash",description:"Cash payments"},{value:"card",label:"Credit/Debit Card",description:"Card payments"},{value:"bank-transfer",label:"Bank Transfer",description:"Wire transfers"},{value:"check",label:"Check",description:"Bank checks"},{value:"credit",label:"Credit Terms",description:"Payment on account"}];ngOnInit(){this.initializeForms(),this.populateForms()}ngOnChanges(){this.taxForm&&this.settings&&this.populateForms()}initializeForms(){this.taxForm=this.fb.group({defaultTaxRate:[19,[c.required,c.min(0),c.max(100)]],taxIncluded:[!1],taxLabel:["TVA"],taxId:[""],applyTaxToLabor:[!0],applyTaxToParts:[!0]}),this.paymentForm=this.fb.group({defaultPaymentTerms:["Payment due upon completion"],lateFeePercentage:[0,[c.min(0),c.max(25)]],lateFeeGracePeriodDays:[0,[c.min(0)]],allowPartialPayments:[!1],requireDepositPercentage:[0,[c.min(0),c.max(100)]]}),this.pricingForm=this.fb.group({laborRatePerHour:[30,[c.min(0)]],weekendSurcharge:[0,[c.min(0),c.max(100)]],urgentJobSurcharge:[0,[c.min(0),c.max(200)]],bulkDiscountThreshold:[0,[c.min(0)]],bulkDiscountPercentage:[0,[c.min(0),c.max(50)]],loyalCustomerDiscountPercentage:[0,[c.min(0),c.max(50)]],autoApplyDiscounts:[!1]}),this.invoiceForm=this.fb.group({invoicePrefix:["INV"],invoiceNumberFormat:["INV-{000001}"],nextInvoiceNumber:[1,[c.min(1)]],defaultPaymentTerms:["Payment due upon completion"],showItemCodes:[!1],showMechanicNames:[!1],includeTermsAndConditions:[!1],termsAndConditions:[""],footerText:[""]})}populateForms(){this.settings&&(this.taxForm.patchValue(this.settings.taxSettings),this.paymentForm.patchValue(this.settings.paymentSettings),this.pricingForm.patchValue(this.settings.pricingRules),this.invoiceForm.patchValue(this.settings.invoiceSettings),this.selectedPaymentMethods=[...this.settings.paymentSettings.acceptedMethods])}isTaxFieldInvalid(n){let o=this.taxForm.get(n);return!!(o&&o.invalid&&(o.dirty||o.touched))}isPaymentMethodSelected(n){return this.selectedPaymentMethods.includes(n)}onPaymentMethodChange(n,o){o.target.checked?this.selectedPaymentMethods.push(n):this.selectedPaymentMethods=this.selectedPaymentMethods.filter(d=>d!==n)}includeTermsAndConditions(){return this.invoiceForm.get("includeTermsAndConditions")?.value||!1}saveTaxSettings(){this.taxForm.valid&&this.save.emit({taxSettings:this.taxForm.value})}savePaymentSettings(){let n=x(b({},this.paymentForm.value),{acceptedMethods:this.selectedPaymentMethods});this.save.emit({paymentSettings:n})}savePricingRules(){this.pricingForm.valid&&this.save.emit({pricingRules:this.pricingForm.value})}saveInvoiceSettings(){this.invoiceForm.valid&&this.save.emit({invoiceSettings:this.invoiceForm.value})}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=T({type:r,selectors:[["app-business-settings"]],inputs:{settings:"settings"},outputs:{save:"save"},features:[P],decls:147,vars:11,consts:[[1,"space-y-6"],[1,"glass-card"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-white"],["type","button",1,"btn-primary","text-sm",3,"click","disabled"],[1,"space-y-4",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"form-label"],["type","number","formControlName","defaultTaxRate","min","0","max","100","step","0.1",1,"form-input"],[1,"mt-1","text-sm","text-red-400"],["type","text","formControlName","taxLabel","placeholder","TVA, VAT, GST",1,"form-input"],["type","text","formControlName","taxId","placeholder","TN123456789",1,"form-input"],[1,"space-y-3"],[1,"flex","items-center"],["type","checkbox","formControlName","taxIncluded",1,"form-checkbox","mr-2"],[1,"text-sm","font-medium","text-gray-300"],["type","checkbox","formControlName","applyTaxToLabor",1,"form-checkbox","mr-2"],["type","checkbox","formControlName","applyTaxToParts",1,"form-checkbox","mr-2"],["type","button",1,"btn-primary","text-sm",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-3","mt-2"],[1,"flex","items-center","p-3","border","border-gray-600","rounded-lg","hover:bg-gray-700/50","cursor-pointer"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","number","formControlName","lateFeePercentage","min","0","max","25","step","0.5",1,"form-input"],["type","number","formControlName","lateFeeGracePeriodDays","min","0","max","30",1,"form-input"],["formControlName","defaultPaymentTerms","rows","2","placeholder","Payment due upon completion of service",1,"form-textarea"],["type","checkbox","formControlName","allowPartialPayments",1,"form-checkbox","mr-2"],["type","number","formControlName","laborRatePerHour","min","0","step","5",1,"form-input"],["type","number","formControlName","weekendSurcharge","min","0","max","100","step","5",1,"form-input"],["type","number","formControlName","urgentJobSurcharge","min","0","max","200","step","10",1,"form-input"],["type","number","formControlName","loyalCustomerDiscountPercentage","min","0","max","50","step","1",1,"form-input"],["type","number","formControlName","bulkDiscountThreshold","min","0","step","100",1,"form-input"],["type","number","formControlName","bulkDiscountPercentage","min","0","max","50","step","1",1,"form-input"],["type","checkbox","formControlName","autoApplyDiscounts",1,"form-checkbox","mr-2"],["type","text","formControlName","invoicePrefix","placeholder","INV",1,"form-input"],["type","text","formControlName","invoiceNumberFormat","placeholder","INV-{YYYY}-{000001}",1,"form-input"],["type","number","formControlName","nextInvoiceNumber","min","1",1,"form-input"],["formControlName","defaultPaymentTerms","rows","2","placeholder","Payment terms and conditions",1,"form-textarea"],["type","checkbox","formControlName","showItemCodes",1,"form-checkbox","mr-2"],["type","checkbox","formControlName","showMechanicNames",1,"form-checkbox","mr-2"],["type","checkbox","formControlName","includeTermsAndConditions",1,"form-checkbox","mr-2"],["type","text","formControlName","footerText","placeholder","Thank you for choosing our garage!",1,"form-input"],["type","checkbox",1,"form-checkbox","mr-3",3,"change","value","checked"],[1,"font-medium","text-white"],[1,"text-sm","text-gray-400"],["formControlName","termsAndConditions","rows","4","placeholder","Enter your terms and conditions",1,"form-textarea"]],template:function(o,a){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),i(4,"Tax Settings"),e(),t(5,"button",4),g("click",function(){return a.saveTaxSettings()}),i(6," Save Tax Settings "),e()(),t(7,"form",5)(8,"div",6)(9,"div")(10,"label",7),i(11,"Default Tax Rate (%)"),e(),l(12,"input",8),p(13,xt,2,0,"p",9),e(),t(14,"div")(15,"label",7),i(16,"Tax Label"),e(),l(17,"input",10),e(),t(18,"div")(19,"label",7),i(20,"Tax ID"),e(),l(21,"input",11),e()(),t(22,"div",12)(23,"label",13),l(24,"input",14),t(25,"span",15),i(26,"Tax included in prices"),e()(),t(27,"label",13),l(28,"input",16),t(29,"span",15),i(30,"Apply tax to labor charges"),e()(),t(31,"label",13),l(32,"input",17),t(33,"span",15),i(34,"Apply tax to parts"),e()()()()(),t(35,"div",1)(36,"div",2)(37,"h3",3),i(38,"Payment Settings"),e(),t(39,"button",18),g("click",function(){return a.savePaymentSettings()}),i(40," Save Payment Settings "),e()(),t(41,"form",5)(42,"div")(43,"label",7),i(44,"Accepted Payment Methods"),e(),t(45,"div",19),E(46,Ct,7,4,"label",20,ht),e()(),t(48,"div",21)(49,"div")(50,"label",7),i(51,"Late Fee (%)"),e(),l(52,"input",22),e(),t(53,"div")(54,"label",7),i(55,"Late Fee Grace Period (days)"),e(),l(56,"input",23),e()(),t(57,"div")(58,"label",7),i(59,"Default Payment Terms"),e(),t(60,"textarea",24),i(61,"            "),e()(),t(62,"div",12)(63,"label",13),l(64,"input",25),t(65,"span",15),i(66,"Allow partial payments"),e()()()()(),t(67,"div",1)(68,"div",2)(69,"h3",3),i(70,"Pricing Rules"),e(),t(71,"button",18),g("click",function(){return a.savePricingRules()}),i(72," Save Pricing Rules "),e()(),t(73,"form",5)(74,"div",21)(75,"div")(76,"label",7),i(77),e(),l(78,"input",26),e(),t(79,"div")(80,"label",7),i(81,"Weekend Surcharge (%)"),e(),l(82,"input",27),e(),t(83,"div")(84,"label",7),i(85,"Urgent Job Surcharge (%)"),e(),l(86,"input",28),e(),t(87,"div")(88,"label",7),i(89,"Loyal Customer Discount (%)"),e(),l(90,"input",29),e(),t(91,"div")(92,"label",7),i(93),e(),l(94,"input",30),e(),t(95,"div")(96,"label",7),i(97,"Bulk Discount Percentage (%)"),e(),l(98,"input",31),e()(),t(99,"div")(100,"label",13),l(101,"input",32),t(102,"span",15),i(103,"Automatically apply discounts when applicable"),e()()()()(),t(104,"div",1)(105,"div",2)(106,"h3",3),i(107,"Invoice Settings"),e(),t(108,"button",18),g("click",function(){return a.saveInvoiceSettings()}),i(109," Save Invoice Settings "),e()(),t(110,"form",5)(111,"div",6)(112,"div")(113,"label",7),i(114,"Invoice Prefix"),e(),l(115,"input",33),e(),t(116,"div")(117,"label",7),i(118,"Number Format"),e(),l(119,"input",34),e(),t(120,"div")(121,"label",7),i(122,"Next Invoice Number"),e(),l(123,"input",35),e()(),t(124,"div")(125,"label",7),i(126,"Default Payment Terms"),e(),t(127,"textarea",36),i(128,"            "),e()(),t(129,"div",12)(130,"label",13),l(131,"input",37),t(132,"span",15),i(133,"Show item codes on invoices"),e()(),t(134,"label",13),l(135,"input",38),t(136,"span",15),i(137,"Show mechanic names on invoices"),e()(),t(138,"label",13),l(139,"input",39),t(140,"span",15),i(141,"Include terms and conditions"),e()()(),p(142,Et,5,0,"div"),t(143,"div")(144,"label",7),i(145,"Invoice Footer Text"),e(),l(146,"input",40),e()()()()),o&2&&(s(5),m("disabled",a.taxForm.invalid),s(2),m("formGroup",a.taxForm),s(5),v("border-red-500",a.isTaxFieldInvalid("defaultTaxRate")),s(),u(a.isTaxFieldInvalid("defaultTaxRate")?13:-1),s(28),m("formGroup",a.paymentForm),s(5),_(a.paymentMethods),s(27),m("formGroup",a.pricingForm),s(4),K("Labor Rate per Hour (",a.settings.currency||"TND",")"),s(16),K("Bulk Discount Threshold (",a.settings.currency||"TND",")"),s(17),m("formGroup",a.invoiceForm),s(32),u(a.includeTermsAndConditions()?142:-1))},dependencies:[w,q,R,G,Z,j,A,M,ae,ne,B,O],encapsulation:2})};var _t=(r,n)=>n.value;function kt(r,n){r&1&&(S(),t(0,"svg",70),l(1,"circle",71)(2,"path",72),e(),i(3," Saving... "))}function Tt(r,n){r&1&&i(0," Save Changes ")}function wt(r,n){r&1&&(t(0,"p",27),i(1,"Session timeout is required"),e())}function It(r,n){r&1&&(t(0,"p",27),i(1,"Customer data retention period is required"),e())}function Ft(r,n){r&1&&(t(0,"p",27),i(1,"Maintenance records retention period is required"),e())}function Nt(r,n){r&1&&(t(0,"p",27),i(1,"Invoice data retention period is required"),e())}function Dt(r,n){if(r&1&&(t(0,"div",53)(1,"p",68)(2,"strong"),i(3,"Last Backup:"),e(),i(4),ue(5,"date"),e()()),r&2){let o=y();s(4),K(" ",ge(5,1,o.lastBackupDate,"medium")," ")}}function Pt(r,n){r&1&&(S(),t(0,"svg",70),l(1,"circle",71)(2,"path",72),e(),i(3," Creating Backup... "))}function Gt(r,n){r&1&&i(0," Create Manual Backup ")}function At(r,n){r&1&&(t(0,"p",27),i(1,"Theme selection is required"),e())}function Mt(r,n){if(r&1&&(t(0,"div",61),l(1,"input",73),t(2,"label",74),l(3,"div",75),t(4,"span"),i(5),e()()()),r&2){let o=n.$implicit;s(),m("id","color-"+o.value)("value",o.hex),s(),m("for","color-"+o.value),s(),Je("background-color",o.hex),s(2),h(o.name)}}function Rt(r,n){r&1&&(t(0,"p",27),i(1,"Language selection is required"),e())}var de=class r{fb=k(V);settings;save=new D;systemForm;isSaving=!1;isCreatingBackup=!1;lastBackupDate=null;systemInfo={version:"1.0.0",lastUpdate:new Date("2024-01-15"),databaseSize:"45.2 MB"};colorOptions=[{value:"blue",name:"Blue",hex:"#2563eb"},{value:"green",name:"Green",hex:"#059669"},{value:"purple",name:"Purple",hex:"#7c3aed"},{value:"red",name:"Red",hex:"#dc2626"}];ngOnInit(){this.initializeForm(),this.populateForm(),this.loadBackupInfo()}ngOnChanges(){this.systemForm&&this.settings&&this.populateForm()}initializeForm(){this.systemForm=this.fb.group({notifications:this.fb.group({enableBrowserNotifications:[!0],enableSmsNotifications:[!1],enableEmailNotifications:[!0]}),security:this.fb.group({sessionTimeoutMinutes:[480,c.required],enableTwoFactor:[!1],allowMultipleSessions:[!0]}),dataRetention:this.fb.group({customerDataRetentionYears:[7,c.required],maintenanceLogRetentionYears:[5,c.required],invoiceRetentionYears:[10,c.required],autoArchiveCompletedJobs:[!0]}),backup:this.fb.group({autoBackupEnabled:[!1],backupFrequency:["weekly"],backupRetentionDays:[30]}),appearance:this.fb.group({theme:["system",c.required],primaryColor:["#2563eb"],language:["en"]})})}populateForm(){this.settings&&this.systemForm.patchValue({notifications:{enableBrowserNotifications:this.settings.notifications?.enableBrowserNotifications??!0,enableSmsNotifications:this.settings.notifications?.enableSmsNotifications??!1,enableEmailNotifications:this.settings.notifications?.enableEmailNotifications??!0},security:{sessionTimeoutMinutes:this.settings.security?.sessionTimeoutMinutes??480,enableTwoFactor:this.settings.security?.enableTwoFactor??!1,allowMultipleSessions:this.settings.security?.allowMultipleSessions??!0},dataRetention:{customerDataRetentionYears:this.settings.dataRetention?.customerDataRetentionYears??7,maintenanceLogRetentionYears:this.settings.dataRetention?.maintenanceLogRetentionYears??5,invoiceRetentionYears:this.settings.dataRetention?.invoiceRetentionYears??10,autoArchiveCompletedJobs:this.settings.dataRetention?.autoArchiveCompletedJobs??!0},backup:{autoBackupEnabled:this.settings.backup?.autoBackupEnabled??!1,backupFrequency:this.settings.backup?.backupFrequency??"weekly",backupRetentionDays:this.settings.backup?.backupRetentionDays??30},appearance:{theme:this.settings.appearance?.theme??"system",primaryColor:this.settings.appearance?.primaryColor??"#2563eb",language:this.settings.appearance?.language??"en"}})}loadBackupInfo(){this.lastBackupDate=new Date("2024-01-20T10:30:00")}isFieldInvalid(n){let o=this.systemForm.get(n);return!!(o&&o.invalid&&(o.dirty||o.touched))}onSave(){if(this.systemForm.valid){this.isSaving=!0;let n=this.systemForm.value,o={notifications:{enableBrowserNotifications:n.notifications.enableBrowserNotifications,enableEmailNotifications:n.notifications.enableEmailNotifications,enableSmsNotifications:n.notifications.enableSmsNotifications,notificationChannels:this.settings?.notifications?.notificationChannels||[],quietHours:this.settings?.notifications?.quietHours||{enabled:!1,startTime:"22:00",endTime:"08:00"}},security:{sessionTimeoutMinutes:n.security.sessionTimeoutMinutes,requirePasswordReset:this.settings?.security?.requirePasswordReset||!1,passwordResetIntervalDays:this.settings?.security?.passwordResetIntervalDays||90,enableTwoFactor:n.security.enableTwoFactor,allowMultipleSessions:n.security.allowMultipleSessions,ipWhitelist:this.settings?.security?.ipWhitelist||[],auditLogRetentionDays:this.settings?.security?.auditLogRetentionDays||365},dataRetention:{customerDataRetentionYears:n.dataRetention.customerDataRetentionYears,invoiceRetentionYears:n.dataRetention.invoiceRetentionYears,maintenanceLogRetentionYears:n.dataRetention.maintenanceLogRetentionYears,deleteInactiveCustomersAfterYears:this.settings?.dataRetention?.deleteInactiveCustomersAfterYears||3,autoArchiveCompletedJobs:n.dataRetention.autoArchiveCompletedJobs,archiveAfterMonths:this.settings?.dataRetention?.archiveAfterMonths||12},backup:{autoBackupEnabled:n.backup.autoBackupEnabled,backupFrequency:n.backup.backupFrequency,backupRetentionDays:n.backup.backupRetentionDays,includeImages:this.settings?.backup?.includeImages||!0,cloudBackupEnabled:this.settings?.backup?.cloudBackupEnabled||!1,lastBackupDate:this.settings?.backup?.lastBackupDate},appearance:{theme:n.appearance.theme,primaryColor:n.appearance.primaryColor,secondaryColor:this.settings?.appearance?.secondaryColor||"#64748b",accentColor:this.settings?.appearance?.accentColor||"#f59e0b",companyLogo:this.settings?.appearance?.companyLogo,dashboardLayout:this.settings?.appearance?.dashboardLayout||"standard",showWelcomeMessage:this.settings?.appearance?.showWelcomeMessage??!0,language:n.appearance.language}};this.save.emit(o),setTimeout(()=>{this.isSaving=!1},1e3)}}createManualBackup(){this.isCreatingBackup=!0,setTimeout(()=>{this.isCreatingBackup=!1,this.lastBackupDate=new Date},2e3)}resetForm(){this.populateForm(),this.systemForm.markAsPristine(),this.systemForm.markAsUntouched()}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=T({type:r,selectors:[["app-system-settings"]],inputs:{settings:"settings"},outputs:{save:"save"},features:[P],decls:215,vars:32,consts:[[1,"glass-card"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-white"],[1,"flex","space-x-2"],["type","button",1,"btn-secondary","text-sm",3,"click"],["type","button",1,"btn-primary","text-sm",3,"click","disabled"],[1,"space-y-8",3,"formGroup"],[1,"text-md","font-medium","text-white","mb-4"],["formGroupName","notifications",1,"space-y-4"],[1,"flex","items-start","space-x-3"],["type","checkbox","id","browserNotifications","formControlName","enableBrowserNotifications",1,"mt-1","w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],[1,"flex-1"],["for","browserNotifications",1,"form-label","mb-1"],[1,"text-sm","text-gray-400"],["type","checkbox","id","smsNotifications","formControlName","enableSmsNotifications",1,"mt-1","w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","smsNotifications",1,"form-label","mb-1"],["type","checkbox","id","emailNotifications","formControlName","enableEmailNotifications",1,"mt-1","w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","emailNotifications",1,"form-label","mb-1"],["formGroupName","security",1,"space-y-4"],[1,"form-label"],["formControlName","sessionTimeoutMinutes",1,"form-select"],["value","15"],["value","30"],["value","60"],["value","120"],["value","240"],["value","480"],[1,"mt-1","text-sm","text-red-600","dark:text-red-400"],["type","checkbox","id","twoFactorAuth","formControlName","enableTwoFactor",1,"mt-1","w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","twoFactorAuth",1,"form-label","mb-1"],["type","checkbox","id","multipleSessions","formControlName","allowMultipleSessions",1,"mt-1","w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","multipleSessions",1,"form-label","mb-1"],["formGroupName","dataRetention",1,"space-y-4"],["formControlName","customerDataRetentionYears",1,"form-select"],["value","3"],["value","5"],["value","7"],["value","10"],["value","0"],["formControlName","maintenanceLogRetentionYears",1,"form-select"],["formControlName","invoiceRetentionYears",1,"form-select"],["type","checkbox","id","autoArchive","formControlName","autoArchiveCompletedJobs",1,"mt-1","w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","autoArchive",1,"form-label","mb-1"],["formGroupName","backup",1,"space-y-4"],["type","checkbox","id","autoBackup","formControlName","autoBackupEnabled",1,"mt-1","w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","autoBackup",1,"form-label","mb-1"],["formControlName","backupFrequency",1,"form-select",3,"disabled"],["value","daily"],["value","weekly"],["value","monthly"],["formControlName","backupRetentionDays",1,"form-select",3,"disabled"],["value","90"],["value","365"],[1,"bg-gray-800/30","p-4","rounded-lg"],["type","button",1,"btn-secondary",3,"click","disabled"],["formGroupName","appearance",1,"space-y-4"],["formControlName","theme",1,"form-select"],["value","light"],["value","dark"],["value","system"],[1,"grid","grid-cols-4","gap-3"],[1,"flex","items-center","space-x-2"],["formControlName","language",1,"form-select"],["value","en"],["value","fr"],["value","tn"],[1,"bg-gray-50","dark:bg-gray-700","p-4","rounded-lg","space-y-2"],[1,"flex","justify-between"],[1,"text-sm","text-gray-300"],[1,"text-sm","font-medium","text-white"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["type","radio","formControlName","primaryColor",1,"w-4","h-4",3,"id","value"],[1,"flex","items-center","space-x-2","text-sm",3,"for"],[1,"w-4","h-4","rounded-full","border","border-gray-300"]],template:function(o,a){if(o&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),i(3,"System Settings"),e(),t(4,"div",3)(5,"button",4),g("click",function(){return a.resetForm()}),i(6," Reset "),e(),t(7,"button",5),g("click",function(){return a.onSave()}),p(8,kt,4,0)(9,Tt,1,0),e()()(),t(10,"form",6)(11,"div")(12,"h3",7),i(13,"Notifications"),e(),t(14,"div",8)(15,"div",9),l(16,"input",10),t(17,"div",11)(18,"label",12),i(19,"Browser Notifications"),e(),t(20,"p",13),i(21,"Receive notifications in your browser for new appointments and updates"),e()()(),t(22,"div",9),l(23,"input",14),t(24,"div",11)(25,"label",15),i(26,"SMS Notifications"),e(),t(27,"p",13),i(28,"Send SMS alerts for urgent notifications"),e()()(),t(29,"div",9),l(30,"input",16),t(31,"div",11)(32,"label",17),i(33,"Email Notifications"),e(),t(34,"p",13),i(35,"Send email notifications for daily summaries and reports"),e()()()()(),t(36,"div")(37,"h3",7),i(38,"Security"),e(),t(39,"div",18)(40,"div")(41,"label",19),i(42,"Session Timeout (minutes) *"),e(),t(43,"select",20)(44,"option",21),i(45,"15 minutes"),e(),t(46,"option",22),i(47,"30 minutes"),e(),t(48,"option",23),i(49,"1 hour"),e(),t(50,"option",24),i(51,"2 hours"),e(),t(52,"option",25),i(53,"4 hours"),e(),t(54,"option",26),i(55,"8 hours"),e()(),p(56,wt,2,0,"p",27),e(),t(57,"div",9),l(58,"input",28),t(59,"div",11)(60,"label",29),i(61,"Two-Factor Authentication"),e(),t(62,"p",13),i(63,"Add an extra layer of security to your account"),e()()(),t(64,"div",9),l(65,"input",30),t(66,"div",11)(67,"label",31),i(68,"Allow Multiple Sessions"),e(),t(69,"p",13),i(70,"Allow the same user to be logged in from multiple devices"),e()()()()(),t(71,"div")(72,"h3",7),i(73,"Data Retention"),e(),t(74,"div",32)(75,"div")(76,"label",19),i(77,"Customer Data Retention (years) *"),e(),t(78,"select",33)(79,"option",34),i(80,"3 years"),e(),t(81,"option",35),i(82,"5 years"),e(),t(83,"option",36),i(84,"7 years"),e(),t(85,"option",37),i(86,"10 years"),e(),t(87,"option",38),i(88,"Never delete"),e()(),p(89,It,2,0,"p",27),e(),t(90,"div")(91,"label",19),i(92,"Maintenance Records Retention (years) *"),e(),t(93,"select",39)(94,"option",34),i(95,"3 years"),e(),t(96,"option",35),i(97,"5 years"),e(),t(98,"option",36),i(99,"7 years"),e(),t(100,"option",37),i(101,"10 years"),e(),t(102,"option",38),i(103,"Never delete"),e()(),p(104,Ft,2,0,"p",27),e(),t(105,"div")(106,"label",19),i(107,"Invoice Data Retention (years) *"),e(),t(108,"select",40)(109,"option",35),i(110,"5 years"),e(),t(111,"option",36),i(112,"7 years"),e(),t(113,"option",37),i(114,"10 years"),e(),t(115,"option",38),i(116,"Never delete"),e()(),p(117,Nt,2,0,"p",27),e(),t(118,"div",9),l(119,"input",41),t(120,"div",11)(121,"label",42),i(122,"Auto-Archive Completed Jobs"),e(),t(123,"p",13),i(124,"Automatically archive completed jobs based on retention periods"),e()()()()(),t(125,"div")(126,"h3",7),i(127,"Backup"),e(),t(128,"div",43)(129,"div",9),l(130,"input",44),t(131,"div",11)(132,"label",45),i(133,"Automatic Backup"),e(),t(134,"p",13),i(135,"Automatically backup your data at scheduled intervals"),e()()(),t(136,"div")(137,"label",19),i(138,"Backup Frequency"),e(),t(139,"select",46)(140,"option",47),i(141,"Daily"),e(),t(142,"option",48),i(143,"Weekly"),e(),t(144,"option",49),i(145,"Monthly"),e()()(),t(146,"div")(147,"label",19),i(148,"Backup Retention (days)"),e(),t(149,"select",50)(150,"option",36),i(151,"7 days"),e(),t(152,"option",22),i(153,"30 days"),e(),t(154,"option",51),i(155,"90 days"),e(),t(156,"option",52),i(157,"1 year"),e()()(),p(158,Dt,6,4,"div",53),t(159,"div")(160,"button",54),g("click",function(){return a.createManualBackup()}),p(161,Pt,4,0)(162,Gt,1,0),e()()()(),t(163,"div")(164,"h3",7),i(165,"Appearance"),e(),t(166,"div",55)(167,"div")(168,"label",19),i(169,"Theme *"),e(),t(170,"select",56)(171,"option",57),i(172,"Light"),e(),t(173,"option",58),i(174,"Dark"),e(),t(175,"option",59),i(176,"Follow System"),e()(),p(177,At,2,0,"p",27),e(),t(178,"div")(179,"label",19),i(180,"Primary Color"),e(),t(181,"div",60),E(182,Mt,6,6,"div",61,_t),e()(),t(184,"div")(185,"label",19),i(186,"Language *"),e(),t(187,"select",62)(188,"option",63),i(189,"English"),e(),t(190,"option",64),i(191,"Fran\xE7ais"),e(),t(192,"option",65),i(193,"\u062A\u0648\u0646\u0633\u064A"),e()(),p(194,Rt,2,0,"p",27),e()()(),t(195,"div")(196,"h3",7),i(197,"System Information"),e(),t(198,"div",66)(199,"div",67)(200,"span",68),i(201,"Application Version:"),e(),t(202,"span",69),i(203),e()(),t(204,"div",67)(205,"span",68),i(206,"Last Update:"),e(),t(207,"span",69),i(208),ue(209,"date"),e()(),t(210,"div",67)(211,"span",68),i(212,"Database Size:"),e(),t(213,"span",69),i(214),e()()()()()()),o&2){let d,f;s(7),m("disabled",a.systemForm.invalid||a.isSaving),s(),u(a.isSaving?8:9),s(2),m("formGroup",a.systemForm),s(33),v("border-red-500",a.isFieldInvalid("security.sessionTimeoutMinutes")),s(13),u(a.isFieldInvalid("security.sessionTimeoutMinutes")?56:-1),s(22),v("border-red-500",a.isFieldInvalid("dataRetention.customerDataRetentionYears")),s(11),u(a.isFieldInvalid("dataRetention.customerDataRetentionYears")?89:-1),s(4),v("border-red-500",a.isFieldInvalid("dataRetention.maintenanceLogRetentionYears")),s(11),u(a.isFieldInvalid("dataRetention.maintenanceLogRetentionYears")?104:-1),s(4),v("border-red-500",a.isFieldInvalid("dataRetention.invoiceRetentionYears")),s(9),u(a.isFieldInvalid("dataRetention.invoiceRetentionYears")?117:-1),s(22),m("disabled",!((d=a.systemForm.get("backup.autoBackupEnabled"))!=null&&d.value)),s(10),m("disabled",!((f=a.systemForm.get("backup.autoBackupEnabled"))!=null&&f.value)),s(9),u(a.lastBackupDate?158:-1),s(2),m("disabled",a.isCreatingBackup),s(),u(a.isCreatingBackup?161:162),s(9),v("border-red-500",a.isFieldInvalid("appearance.theme")),s(7),u(a.isFieldInvalid("appearance.theme")?177:-1),s(5),_(a.colorOptions),s(5),v("border-red-500",a.isFieldInvalid("appearance.language")),s(7),u(a.isFieldInvalid("appearance.language")?194:-1),s(9),h(a.systemInfo.version),s(5),h(ge(209,29,a.systemInfo.lastUpdate,"medium")),s(6),h(a.systemInfo.databaseSize)}},dependencies:[w,Ze,q,R,z,U,G,j,Y,et,A,M,B,O,W],encapsulation:2})};var ie=(r,n)=>n.value,Bt=(r,n)=>n.name;function Ot(r,n){r&1&&(S(),t(0,"svg",57),l(1,"circle",58)(2,"path",59),e(),i(3," Saving... "))}function Vt(r,n){r&1&&i(0," Save Changes ")}function qt(r,n){if(r&1&&(t(0,"option",13),i(1),e()),r&2){let o=n.$implicit;m("value",o.value),s(),h(o.label)}}function Lt(r,n){r&1&&(S(),t(0,"svg",57),l(1,"circle",58)(2,"path",59),e(),i(3," Testing... "))}function Ht(r,n){r&1&&i(0," Test Connection ")}function jt(r,n){if(r&1&&(t(0,"option",13),i(1),e()),r&2){let o=n.$implicit;m("value",o.value),s(),h(o.label)}}function Wt(r,n){r&1&&(S(),t(0,"svg",57),l(1,"circle",58)(2,"path",59),e(),i(3," Testing... "))}function Yt(r,n){r&1&&i(0," Test Connection ")}function zt(r,n){if(r&1&&(t(0,"option",13),i(1),e()),r&2){let o=n.$implicit;m("value",o.value),s(),h(o.label)}}function Ut(r,n){r&1&&(S(),t(0,"svg",57),l(1,"circle",58)(2,"path",59),e(),i(3," Testing... "))}function $t(r,n){r&1&&i(0," Test Connection ")}function Kt(r,n){if(r&1&&(t(0,"option",13),i(1),e()),r&2){let o=n.$implicit;m("value",o.value),s(),h(o.label)}}function Jt(r,n){r&1&&(S(),t(0,"svg",57),l(1,"circle",58)(2,"path",59),e(),i(3," Testing... "))}function Qt(r,n){r&1&&i(0," Test Connection ")}function Zt(r,n){if(r&1&&(t(0,"option",13),i(1),e()),r&2){let o=n.$implicit;m("value",o.value),s(),h(o.label)}}function Xt(r,n){r&1&&(S(),t(0,"svg",57),l(1,"circle",58)(2,"path",59),e(),i(3," Testing... "))}function ei(r,n){r&1&&i(0," Test Connection ")}function ti(r,n){if(r&1&&(t(0,"div",56)(1,"span",60),i(2),e(),t(3,"div",61),l(4,"div",62),t(5,"span",63),i(6),e()()()),r&2){let o=n.$implicit;s(2),h(o.name),s(2),H(o.connected?"bg-green-500":"bg-red-500"),s(),H(o.connected?"text-green-400":"text-red-400"),s(),K(" ",o.connected?"Connected":"Disconnected"," ")}}var ce=class r{fb=k(V);settings;save=new D;testIntegration=new D;integrationForm;isSaving=!1;isTesting={sms:!1,email:!1,payment:!1,inventory:!1,accounting:!1};smsProviders=[{value:"twilio",label:"Twilio"},{value:"nexmo",label:"Vonage (Nexmo)"},{value:"local",label:"Local SMS Gateway"}];emailProviders=[{value:"gmail",label:"Gmail"},{value:"outlook",label:"Outlook/Office 365"},{value:"smtp",label:"Custom SMTP"},{value:"sendgrid",label:"SendGrid"}];paymentProviders=[{value:"monei",label:"Monei (Tunisia)"},{value:"paypal",label:"PayPal"},{value:"stripe",label:"Stripe"},{value:"local_bank",label:"Local Bank Gateway"}];inventoryProviders=[{value:"custom",label:"Custom Inventory System"},{value:"odoo",label:"Odoo"},{value:"zoho",label:"Zoho Inventory"}];accountingSoftware=[{value:"custom",label:"Custom Accounting"},{value:"quickbooks",label:"QuickBooks"},{value:"sage",label:"Sage"},{value:"odoo",label:"Odoo Accounting"}];integrationStatuses=[{name:"SMS Service",connected:!1},{name:"Email Service",connected:!0},{name:"Payment Gateway",connected:!1},{name:"Inventory System",connected:!1},{name:"Accounting Software",connected:!1}];ngOnInit(){this.initializeForm(),this.populateForm()}ngOnChanges(){this.integrationForm&&this.settings&&this.populateForm()}initializeForm(){this.integrationForm=this.fb.group({smsEnabled:[!1],emailEnabled:[!1],paymentEnabled:[!1],inventoryEnabled:[!1],accountingEnabled:[!1],sms:this.fb.group({provider:["twilio"],apiKey:[""],senderId:["OpAuto"]}),email:this.fb.group({provider:["gmail"],smtpHost:[""],smtpPort:[587],username:[""],password:[""]}),paymentGateway:this.fb.group({provider:["monei"],merchantId:[""],apiKey:[""],webhookUrl:[""],testMode:[!0]}),inventory:this.fb.group({provider:["custom"],apiEndpoint:[""],apiKey:[""],syncFrequency:["daily"],autoOrderEnabled:[!1]}),accounting:this.fb.group({software:["custom"],apiEndpoint:[""],clientId:[""],clientSecret:[""],syncFrequency:["daily"],autoSyncEnabled:[!1]})})}populateForm(){this.settings&&this.integrationForm.patchValue({smsEnabled:this.settings.smsProvider?.isEnabled??!1,emailEnabled:this.settings.emailProvider?.isEnabled??!1,paymentEnabled:this.settings.paymentGateway?.isEnabled??!1,inventoryEnabled:this.settings.inventoryIntegration?.isEnabled??!1,accountingEnabled:this.settings.accountingIntegration?.isEnabled??!1,sms:{provider:this.settings.smsProvider?.provider??"twilio",apiKey:this.settings.smsProvider?.configuration?.apiKey??"",senderId:this.settings.smsProvider?.configuration?.phoneNumber??"OpAuto"},email:{provider:this.settings.emailProvider?.provider??"gmail",smtpHost:this.settings.emailProvider?.configuration?.host??"",smtpPort:this.settings.emailProvider?.configuration?.port??587,username:this.settings.emailProvider?.configuration?.username??"",password:this.settings.emailProvider?.configuration?.password??""},paymentGateway:{provider:this.settings.paymentGateway?.provider??"stripe",merchantId:this.settings.paymentGateway?.configuration?.merchantId??"",apiKey:this.settings.paymentGateway?.configuration?.apiKey??"",webhookUrl:this.settings.paymentGateway?.configuration?.endpoint??"",testMode:!0},inventory:{provider:this.settings.inventoryIntegration?.provider??"manual",apiEndpoint:"",apiKey:"",syncFrequency:"daily",autoOrderEnabled:!!this.settings.inventoryIntegration?.autoOrderThreshold},accounting:{software:this.settings.accountingIntegration?.provider??"none",apiEndpoint:"",clientId:"",clientSecret:"",syncFrequency:this.settings.accountingIntegration?.syncFrequency??"daily",autoSyncEnabled:this.settings.accountingIntegration?.isEnabled??!1}})}isFieldInvalid(n){let o=this.integrationForm.get(n);return!!(o&&o.invalid&&(o.dirty||o.touched))}onSave(){if(this.integrationForm.valid){this.isSaving=!0;let n=this.integrationForm.value,o={smsProvider:{provider:n.sms.provider,isEnabled:n.smsEnabled,configuration:{apiKey:n.sms.apiKey,phoneNumber:n.sms.senderId}},emailProvider:{provider:n.email.provider,isEnabled:n.emailEnabled,configuration:{host:n.email.smtpHost,port:n.email.smtpPort,username:n.email.username,password:n.email.password,fromEmail:n.email.username,fromName:"OpAuto Garage"}},paymentGateway:{provider:n.paymentGateway.provider,isEnabled:n.paymentEnabled,configuration:{apiKey:n.paymentGateway.apiKey,merchantId:n.paymentGateway.merchantId,endpoint:n.paymentGateway.webhookUrl}},inventoryIntegration:{provider:n.inventory.provider,isEnabled:n.inventoryEnabled,autoOrderThreshold:n.inventory.autoOrderEnabled?5:0,preferredSuppliers:this.settings?.inventoryIntegration?.preferredSuppliers||[],configuration:{}},accountingIntegration:{provider:n.accounting.software,isEnabled:n.accountingEnabled,syncFrequency:n.accounting.syncFrequency,configuration:{apiEndpoint:n.accounting.apiEndpoint,clientId:n.accounting.clientId,clientSecret:n.accounting.clientSecret}}};this.save.emit(o),setTimeout(()=>{this.isSaving=!1},1e3)}}testSmsConnection(){return J(this,null,function*(){this.isTesting.sms=!0;let n=this.integrationForm.get("sms")?.value;this.testIntegration.emit({type:"sms",config:n}),setTimeout(()=>{this.isTesting.sms=!1,this.updateIntegrationStatus("SMS Service",!0)},2e3)})}testEmailConnection(){return J(this,null,function*(){this.isTesting.email=!0;let n=this.integrationForm.get("email")?.value;this.testIntegration.emit({type:"email",config:n}),setTimeout(()=>{this.isTesting.email=!1,this.updateIntegrationStatus("Email Service",!0)},2e3)})}testPaymentConnection(){return J(this,null,function*(){this.isTesting.payment=!0;let n=this.integrationForm.get("paymentGateway")?.value;this.testIntegration.emit({type:"payment",config:n}),setTimeout(()=>{this.isTesting.payment=!1,this.updateIntegrationStatus("Payment Gateway",!0)},2e3)})}testInventoryConnection(){return J(this,null,function*(){this.isTesting.inventory=!0;let n=this.integrationForm.get("inventory")?.value;this.testIntegration.emit({type:"inventory",config:n}),setTimeout(()=>{this.isTesting.inventory=!1,this.updateIntegrationStatus("Inventory System",!0)},2e3)})}testAccountingConnection(){return J(this,null,function*(){this.isTesting.accounting=!0;let n=this.integrationForm.get("accounting")?.value;this.testIntegration.emit({type:"accounting",config:n}),setTimeout(()=>{this.isTesting.accounting=!1,this.updateIntegrationStatus("Accounting Software",!0)},2e3)})}updateIntegrationStatus(n,o){let a=this.integrationStatuses.find(d=>d.name===n);a&&(a.connected=o)}resetForm(){this.populateForm(),this.integrationForm.markAsPristine(),this.integrationForm.markAsUntouched()}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=T({type:r,selectors:[["app-integration-settings"]],inputs:{settings:"settings"},outputs:{save:"save",testIntegration:"testIntegration"},features:[P],decls:198,vars:47,consts:[[1,"glass-card"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-white"],[1,"flex","space-x-2"],["type","button",1,"btn-secondary","text-sm",3,"click"],["type","button",1,"btn-primary","text-sm",3,"click","disabled"],[1,"space-y-8",3,"formGroup"],[1,"flex","items-center","space-x-3","mb-4"],["type","checkbox","id","smsEnabled","formControlName","smsEnabled",1,"form-checkbox"],[1,"text-md","font-medium","text-white"],["formGroupName","sms",1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"form-label"],["formControlName","provider",1,"form-select",3,"disabled"],[3,"value"],["type","password","formControlName","apiKey","placeholder","Enter your SMS API key",1,"form-input",3,"disabled"],["type","text","formControlName","senderId","placeholder","OpAuto",1,"form-input",3,"disabled"],[1,"flex","items-center","mt-6"],["type","button",1,"btn-secondary","text-sm",3,"click","disabled"],["type","checkbox","id","emailEnabled","formControlName","emailEnabled",1,"form-checkbox"],["formGroupName","email",1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","text","formControlName","smtpHost","placeholder","smtp.gmail.com",1,"form-input",3,"disabled"],["type","number","formControlName","smtpPort","placeholder","587",1,"form-input",3,"disabled"],["type","email","formControlName","username","placeholder","your-email@gmail.com",1,"form-input",3,"disabled"],["type","password","formControlName","password","placeholder","Enter your email password",1,"form-input",3,"disabled"],["type","checkbox","id","paymentEnabled","formControlName","paymentEnabled",1,"form-checkbox"],["formGroupName","paymentGateway",1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","text","formControlName","merchantId","placeholder","Enter merchant ID",1,"form-input",3,"disabled"],["type","password","formControlName","apiKey","placeholder","Enter payment gateway API key",1,"form-input",3,"disabled"],["type","url","formControlName","webhookUrl","placeholder","https://yourdomain.com/webhook",1,"form-input",3,"disabled"],[1,"md:col-span-2"],[1,"flex","items-center","space-x-3"],["type","checkbox","id","testMode","formControlName","testMode",1,"form-checkbox",3,"disabled"],["for","testMode",1,"text-sm","font-medium","text-gray-300"],[1,"text-sm","text-gray-400","mt-1"],["type","checkbox","id","inventoryEnabled","formControlName","inventoryEnabled",1,"form-checkbox"],["formGroupName","inventory",1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","url","formControlName","apiEndpoint","placeholder","https://api.parts-supplier.com/v1",1,"form-input",3,"disabled"],["type","password","formControlName","apiKey","placeholder","Enter inventory API key",1,"form-input",3,"disabled"],["formControlName","syncFrequency",1,"form-select",3,"disabled"],["value","realtime"],["value","hourly"],["value","daily"],["value","weekly"],["type","checkbox","id","autoOrder","formControlName","autoOrderEnabled",1,"form-checkbox",3,"disabled"],["for","autoOrder",1,"text-sm","font-medium","text-gray-300"],["type","checkbox","id","accountingEnabled","formControlName","accountingEnabled",1,"form-checkbox"],["formGroupName","accounting",1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["formControlName","software",1,"form-select",3,"disabled"],["type","url","formControlName","apiEndpoint","placeholder","https://api.accounting-software.com/v1",1,"form-input",3,"disabled"],["type","text","formControlName","clientId","placeholder","Enter client ID",1,"form-input",3,"disabled"],["type","password","formControlName","clientSecret","placeholder","Enter client secret",1,"form-input",3,"disabled"],["value","monthly"],["type","checkbox","id","autoSync","formControlName","autoSyncEnabled",1,"form-checkbox",3,"disabled"],["for","autoSync",1,"text-sm","font-medium","text-gray-300"],[1,"text-md","font-medium","text-white","mb-4"],[1,"bg-gray-800/30","p-4","rounded-lg","space-y-3"],[1,"flex","items-center","justify-between"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-sm","font-medium","text-white"],[1,"flex","items-center","space-x-2"],[1,"w-2","h-2","rounded-full"],[1,"text-sm"]],template:function(o,a){if(o&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),i(3,"Integration Settings"),e(),t(4,"div",3)(5,"button",4),g("click",function(){return a.resetForm()}),i(6," Reset "),e(),t(7,"button",5),g("click",function(){return a.onSave()}),p(8,Ot,4,0)(9,Vt,1,0),e()()(),t(10,"form",6)(11,"div")(12,"div",7),l(13,"input",8),t(14,"h3",9),i(15,"SMS Integration"),e()(),t(16,"div",10)(17,"div")(18,"label",11),i(19,"SMS Service Provider"),e(),t(20,"select",12),E(21,qt,2,2,"option",13,ie),e()(),t(23,"div")(24,"label",11),i(25,"SMS API Key"),e(),l(26,"input",14),e(),t(27,"div")(28,"label",11),i(29,"SMS Sender Name"),e(),l(30,"input",15),e(),t(31,"div",16)(32,"button",17),g("click",function(){return a.testSmsConnection()}),p(33,Lt,4,0)(34,Ht,1,0),e()()()(),t(35,"div")(36,"div",7),l(37,"input",18),t(38,"h3",9),i(39,"Email Integration"),e()(),t(40,"div",19)(41,"div")(42,"label",11),i(43,"Email Service Provider"),e(),t(44,"select",12),E(45,jt,2,2,"option",13,ie),e()(),t(47,"div")(48,"label",11),i(49,"SMTP Server Address"),e(),l(50,"input",20),e(),t(51,"div")(52,"label",11),i(53,"SMTP Server Port"),e(),l(54,"input",21),e(),t(55,"div")(56,"label",11),i(57,"Email Account Username"),e(),l(58,"input",22),e(),t(59,"div")(60,"label",11),i(61,"Email Account Password"),e(),l(62,"input",23),e(),t(63,"div",16)(64,"button",17),g("click",function(){return a.testEmailConnection()}),p(65,Wt,4,0)(66,Yt,1,0),e()()()(),t(67,"div")(68,"div",7),l(69,"input",24),t(70,"h3",9),i(71,"Payment Gateway"),e()(),t(72,"div",25)(73,"div")(74,"label",11),i(75,"Provider"),e(),t(76,"select",12),E(77,zt,2,2,"option",13,ie),e()(),t(79,"div")(80,"label",11),i(81,"Merchant ID"),e(),l(82,"input",26),e(),t(83,"div")(84,"label",11),i(85,"API Key"),e(),l(86,"input",27),e(),t(87,"div")(88,"label",11),i(89,"Webhook URL"),e(),l(90,"input",28),e(),t(91,"div",29)(92,"div",30),l(93,"input",31),t(94,"label",32),i(95,"Test Mode"),e()(),t(96,"p",33),i(97,"Use sandbox environment for testing payments"),e()(),t(98,"div",16)(99,"button",17),g("click",function(){return a.testPaymentConnection()}),p(100,Ut,4,0)(101,$t,1,0),e()()()(),t(102,"div")(103,"div",7),l(104,"input",34),t(105,"h3",9),i(106,"Inventory Management"),e()(),t(107,"div",35)(108,"div")(109,"label",11),i(110,"Provider"),e(),t(111,"select",12),E(112,Kt,2,2,"option",13,ie),e()(),t(114,"div")(115,"label",11),i(116,"API Endpoint"),e(),l(117,"input",36),e(),t(118,"div")(119,"label",11),i(120,"API Key"),e(),l(121,"input",37),e(),t(122,"div")(123,"label",11),i(124,"Sync Frequency"),e(),t(125,"select",38)(126,"option",39),i(127,"Real-time"),e(),t(128,"option",40),i(129,"Hourly"),e(),t(130,"option",41),i(131,"Daily"),e(),t(132,"option",42),i(133,"Weekly"),e()()(),t(134,"div",29)(135,"div",30),l(136,"input",43),t(137,"label",44),i(138,"Auto-order when stock is low"),e()(),t(139,"p",33),i(140,"Automatically create purchase orders when parts reach minimum stock levels"),e()(),t(141,"div",16)(142,"button",17),g("click",function(){return a.testInventoryConnection()}),p(143,Jt,4,0)(144,Qt,1,0),e()()()(),t(145,"div")(146,"div",7),l(147,"input",45),t(148,"h3",9),i(149,"Accounting Software"),e()(),t(150,"div",46)(151,"div")(152,"label",11),i(153,"Software"),e(),t(154,"select",47),E(155,Zt,2,2,"option",13,ie),e()(),t(157,"div")(158,"label",11),i(159,"API Endpoint"),e(),l(160,"input",48),e(),t(161,"div")(162,"label",11),i(163,"Client ID"),e(),l(164,"input",49),e(),t(165,"div")(166,"label",11),i(167,"Client Secret"),e(),l(168,"input",50),e(),t(169,"div")(170,"label",11),i(171,"Sync Frequency"),e(),t(172,"select",38)(173,"option",39),i(174,"Real-time"),e(),t(175,"option",41),i(176,"Daily"),e(),t(177,"option",42),i(178,"Weekly"),e(),t(179,"option",51),i(180,"Monthly"),e()()(),t(181,"div",29)(182,"div",30),l(183,"input",52),t(184,"label",53),i(185,"Auto-sync invoices and expenses"),e()(),t(186,"p",33),i(187,"Automatically synchronize financial data with your accounting software"),e()(),t(188,"div",16)(189,"button",17),g("click",function(){return a.testAccountingConnection()}),p(190,Xt,4,0)(191,ei,1,0),e()()()(),t(192,"div")(193,"h3",54),i(194,"Integration Status"),e(),t(195,"div",55),E(196,ti,7,6,"div",56,Bt),e()()()()),o&2){let d,f,$,fe,ve,be,ye,Se,he,xe,Ce,Ee,_e,ke,Te,we,Ie,Fe,Ne,De,Pe,Ge,Ae,Me,Re,Be,Oe,Ve,qe,Le,He,je,We,Ye;s(7),m("disabled",a.integrationForm.invalid||a.isSaving),s(),u(a.isSaving?8:9),s(2),m("formGroup",a.integrationForm),s(6),v("opacity-50",!((d=a.integrationForm.get("smsEnabled"))!=null&&d.value)),s(4),m("disabled",!((f=a.integrationForm.get("smsEnabled"))!=null&&f.value)),s(),_(a.smsProviders),s(5),m("disabled",!(($=a.integrationForm.get("smsEnabled"))!=null&&$.value)),s(4),m("disabled",!((fe=a.integrationForm.get("smsEnabled"))!=null&&fe.value)),s(2),m("disabled",!((ve=a.integrationForm.get("smsEnabled"))!=null&&ve.value)||a.isTesting.sms),s(),u(a.isTesting.sms?33:34),s(7),v("opacity-50",!((be=a.integrationForm.get("emailEnabled"))!=null&&be.value)),s(4),m("disabled",!((ye=a.integrationForm.get("emailEnabled"))!=null&&ye.value)),s(),_(a.emailProviders),s(5),m("disabled",!((Se=a.integrationForm.get("emailEnabled"))!=null&&Se.value)),s(4),m("disabled",!((he=a.integrationForm.get("emailEnabled"))!=null&&he.value)),s(4),m("disabled",!((xe=a.integrationForm.get("emailEnabled"))!=null&&xe.value)),s(4),m("disabled",!((Ce=a.integrationForm.get("emailEnabled"))!=null&&Ce.value)),s(2),m("disabled",!((Ee=a.integrationForm.get("emailEnabled"))!=null&&Ee.value)||a.isTesting.email),s(),u(a.isTesting.email?65:66),s(7),v("opacity-50",!((_e=a.integrationForm.get("paymentEnabled"))!=null&&_e.value)),s(4),m("disabled",!((ke=a.integrationForm.get("paymentEnabled"))!=null&&ke.value)),s(),_(a.paymentProviders),s(5),m("disabled",!((Te=a.integrationForm.get("paymentEnabled"))!=null&&Te.value)),s(4),m("disabled",!((we=a.integrationForm.get("paymentEnabled"))!=null&&we.value)),s(4),m("disabled",!((Ie=a.integrationForm.get("paymentEnabled"))!=null&&Ie.value)),s(3),m("disabled",!((Fe=a.integrationForm.get("paymentEnabled"))!=null&&Fe.value)),s(6),m("disabled",!((Ne=a.integrationForm.get("paymentEnabled"))!=null&&Ne.value)||a.isTesting.payment),s(),u(a.isTesting.payment?100:101),s(7),v("opacity-50",!((De=a.integrationForm.get("inventoryEnabled"))!=null&&De.value)),s(4),m("disabled",!((Pe=a.integrationForm.get("inventoryEnabled"))!=null&&Pe.value)),s(),_(a.inventoryProviders),s(5),m("disabled",!((Ge=a.integrationForm.get("inventoryEnabled"))!=null&&Ge.value)),s(4),m("disabled",!((Ae=a.integrationForm.get("inventoryEnabled"))!=null&&Ae.value)),s(4),m("disabled",!((Me=a.integrationForm.get("inventoryEnabled"))!=null&&Me.value)),s(11),m("disabled",!((Re=a.integrationForm.get("inventoryEnabled"))!=null&&Re.value)),s(6),m("disabled",!((Be=a.integrationForm.get("inventoryEnabled"))!=null&&Be.value)||a.isTesting.inventory),s(),u(a.isTesting.inventory?143:144),s(7),v("opacity-50",!((Oe=a.integrationForm.get("accountingEnabled"))!=null&&Oe.value)),s(4),m("disabled",!((Ve=a.integrationForm.get("accountingEnabled"))!=null&&Ve.value)),s(),_(a.accountingSoftware),s(5),m("disabled",!((qe=a.integrationForm.get("accountingEnabled"))!=null&&qe.value)),s(4),m("disabled",!((Le=a.integrationForm.get("accountingEnabled"))!=null&&Le.value)),s(4),m("disabled",!((He=a.integrationForm.get("accountingEnabled"))!=null&&He.value)),s(4),m("disabled",!((je=a.integrationForm.get("accountingEnabled"))!=null&&je.value)),s(11),m("disabled",!((We=a.integrationForm.get("accountingEnabled"))!=null&&We.value)),s(6),m("disabled",!((Ye=a.integrationForm.get("accountingEnabled"))!=null&&Ye.value)||a.isTesting.accounting),s(),u(a.isTesting.accounting?190:191),s(6),_(a.integrationStatuses)}},dependencies:[w,q,R,z,U,G,Z,j,Y,A,M,B,O,W],encapsulation:2})};function ii(r,n){if(r&1){let o=L();t(0,"app-garage-info-form",22),g("save",function(d){F(o);let f=y(2);return N(f.onGarageInfoSave(d))}),e()}if(r&2){let o=y(2);m("garageInfo",o.settings().garageInfo)}}function ni(r,n){if(r&1){let o=L();t(0,"app-operational-settings",23),g("save",function(d){F(o);let f=y(2);return N(f.onOperationalSettingsSave(d))}),e()}if(r&2){let o=y(2);m("settings",o.settings().operationalSettings)}}function ai(r,n){if(r&1){let o=L();t(0,"app-business-settings",23),g("save",function(d){F(o);let f=y(2);return N(f.onBusinessSettingsSave(d))}),e()}if(r&2){let o=y(2);m("settings",o.settings().businessSettings)}}function oi(r,n){if(r&1){let o=L();t(0,"app-system-settings",23),g("save",function(d){F(o);let f=y(2);return N(f.onSystemSettingsSave(d))}),e()}if(r&2){let o=y(2);m("settings",o.settings().systemSettings)}}function ri(r,n){if(r&1){let o=L();t(0,"app-integration-settings",24),g("save",function(d){F(o);let f=y(2);return N(f.onIntegrationSettingsSave(d))})("testIntegration",function(d){F(o);let f=y(2);return N(f.onTestIntegration(d))}),e()}if(r&2){let o=y(2);m("settings",o.settings().integrationSettings)}}function si(r,n){if(r&1&&(t(0,"div",17),p(1,ii,1,1,"app-garage-info-form",20),p(2,ni,1,1,"app-operational-settings",21),p(3,ai,1,1,"app-business-settings",21),p(4,oi,1,1,"app-system-settings",21),p(5,ri,1,1,"app-integration-settings",21),e()),r&2){let o=y();s(),u(o.activeTab()==="garage-info"?1:-1),s(),u(o.activeTab()==="operational"?2:-1),s(),u(o.activeTab()==="business"?3:-1),s(),u(o.activeTab()==="system"?4:-1),s(),u(o.activeTab()==="integrations"?5:-1)}}function li(r,n){r&1&&(t(0,"div",18)(1,"div",25),l(2,"div",26),t(3,"p",27),i(4,"Loading settings..."),e()()())}function mi(r,n){r&1&&(S(),t(0,"svg",35),l(1,"circle",36)(2,"path",37),e(),i(3," Saving... "))}function di(r,n){r&1&&i(0," Save All Changes ")}function ci(r,n){if(r&1){let o=L();t(0,"div",19)(1,"div",28)(2,"div",29),l(3,"div",30),t(4,"span",31),i(5,"You have unsaved changes"),e()(),t(6,"div",32)(7,"button",33),g("click",function(){F(o);let d=y();return N(d.discardChanges())}),i(8," Discard Changes "),e(),t(9,"button",34),g("click",function(){F(o);let d=y();return N(d.saveAllChanges())}),p(10,mi,4,0)(11,di,1,0),e()()()()}if(r&2){let o=y();s(9),m("disabled",o.isSaving()),s(),u(o.isSaving()?10:11)}}var tt=class r{garageSettingsService=k(oe);settings=ee(null);activeTab=ee("garage-info");isSaving=ee(!1);unsavedChanges=ee(!1);ngOnInit(){this.loadSettings()}loadSettings(){this.garageSettingsService.getSettings().subscribe({next:n=>{this.settings.set(n)},error:n=>{console.error("Error loading garage settings:",n)}})}setActiveTab(n){this.activeTab.set(n)}onGarageInfoSave(n){this.isSaving.set(!0),this.garageSettingsService.updateGarageInfo(n).subscribe({next:o=>{this.settings.set(o),this.unsavedChanges.set(!1),this.isSaving.set(!1),this.showSuccessMessage("Garage information updated successfully")},error:o=>{console.error("Error updating garage info:",o),this.isSaving.set(!1),this.showErrorMessage("Failed to update garage information")}})}onOperationalSettingsSave(n){this.isSaving.set(!0),this.garageSettingsService.updateOperationalSettings(n).subscribe({next:o=>{this.settings.set(o),this.unsavedChanges.set(!1),this.isSaving.set(!1),this.showSuccessMessage("Operational settings updated successfully")},error:o=>{console.error("Error updating operational settings:",o),this.isSaving.set(!1),this.showErrorMessage("Failed to update operational settings")}})}onBusinessSettingsSave(n){this.isSaving.set(!0),this.garageSettingsService.updateBusinessSettings(n).subscribe({next:o=>{this.settings.set(o),this.unsavedChanges.set(!1),this.isSaving.set(!1),this.showSuccessMessage("Business settings updated successfully")},error:o=>{console.error("Error updating business settings:",o),this.isSaving.set(!1),this.showErrorMessage("Failed to update business settings")}})}onSystemSettingsSave(n){this.isSaving.set(!0),this.garageSettingsService.updateSystemSettings(n).subscribe({next:o=>{this.settings.set(o),this.unsavedChanges.set(!1),this.isSaving.set(!1),this.showSuccessMessage("System settings updated successfully")},error:o=>{console.error("Error updating system settings:",o),this.isSaving.set(!1),this.showErrorMessage("Failed to update system settings")}})}onIntegrationSettingsSave(n){this.isSaving.set(!0),this.garageSettingsService.updateIntegrationSettings(n).subscribe({next:o=>{this.settings.set(o),this.unsavedChanges.set(!1),this.isSaving.set(!1),this.showSuccessMessage("Integration settings updated successfully")},error:o=>{console.error("Error updating integration settings:",o),this.isSaving.set(!1),this.showErrorMessage("Failed to update integration settings")}})}onTestIntegration(n){this.garageSettingsService.testIntegration(n.type).subscribe({next:o=>{o.success?this.showSuccessMessage(o.message):this.showErrorMessage(o.message)},error:o=>{console.error("Integration test failed:",o),this.showErrorMessage("Integration test failed")}})}hasUnsavedChanges(){return this.unsavedChanges()}saveAllChanges(){this.isSaving.set(!0),setTimeout(()=>{this.isSaving.set(!1),this.unsavedChanges.set(!1),this.showSuccessMessage("All changes saved successfully")},1e3)}discardChanges(){this.loadSettings(),this.unsavedChanges.set(!1)}exportSettings(){this.garageSettingsService.exportSettings().subscribe({next:n=>{let o=window.URL.createObjectURL(n),a=document.createElement("a");a.href=o,a.download=`garage-settings-${new Date().toISOString().split("T")[0]}.json`,a.click(),window.URL.revokeObjectURL(o),this.showSuccessMessage("Settings exported successfully")},error:n=>{console.error("Export failed:",n),this.showErrorMessage("Failed to export settings")}})}importSettings(n){let a=n.target.files?.[0];a&&this.garageSettingsService.importSettings(a).subscribe({next:d=>{this.settings.set(d),this.showSuccessMessage("Settings imported successfully")},error:d=>{console.error("Import failed:",d),this.showErrorMessage("Failed to import settings")}})}showSuccessMessage(n){console.log("Success:",n)}showErrorMessage(n){console.error("Error:",n)}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=T({type:r,selectors:[["app-garage-settings"]],decls:39,vars:12,consts:[[1,"min-h-screen","garage-settings-container","p-4","lg:p-6"],[1,"glass-card","garage-settings-header"],[1,"flex","flex-col","lg:flex-row","lg:items-center","lg:justify-between","gap-4"],[1,"flex-1"],[1,"text-2xl","lg:text-3xl","font-bold","text-white","mb-1"],[1,"text-gray-300"],[1,"glass-card","settings-nav"],[1,"flex","flex-wrap","gap-2","overflow-x-auto"],[1,"nav-button","flex","items-center","gap-2","px-4","py-2","rounded-lg","backdrop-blur-sm","border-2","transition-all","duration-300","font-medium","hover:scale-105","whitespace-nowrap",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"text-sm"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"],[1,"space-y-6"],[1,"glass-card"],[1,"fixed","bottom-0","left-0","right-0","glass-card","m-4","rounded-2xl","shadow-2xl"],[3,"garageInfo"],[3,"settings"],[3,"save","garageInfo"],[3,"save","settings"],[3,"save","testIntegration","settings"],[1,"text-center","py-12"],[1,"loading-spinner","mx-auto"],[1,"mt-4","text-gray-300"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-2"],[1,"w-2","h-2","bg-orange-400","rounded-full","animate-pulse"],[1,"text-sm","text-gray-300"],[1,"flex","space-x-3"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-4","h-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(o,a){o&1&&(t(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"h1",4),i(5,"Garage Settings"),e(),t(6,"p",5),i(7,"Configure your garage operations, business rules, and system preferences"),e()()()(),t(8,"div",6)(9,"nav",7)(10,"button",8),g("click",function(){return a.setActiveTab("garage-info")}),S(),t(11,"svg",9),l(12,"path",10),e(),Q(),t(13,"span",11),i(14,"Garage Information"),e()(),t(15,"button",8),g("click",function(){return a.setActiveTab("operational")}),S(),t(16,"svg",9),l(17,"path",12)(18,"path",13),e(),Q(),t(19,"span",11),i(20,"Operations"),e()(),t(21,"button",8),g("click",function(){return a.setActiveTab("business")}),S(),t(22,"svg",9),l(23,"path",14),e(),Q(),t(24,"span",11),i(25,"Business"),e()(),t(26,"button",8),g("click",function(){return a.setActiveTab("system")}),S(),t(27,"svg",9),l(28,"path",15),e(),Q(),t(29,"span",11),i(30,"System"),e()(),t(31,"button",8),g("click",function(){return a.setActiveTab("integrations")}),S(),t(32,"svg",9),l(33,"path",16),e(),Q(),t(34,"span",11),i(35,"Integrations"),e()()()(),p(36,si,6,5,"div",17)(37,li,5,0,"div",18),p(38,ci,12,2,"div",19),e()),o&2&&(s(10),H(a.activeTab()==="garage-info"?"nav-button-active":"nav-button-inactive"),s(5),H(a.activeTab()==="operational"?"nav-button-active":"nav-button-inactive"),s(6),H(a.activeTab()==="business"?"nav-button-active":"nav-button-inactive"),s(5),H(a.activeTab()==="system"?"nav-button-active":"nav-button-inactive"),s(5),H(a.activeTab()==="integrations"?"nav-button-active":"nav-button-inactive"),s(5),u(a.settings()?36:37),s(2),u(a.settings()&&a.hasUnsavedChanges()?38:-1))},dependencies:[w,Xe,re,le,me,de,ce],styles:[".garage-settings-container[_ngcontent-%COMP%]{min-height:100vh;background:transparent}.nav-button-active[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-hover))!important;border-color:var(--color-primary)!important;color:#fff!important;box-shadow:0 4px 15px #2563eb4d}.nav-button-inactive[_ngcontent-%COMP%]{background-color:var(--color-bg-primary)!important;border-color:var(--color-border)!important;color:var(--color-text-secondary)!important}.nav-button-inactive[_ngcontent-%COMP%]:hover{background-color:var(--color-bg-tertiary)!important;border-color:var(--color-primary)!important;color:var(--color-text-primary)!important;box-shadow:0 2px 8px #2563eb33}.loading-spinner[_ngcontent-%COMP%]{width:2rem;height:2rem;border:3px solid rgba(59,130,246,.3);border-top:3px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};export{tt as GarageSettingsComponent};
